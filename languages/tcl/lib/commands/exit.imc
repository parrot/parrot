###
# [exit]

.namespace [ "Tcl" ]

.sub _exit
  .local pmc argv 
  argv = foldup

  .local int argc
  argc = argv

  .local int exit_code
  exit_code = 0

  if argc > 2 goto badargs
  if argc == 0 goto exit

  exit_code = argv[0]

exit:
  exit exit_code

badargs:
  $P1 = new String
  $P1 = "wrong # args: should be \"exit ?returnCode?\"\n"
  .pcc_begin_return
    .return TCL_ERROR
    .return $P1
  .pcc_end_return
.end
