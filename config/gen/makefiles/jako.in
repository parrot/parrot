#
# Makefile.in
#
# $Id$
#

PERL = @perl@
RM_F = @rm_f@

DIR=languages/jako
TOOL_DIR=../..
JAKOC=$(PERL) -I lib jakoc
INTERP=../../@test_prog@

.SUFFIXES: .jako .pir


#
# Default target:
#

all: \
	examples/bench.pir      \
	examples/board.pir      \
	examples/euclid.pir     \
	examples/fact.pir       \
	examples/fib.pir        \
	examples/hello.pir      \
	examples/leibniz.pir    \
	examples/life.pir       \
	examples/mandelbrot.pir \
	examples/mandelzoom.pir \
	examples/mops.pir       \
	examples/nci.pir        \
	examples/primes.pir     \
	examples/sub.pir

# queens.pir is broken
	examples/queens.pir     \

#
# Compilation:
#

.jako.pir:
	$(JAKOC) $< > $@ || (rm -f $@ && false)

examples/bench.pir:      examples/bench.jako      jakoc
examples/board.pir:      examples/board.jako      jakoc
examples/euclid.pir:     examples/euclid.jako     jakoc
examples/fact.pir:       examples/fact.jako       jakoc
examples/fib.pir:        examples/fib.jako        jakoc
examples/hello.pir:      examples/hello.jako      jakoc
examples/leibniz.pir:    examples/leibniz.jako    jakoc
examples/life.pir:       examples/life.jako       jakoc
examples/mandelbrot.pir: examples/mandelbrot.jako jakoc
examples/mandelzoom.pir: examples/mandelzoom.jako jakoc
examples/mops.pir:       examples/mops.jako       jakoc
examples/nci.pir:        examples/nci.jako        jakoc
examples/primes.pir:     examples/primes.jako     jakoc
examples/queens.pir:     examples/queens.jako     jakoc
examples/sub.pir:        examples/sub.jako        jakoc


#
# Other targets:
#

clean:
	$(RM_F) "examples/*.pir" "examples/*.list"

over:
	@$(MAKE) clean
	@$(MAKE) all

test: all
	$(INTERP) examples/bench.pir
	$(INTERP) examples/board.pir
	$(INTERP) examples/euclid.pir
	$(INTERP) examples/fact.pir
	$(INTERP) examples/fib.pir
	$(INTERP) examples/hello.pir
	$(INTERP) examples/leibniz.pir
	$(INTERP) examples/life.pir
	$(INTERP) examples/mandelbrot.pir
	$(INTERP) examples/mandelzoom.pir
	$(INTERP) examples/mops.pir
	$(INTERP) examples/nci.pir
	$(INTERP) examples/primes.pir
	$(INTERP) examples/sub.pir

# queens.pir is broken
	$(INTERP) examples/queens.pir

#
# End of file.
#
