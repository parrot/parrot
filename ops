{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1395076847,"metadata":{"github-id":"MDU6SXNzdWUyOTU4MDMwOQ==","github-url":"https://github.com/parrot/parrot/issues/1065","origin":"github"},"title":"nqp/perl6 needs openpipe with set'able env","message":"See https://github.com/rakudo/rakudo/blob/nom/src/core/control.pm#L228\nor https://gitorious.org/parrot-plumage/parrot-plumage/source/c9f1e8d49a87b53271e137461e5afec5e021a5e5:src/lib/Plumage/NQPUtil.nqp#L767 for the current affair of their QX op.\nThe env for the child pipe cannot be set, we can only set the env for spawn and shell.\n\nSo we need to support a new set'able env attribute for FileHandle, via FileHandle.set_pmc_keyed_str(STRING *key, PMC *value)\nSee branch `rurban/openpipe-env-gh1065`\n\nUsage:\n\n```\npipe = new ['FileHandle']\nenv = new ['Env']\nenv['TEST_PIPE'] = \"1\"\npipe['env'] = env\npipe.'open'(cmd, \"rp\")\npipe.'readall'()\npipe.'close'()\n```","files":null}]}