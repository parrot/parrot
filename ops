{"version":1,"ops":[{"type":3,"author":{"id":"0c9c62332064205b2d799407019fa3e7e2f43862"},"timestamp":1417020836,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0Njc1OTkz","github-url":"https://github.com/parrot/parrot/issues/1151#issuecomment-64675993"},"message":"Interesting.  PGE is no longer actively used or maintained, but it's pure PIR code, so this points to _something_ within Parrot that is leaking memory.","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417021227,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0Njc3MDgy","github-url":"https://github.com/parrot/parrot/issues/1151#issuecomment-64677082"},"message":"Yes, thanksfully it's only one small 24byte (3 words, this is on 64bit) block (PMC header?), which is leaking. Will find out soon.","files":null},{"type":5,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417021251,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE5OTA4OTU2Mw=="},"added":["Sev-low"],"removed":[]},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417078043,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0NzYwODI3","github-url":"https://github.com/parrot/parrot/issues/1151#issuecomment-64760827"},"message":"Those two leaks, **imcc-\u003eglobals** in `e_pbc_open`: \n\n```\n$ valgrind -v --leak-check=full ./parrot_old t/compilers/pge/pge_text_2.pir\n==941== 408 (24 direct, 384 indirect) bytes in 1 blocks are definitely lost in loss record 942 of 1,548\n==941==    at 0x4A057BB: calloc (vg_replace_malloc.c:593)\n==941==    by 0x4DC05F7: gc_gms_allocate_memory_chunk_zeroed (gc_gms.c:2016)\n==941==    by 0x4DB52C5: Parrot_gc_allocate_memory_chunk_with_interior_pointers (api.c:673)\n==941==    by 0x4F4D911: e_pbc_open (pbc.c:469)\n==941==    by 0x4F4309C: emit_open (instructions.c:672)\n==941==    by 0x4F3CDFB: imcc_compile_buffer_safe (imcc.l:1365)\n==941==    by 0x4F3E903: imcc_run_compilation_internal (main.c:546)\n==941==    by 0x4F3E715: imcc_run_compilation_reentrant (main.c:497)\n==941==    by 0x4F3E686: imcc_compile_file (main.c:474)\n==941==    by 0x4EC7200: Parrot_IMCCompiler_nci_compile_file (imccompiler.pmc:193)\n==941==    by 0x4ECEF6E: Parrot_NativePCCMethod_invoke (nativepccmethod.pmc:119)\n==941==    by 0x4DCCCAE: Parrot_pcc_invoke_from_sig_object (pcc.c:332)\n==941==\n==941== 8,514 (48 direct, 8,466 indirect) bytes in 2 blocks are definitely lost in loss record 1,490 of 1,548\n==941==    at 0x4A057BB: calloc (vg_replace_malloc.c:593)\n==941==    by 0x4DC05F7: gc_gms_allocate_memory_chunk_zeroed (gc_gms.c:2016)\n==941==    by 0x4DB52C5: Parrot_gc_allocate_memory_chunk_with_interior_pointers (api.c:673)\n==941==    by 0x4F4D911: e_pbc_open (pbc.c:469)\n==941==    by 0x4F4309C: emit_open (instructions.c:672)\n==941==    by 0x4F3CDFB: imcc_compile_buffer_safe (imcc.l:1365)\n==941==    by 0x4F3E903: imcc_run_compilation_internal (main.c:546)\n==941==    by 0x4F3E715: imcc_run_compilation_reentrant (main.c:497)\n==941==    by 0x4F3E686: imcc_compile_file (main.c:474)\n==941==    by 0x4DD292E: Parrot_interp_compile_file (api.c:729)\n==941==    by 0x4E16E87: compile_file (api.c:2204)\n==941==    by 0x4E17756: Parrot_load_bytecode (api.c:2413)\n```","files":null},{"type":2,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417078767,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTk5NDEzMDU5"},"title":"pbc leaks, missing imcc-\u003eglobals in imcc_globals_destroy","was":"pbc leaks, missing imcc-\u003eglobals in imcc_globals_destroy"},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417080686,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0NzY1NjQz","github-url":"https://github.com/parrot/parrot/issues/1151#issuecomment-64765643"},"message":"WONTFIX for now. 24 byte per pbc is too trivial and much less than macho internal dyld leaks.\n\nStarting at  imcc-\u003eglobals-\u003efirst instead of imcc-\u003eglobals-\u003ecs in pbc.c:394 is wrong.\nA final GC is running after the exit handler, which should clean this up.","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417080686,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTk5NDI2NDEy"},"status":2}]}