{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1266046724,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NzI2","github-url":"https://github.com/parrot/parrot/issues/518","origin":"github"},"title":"pbc_dump: Mark branch targets in -d mode","message":"pbc_dump -d shows opcodes but does not indicate branch targets:\n\n```\n 012b:  0000001b 00000001 00000046                            unless_p_ic\n 012e:  00000348 00000002 00000001                            shift_p_p\n 0131:  00000023 00000004                                     set_args_pc\n 0134:  00000024 00000004                                     get_results_pc\n 0137:  000002c4 00000002 00000044                            callmethodcc_p_sc\n 013a:  00000367 00000009 00000007                            iter_p_p\n 013d:  0000001b 00000009 ffffffee                            unless_p_ic\n 0140:  00000347 00000001 00000009                            shift_s_p\n 0143:  000003d1 00000003 00000007 00000049                   set_p_p_kc\n 0147:  000002d5 00000000 00000003 00000043                   isa_i_p_sc\n 014b:  00000014 00000000 fffffff2                            if_i_ic\n```\n\nWhile backwards branching means that marking branch targets in the output stream as labels would be a two pass operation, it should be possible to do the match and indicate the target offset as part of the opcode:\n\n```\n 012b:  0000001b 00000001 00000046                            unless_p_ic 0171\n ...\n 013d:  0000001b 00000009 ffffffee                            unless_p_ic 012b\n ...\n 014b:  00000014 00000000 fffffff2                            if_i_ic 013d\n```\n\nNote: I make no guarantee those offsets are right.\n\nOriginally http://trac.parrot.org/parrot/ticket/1439","files":null}]}