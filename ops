{"version":1,"ops":[{"type":1,"author":{"id":"dee4ac42ff5761a5fc2411dbf6edb00635f20ab9"},"timestamp":1243366369,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODk3","github-url":"https://github.com/parrot/parrot/issues/688","origin":"github"},"title":"GC-able packfiles - Out of mem (PASM, compreg, invokecc)","message":"Attached test use compreg P1, \"PASM\" and invokecc it 100,000 times.\nOn i386-MSWin32 (mingw32) it consumes 66MB of RAM with r39159 (107 MB of RAM with r11704).\n\nIf you replace \"lt I20, 100000, NEXT\" to \"lt I20, 10000000, NEXT\" it fails with \"Parrot VM: PANIC: Out of mem! C file src\\gc\\alloc_memory.c, line 142\".\n\n```\nset S28, \"\"\nconcat S28, \".pcc_sub :anon _indi:\\n\"\nconcat S28, \" get_params \\\"(0,0,0)\\\", I0, I1, I2\\n\"\nconcat S28, \" set I3, 23\\n\"\nconcat S28, \" set_returns \\\"(0)\\\", I3\\n\"\nconcat S28, \" returncc\\n\"\n\ncompreg P1, \"PASM\"\nset I20, 0\n\nNEXT:\nset_args \"(0)\",S28\nget_results \"(0)\", P0\ninvokecc P1\n\nneeds_destroy P0\nsweep 0\n\ninc I20\nlt I20, 100000, NEXT\n\n# sleep 10\n\nend\n```\n\nOriginally http://trac.parrot.org/parrot/ticket/706","files":null}]}