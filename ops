{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1305191441,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDM=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502743"},"message":"\u003cp\u003e\nDatum:  It appears we have never had to probe for \u003ci\u003eerrno.h\u003c/i\u003e before, as references to it don't appear within the configuration system.\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e$ ack 'errno.h' *\ncompilers/imcc/imclexer.c\n46:#include \u0026lt;errno.h\u0026gt;\ninclude/parrot/parrot.h\n35:#include \u0026lt;errno.h\u0026gt;\nsrc/gc/malloc.c\n332:#include \u0026lt;errno.h\u0026gt;    /* needed for optional MALLOC_FAILURE_ACTION */\n5545:      * Include errno.h to support default failure action.\ntools/dev/lib_deps.pl\n384:errno       errno.h\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1305192367,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDQ=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502744"},"message":"\u003cp\u003e\nDatum:  On my older Debian,\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e$ lsb_release -a 2\u0026gt;/dev/null | grep -i description\nDescription:    Debian GNU/Linux 5.0.3 (lenny)\n$ cat /usr/include/asm/errno.h\n#include \u0026lt;asm-generic/errno.h\u0026gt;\n\u003c/pre\u003e\u003cp\u003e\nSo \u003ci\u003easm/errno.h\u003c/i\u003e does nothing but \u003ctt\u003einclude\u003c/tt\u003e \u003ci\u003easm-generic/errno.h\u003c/i\u003e.  Has this configuration changed on your Ubuntu?\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"0c9c62332064205b2d799407019fa3e7e2f43862"},"timestamp":1305192579,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDU=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502745"},"message":"\u003cpre class=\"wiki\"\u003eOn Thu, May 12, 2011 at 01:30:33AM -0000, Parrot wrote:\n\u0026gt;  I just upgraded my laptop to Ubuntu 11.04, and immediately there is a\n\u0026gt;  problem building Parrot. [...]\nFWIW, Since Apr 30 I've been running Kubuntu 11.04 on all of my machines,\nand haven't encountered this error when building Parrot.  So perhaps it's\nsomething specific to your configuration or Parrot setup.\nBy looking at the files you cite I do see that /usr/include/linux/errno.h\ndoes have #include \u0026lt;asm/errno.h\u0026gt; and that there is no /usr/include/asm/errno.h\nfile on my machine (which sounds like an Ubuntu bug)... but for some reason I\nnever encounter the error when building Parrot.\nPerhaps there's a package that is/isn't loaded on your machine that isn't/is\nloaded on mine?  What options are you sending to parrot Configure.pl?\n\u0026gt;  {{{\n\u0026gt;  In file included from src/datatypes.c:23:\n\u0026gt;  In file included from ./include/parrot/parrot.h:35:\n\u0026gt;  In file included from /usr/include/errno.h:36:\n\u0026gt;  In file included from /usr/include/bits/errno.h:25:\n\u0026gt;  /usr/include/linux/errno.h:4:10: fatal error: 'asm/errno.h' file not found\n\u0026gt;  }}}\n\u0026gt;\n\u0026gt; [...]\n\u0026gt;\n\u0026gt;  So it looks like it's in /usr/include/errno.h (\"#include \u0026lt;errno.h\u0026gt;\") or in\n\u0026gt;  /usr/include/asm-generic/errno.h (\"#include \u0026lt;asm-generic/errno.h\u0026gt;\").\nParrot is doing the correct thing here -- it's including \u0026lt;errno.h\u0026gt;,\nwhich in turn includes \u0026lt;bits/errno.h\u0026gt;, which includes \u0026lt;linux/errno.h\u0026gt;,\nwhich includes \u0026lt;asm/errno.h\u0026gt; (and that's where the error is).  I don't\nsee any way to fix this in Parrot.\n\u0026gt;   - Try to avoid using asm/errno.h in our code, if possible\nI doubt that Parrot uses asm/errno.h directly -- it's getting it\nindirectly through the chain listed above.\n\u0026gt;   - Add a configure probe to search for the correct errno.h\nIt's already getting the correct errno.h -- the one in /usr/include/errno.h .\n\u0026gt;   - Yell at Ubuntu until they fix this.\nI'll add a fourth option -- figure out why it's working on my machine and\nnot yours.  :-)\nPm\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"0c9c62332064205b2d799407019fa3e7e2f43862"},"timestamp":1305193101,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDY=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502746"},"message":"\u003cpre class=\"wiki\"\u003eAlso, the problem is apparently noted in Launchpad:\nhttps://bugs.launchpad.net/ubuntu/+source/linux/+bug/778047\nThey suggest the symlink workaround.  I still don't know why my\nmachine(s) aren't exhibiting the problem.\nPm\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"099af60226e2576bd4ff0f5c2614b710c745cab6"},"timestamp":1305193308,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDc=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502747"},"message":"\u003cp\u003e\nHello.\n\u003c/p\u003e\n\n\u003cp\u003e\nLooks like you have to install gcc-multilib package.\n\u003c/p\u003e\n\n\u003cp\u003e\n--\nBacek\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"0c9c62332064205b2d799407019fa3e7e2f43862"},"timestamp":1305193423,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDg=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502748"},"message":"\u003cpre class=\"wiki\"\u003eOn Wed, May 11, 2011 at 09:38:15PM -0500, Patrick R. Michaud wrote:\n\u0026gt; I still don't know why my machine(s) aren't exhibiting the problem.\nAha, found it from the ticket:\n\u0026gt; \u0026gt; /opt/intel/Compiler/11.1/064/Documentation/en_US/compiler_c/main_cls/copts/common_options/option_fmath_errno.htm\n\u0026gt; \u0026gt; /opt/intel/Compiler/11.1/064/Documentation/ja_JP/compiler_c/main_cls/copts/common_options/option_fmath_errno.htm\nLooks like you're maybe using the Intel compiler?  This bug seems\nto only affect the Intel compiler, whereas all my systems have\nbeen using gcc.\nPm\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"c750eb0960e029df836e56dc77bb8c148fcf5723"},"timestamp":1305193671,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NDk=","github-url":"https://github.com/parrot/parrot/issues/316#issuecomment-3502749"},"message":"\u003cp\u003e\nSounds like your system headers are in a bad way. POSIX specifies (\u003ca   href=\"http://pubs.opengroup.org/onlinepubs/000095399/basedefs/errno.h.html\"\u003e\u003cspan class=\"icon\"\u003eÂ \u003c/span\u003ehttp://pubs.opengroup.org/onlinepubs/000095399/basedefs/errno.h.html\u003c/a\u003e) that '#include \u0026lt;errno.h\u0026gt;' should pull in all the symbols required to operate on the errno global. If this isn't working, it is critical platform-level breakage that should be hard to miss by the Ubuntu team, which suggests your configuration has somehow diverged from the vanilla ubuntu in these matters.\n\u003c/p\u003e\n\n\u003cp\u003e\nIs this result with gcc? Other compilers have a history of similar issues with new linux distro releases (to be fair, the headers are designed and tested for gcc only).\n\u003c/p\u003e\n\n\u003cp\u003e\nCan you reproduce this issue on a clean install? Perhaps the upgrader left you in a bad state.\n\u003c/p\u003e\n\n\u003cp\u003e\nAs for remedies, we don't (and shouldn't) refer to system-specific header files such as asm-generic/errno.h unless absolutely necessary. A quick ack in our codebase finds no uses of asm-generic/ and only one use of asm/. Configure probes for this sort of feature common across all platforms should also be held as a last resort.\n\u003c/p\u003e\n\n\u003cp\u003e\nI recommend you raise the issue with Ubuntu. This is a critical platform error. If the error is as you've described, most any code is broken on your platform (try writting code that performs meaninful and sound operations without using errno). This is completely unacceptable.\n\u003c/p\u003e","files":null}]}