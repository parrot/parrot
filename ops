{"version":1,"ops":[{"type":1,"author":{"id":"0c9c62332064205b2d799407019fa3e7e2f43862"},"timestamp":1348777526,"metadata":{"github-id":"MDU6SXNzdWU3MTk2NDkz","github-url":"https://github.com/parrot/parrot/issues/847","origin":"github"},"title":"stdin.readline no longer flushes stdout","message":"Starting with 4.8.0, reading from standard input (via .readline in this case) no longer flushes the standard output.  This is changed behavior from 4.6.0, and a potential blocker for the Rakudo Star 2012.09 release.\n\nConsider the following example program:\n\n```\npmichaud@kiwi:/zip/perl/parrot-4.6.0$ cat ../pz1.pir\n.sub 'main' :main\n    $P0 = getstdin\n    'xyz'($P0)\n.end\n\n\n.sub 'xyz'\n    .param pmc pio\n\n    print \"abc: \"\n    $S0 = pio.\"readline\"()\n    print \"abc = \"\n    say $S0\n\n    print \"def: \"\n    $S0 = pio.\"readline\"()\n    print \"def = \"\n    say $S0\n.end\n```\n\nWhen run with parrot 4.6.0, the \"abc: \" and \"def: \" prompts are displayed prior to blocking for input:\n\n```\npmichaud@kiwi:/zip/perl/parrot-4.6.0$ ./parrot ../pz1.pir\nabc: hello\nabc = hello\n\ndef: world\ndef = world\n```\n\n(Here I've entered \"hello\" and \"world\" in response to the prompts.)\n\nIn parrot 4.8.0 and current master (RELEASE_4_8_0-77-gd220be7), the prompts are not displayed until after the input is supplied:\n\n```\npmichaud@kiwi:~/p6/parrot$ ./parrot /zip/perl/pz1.pir \nhello\nabc: abc = hello\n\nworld\ndef: def = world\n\npmichaud@kiwi:~/p6/parrot$ \n```\n\nThis causes problems for programs that expect to be able to print a prompt to standard output and then read from standard input.  This problem is known to exist on both Linux (Kubuntu 12.04) and Windows (XP 32-bit).\n\nThere have been other problems reported with Parrot's .readline in 4.8.0, I'm golfing those now and will file separate issue tickets as soon as I have them.\n\nThanks,\n\nPm","files":null}]}