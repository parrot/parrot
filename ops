{"version":1,"ops":[{"type":3,"author":{"id":"611fed679c0580ceebb58a6d3e11b3ce00d4a1c8"},"timestamp":1312515333,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0Nzk=","github-url":"https://github.com/parrot/parrot/issues/526#issuecomment-3503479"},"message":"\u003cp\u003e\nHere is a minimal PIR test case:\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e\n.sub 'main' :main\n    .local pmc archive\n    load_bytecode 'Archive/Zip.pir'\n    archive = new [\"Archive\";\"Zip\"]\n    archive.'addFile'(\"README.txt\")\n    archive.'writeToFileNamed'(\"output.zip\")\n.end\n\u003c/pre\u003e\u003cp\u003e\nIf README.txt doesn't exist I get a very unhelpful error:\n\u003c/p\u003e\n\u003cpre class=\"wiki\"\u003eNull PMC access in find_method('_usesFileNamed')\ncurrent instr.: 'parrot;Archive;Zip;writeToFileNamed' pc 2365 (/usr/local/lib/parrot/3.5.0-devel/library/Archive/Zip.pir:720)\ncalled from Sub 'main' pc 21 (test.pir:6)\n\u003c/pre\u003e\u003cp\u003e\nIf it does I still get the same error as above:\n\u003c/p\u003e\n\u003cpre class=\"wiki\"\u003eerror:no member name given\nNull PMC access in get_integer()\ncurrent instr.: 'parrot;Archive;Zip;Base;pack_V' pc 145 (/usr/local/lib/parrot/3.5.0-devel/library/Archive/Zip.pir:87)\ncalled from Sub 'parrot;Archive;Zip;Member;_writeLocalFileHeader' pc 807 (/usr/local/lib/parrot/3.5.0-devel/library/Archive/Zip.pir:284)\ncalled from Sub 'parrot;Archive;Zip;Member;_writeToFileHandle' pc 1802 (/usr/local/lib/parrot/3.5.0-devel/library/Archive/Zip.pir:507)\ncalled from Sub 'parrot;Archive;Zip;writeToFileHandle' pc 2509 (/usr/local/lib/parrot/3.5.0-devel/library/Archive/Zip.pir:760)\ncalled from Sub 'parrot;Archive;Zip;writeToFileNamed' pc 2416 (/usr/local/lib/parrot/3.5.0-devel/library/Archive/Zip.pir:729)\ncalled from Sub 'main' pc 21 (test.pir:6)\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1312791968,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0ODA=","github-url":"https://github.com/parrot/parrot/issues/526#issuecomment-3503480"},"message":"\u003cp\u003e\nEclesia:\n\u003c/p\u003e\n\n\u003cp\u003e\nwhiteknight indicated he opened this ticket following your report, so I'm switching the \"Reporter\" to you.\n\u003c/p\u003e\n\n\u003cp\u003e\nDoes commit a39491c178b address your concerns?\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"bea16cc76baeb7447b7aed3a8542a5dfcb653d62"},"timestamp":1312857079,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0ODI=","github-url":"https://github.com/parrot/parrot/issues/526#issuecomment-3503482"},"message":"\u003cp\u003e\nkid51 : thanks for trying to fix it.\nThe archive seems fine. but the content is actually corrupted.\nI can't extract anything from it.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1312868363,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0ODM=","github-url":"https://github.com/parrot/parrot/issues/526#issuecomment-3503483"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/2171#comment:1\" title=\"Comment 1 for Ticket #2171\"\u003ebubaflub\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Here is a minimal PIR test case:\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nI tried this case today.  Here are my results:\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e$ cat ziptest.pir\n\n# Copyright (C) 2006-2009, Parrot Foundation.\n\n# $Id: skeleton.pir 38369 2009-04-26 12:57:09Z fperrad $\n\n.sub 'main' :main\n    .local pmc archive\n    load_bytecode 'Archive/Zip.pir'\n    archive = new [\"Archive\";\"Zip\"]\n    archive.'addFile'(\"README.txt\")\n    archive.'writeToFileNamed'(\"output.zip\")\n.end\n\n# Local Variables:\n\n# mode: pir\n\n# fill-column: 100\n\n# End:\n\n# vim: expandtab shiftwidth=4 ft=pir:\n\n$ ls README.txt\nls: README.txt: No such file or directory\n$ ./parrot ziptest.pir\n$ ls output*\noutput.zip\n$ unzip -p output.zip\nwarning [output.zip]:  zipfile is empty\n$ echo \"This is a dummy README.txt file\" \u0026gt; README.txt\n$ cat README.txt\nThis is a dummy README.txt file\n$ ./parrot ziptest.pir\n$ unzip -l output.zip\nArchive:  output.zip\n  Length     Date   Time    Name\n\n---\n\n```\n   32  08-08-11 18:32   README.txt\n```\n\n---\n\n```\n   32                   1 file\n```\n\n$ unzip -p output.zip\n  error:  invalid compressed data to inflate README.txt\n\u003c/pre\u003e\u003cp\u003e\nSo, superficially, I was able to \u003ci\u003ezip\u003c/i\u003e, but I was unable to \u003ci\u003eunzip\u003c/i\u003e successfully.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"090edab1282a45bd2d4c0e11ceffc2d7454f9e77"},"timestamp":1312904795,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0ODQ=","github-url":"https://github.com/parrot/parrot/issues/526#issuecomment-3503484"},"message":"\u003cp\u003e\nI missed something with the COMPRESSION_DEFLATED mode when I ported the Perl5 module Archive::Zip 1.30.\n\u003c/p\u003e\n\n\u003cp\u003e\nTry to revert \u003ca   href=\"https://github.com/parrot/parrot/commit/8df7a60e61fbb927696f8889e2e453e98ab24a9c#runtime/parrot/library/Archive/Zip.pir\"\u003e\u003cspan class=\"icon\"\u003eÂ \u003c/span\u003ehttps://github.com/parrot/parrot/commit/8df7a60e61fbb927696f8889e2e453e98ab24a9c#runtime/parrot/library/Archive/Zip.pir\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\nThe COMPRESSION_STORED mode works well.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1355292367,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMjc3OTI1","github-url":"https://github.com/parrot/parrot/issues/526#issuecomment-11277925"},"message":"Can anybody comment on the status of this issue?","files":null}]}