{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1298889963,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4Njg=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503868"},"message":"\u003cp\u003e\nCould you post the output of: \u003ctt\u003eperl Configure.pl --verbose-step=auto::va_ptr\u003c/tt\u003e?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"c750eb0960e029df836e56dc77bb8c148fcf5723"},"timestamp":1298896888,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4Njk=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503869"},"message":"\u003cp\u003e\nReplying to \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/2031\" title=\"bug: Configure.pl bug in Gentoo (new)\"\u003edukeleto\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n {{{\n donp@tower ~/src/parrot/parrot-3.1.0 $ perl Configure.pl\n auto::byteorder - Compute native byteorder for wordsize.....little-endian.\n auto::va_ptr - Test the type of va_ptr...\n step auto::va_ptr died during execution: Unknown va_ptr type at config/auto/va_ptr.pm line 41.\n  at Configure.pl line 77\n auto::format - What formats should be used for sprintf............done.\n }}}\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nThere is a lot of context missing here. The original report is documented here at \u003ca   href=\"http://irclog.perlgeek.de/parrot/2011-02-28#i_3340631\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://irclog.perlgeek.de/parrot/2011-02-28#i_3340631\u003c/a\u003e.\n\u003c/p\u003e\n\n\u003cp\u003e\nA key point that sticks out is that the processor is not an i686, but very close, and requires special compiler flags (-march=c3). The reporter did not indicate whether this information had been conveyed to Configure.pl (is it possible to convey this information?). If Configure.pl was unaware of this, it is quite possible that gcc generated code that included illegal instructions for this platform, leading to program crashes (which are interpreted as \"No, that's not how va_lists work here\").\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Related bug?\n \u003ca   href=\"http://rt.perl.org/rt3//Public/Bug/Display.html?id=47313\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://rt.perl.org/rt3//Public/Bug/Display.html?id=47313\u003c/a\u003e\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nHighly unlikely. That was a nomenclature issue.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"7e13c9edbd43bee1879815280c21a689e84c6026"},"timestamp":1298949710,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4NzA=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503870"},"message":"\u003cp\u003e\nauto::va_ptr -        Test the type of va_ptr...\ni686-pc-linux-gnu-gcc  -pipe -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DVA_TYPE_STACK -I./include -c test_8367.c\ni686-pc-linux-gnu-gcc -Wl,-O1 -Wl,--as-needed -L/usr/local/lib -Wl,-E test_8367.o  -o test_8367  -lnsl -ldl -lm -lcrypt -lutil -lpthread -lrt\n./test_8367\ni686-pc-linux-gnu-gcc  -pipe -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DVA_TYPE_REGISTER -I./include -c test_8367.c\ni686-pc-linux-gnu-gcc -Wl,-O1 -Wl,--as-needed -L/usr/local/lib -Wl,-E test_8367.o  -o test_8367  -lnsl -ldl -lm -lcrypt -lutil -lpthread -lrt\n./test_8367\n\u003c/p\u003e\n\n\u003cp\u003e\nstep auto::va_ptr died during execution: Unknown va_ptr type at config/auto/va_ptr.pm line 41.\n\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\nat Configure.pl line 77\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nauto::format -        What formats should be used for sprintf...\nSetting Configuration Data:\n(\n\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\nverbose =\u0026gt; undef,\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\n);\n.........done.\n--- snip end ---\n\u003c/p\u003e\n\n\u003cp\u003e\nI think you're probably right about Configure.pl hiding the error message of 'illegal instruction', which is the indicator that gcc is missing the arch flag.\n\u003c/p\u003e\n\n\u003cp\u003e\nI tried running Configure.pl again with CFLAGS set but the output is the same as above (calling gcc with no -march=c3)\n\u003c/p\u003e\n\n\u003cp\u003e\ndonp@tower ~/src/parrot/parrot-3.1.0 $ CFLAGS=-march=c3 perl Configure.pl --verbose-step=auto::va_ptr\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"c750eb0960e029df836e56dc77bb8c148fcf5723"},"timestamp":1298954995,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4NzE=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503871"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/2031#comment:3\" title=\"Comment 3 for Ticket #2031\"\u003edonpdonp\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cp\u003e\nYou can try to \"fool\" Configure.pl by setting it such that the C compiler is gcc with the flag. Either use \"--cc='gcc -march=c3'\" or create a small cc script in your $PATH that does the appropriate thing (and use that as your C compiler).\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1298955657,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4NzI=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503872"},"message":"\u003cp\u003e\nYou may need to do the same for --link and --ld\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1308044397,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4NzM=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503873"},"message":"\u003cp\u003e\ndonp:  Does the approach described by plobsing and NotFound work for you?\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1309474585,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM4NzQ=","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-3503874"},"message":"Trac commenter: dukeleto\n\n\u003cp\u003e\nGentoo supposedly starts all of its m options in the /etc/make.profile file.  I say 'supposedly' because it is configurable by the user, and may not be set properly.  These are usually symlinks to /usr/portage/profiles/default/linux/* files, separated by architecture and Gentoo build year.\n\u003c/p\u003e\n\n\u003cp\u003e\nThis is what the portage system uses when compiling packages from source.  The Configure.pl could be made to check this on Gentoo systems, but being roughly half a day old to parrot, I am not sure how to easily fit this into the code.\n\u003c/p\u003e\n\n\u003cp\u003e\nextra reference: \u003ca   href=\"http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=3\u0026amp;chap=1\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://www.gentoo.org/doc/en/handbook/handbook-x86.xml?part=3\u0026amp;chap=1\u003c/a\u003e\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1364235491,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE1NDExMDE3","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-15411017"},"message":"@donpdonp any way that you could see if this is still occurring for you on the 5.0.0 stable release? That would be really helpful. Thanks!","files":null},{"type":3,"author":{"id":"7e13c9edbd43bee1879815280c21a689e84c6026"},"timestamp":1364235806,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE1NDExMzU5","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-15411359"},"message":"That hardware with the CPU that was literally one instruction short of a 686 has been retired. Perhaps this bug report is no longer relevant.","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1364236814,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE1NDEyOTMx","github-url":"https://github.com/parrot/parrot/issues/644#issuecomment-15412931"},"message":"@donpdonp Works for me. Please let us know if you find any other Gentoo bugs in the future!","files":null}]}