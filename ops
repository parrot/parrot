{"version":1,"ops":[{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1246648010,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MDU=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502805"},"message":"1256 byte attachment from MoC\nat http://trac.parrot.org/parrot/raw-attachment/ticket/806/ErrorLog.txt\n\n```C:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\u003eperl t/pmc/os.t\n1..16\nok 1 - Test cwd\nok 2 - Test chdir\nok 3 - Test mkdir\nok 4 - Test rm call in a directory\nok 5 - Test that rm removed the directory\nok 6 - Test OS.stat\nnot ok 7 - Test OS.readdir\n\n# Failed test 'Test OS.readdir'\n\n# at t/pmc/os.t line 270.\n\n# Exited with error code: 255\n\n# Received:\n\n#\n\n# Expected:\n\n# . .. .svn book compiler_faq.pod configuration.pod debug.pod debugger.pod dev embed.pod extend.pod faq.pod gettingstarted.pod glossary.pod imcc intro.pod jit.pod Makefile memory_internals.pod multidispatch.pod native_exec.pod ops optable.pod overview.pod packfile-c.pod parrot.pod parrotbyte.pod parrothist.pod pct pdds pmc pmc.pod pmc2c.pod porting_intro.pod project req resources running.pod stability.pod submissions.pod tests.pod user vtables.pod\n\n#\nok 8 - Test OS.rename\nok 9 # skip lstat not on Win32\nok 10 - Test rm call in a file\nok 11 - Test that rm removed file\nok 12 # skip Symlinks not available under Windows\nok 13 # skip Symlinks not available under Windows\nok 14 # skip Hardlinks to files not possible on Windows\nok 15 # skip Hardlinks to files not possible on Windows\nok 16 # skip Hardlinks to files not possible on Windows\n\n# Looks like you failed 1 test of 16.```","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1246650478,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MDY=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502806"},"message":"4203 byte attachment from MoC\nat http://trac.parrot.org/parrot/raw-attachment/ticket/806/Procmon_Logfile.xml\n\n```\u003c?xml version=\"1.0\"?\u003e\n\u003cprocmon\u003e\n\u003ceventlist\u003e\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7984175\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eCreateFile\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eIS DIRECTORY\u003c/Result\u003e\n\u003cDetail\u003eDesired Access: Read Attributes, Synchronize, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: n/a, ShareMode: None, AllocationSize: n/a\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7986690\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eQueryDirectory\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003eFilter: docs, 1: docs\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7990824\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eCreateFile\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003eDesired Access: Read Data/List Directory, Synchronize, Disposition: Open, Options: Directory, Synchronous IO Non-Alert, Attributes: n/a, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7992132\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eQueryDirectory\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs*\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003eFilter: *, 1: .\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7993545\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eQueryDirectory\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003e0: .., 1: .svn, 2: book, 3: compiler_faq.pod, 4: configuration.pod, 5: debug.pod, 6: debugger.pod, 7: dev, 8: embed.pod, 9: extend.pod, 10: faq.pod, 11: gettingstarted.pod, 12: glossary.pod, 13: imcc, 14: intro.pod, 15: jit.pod, 16: Makefile, 17: memory_internals.pod, 18: multidispatch.pod, 19: native_exec.pod, 20: ops, 21: optable.pod, 22: overview.pod, 23: packfile-c.pod, 24: parrot.pod, 25: parrotbyte.pod, 26: parrothist.pod, 27: pct, 28: pdds, 29: pmc, 30: pmc.pod, 31: pmc2c.pod, 32: porting_intro.pod, 33: project, 34: req\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7995649\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eQueryDirectory\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003e0: resources, 1: running.pod, 2: stability.pod, 3: submissions.pod, 4: tests.pod, 5: user, 6: vtables.pod\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7997110\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eQueryDirectory\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eNO MORE FILES\u003c/Result\u003e\n\u003cDetail\u003e\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e80\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,7999040\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eperl.exe\u003c/Process_Name\u003e\n\u003cPID\u003e744\u003c/PID\u003e\n\u003cOperation\u003eCloseFile\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003e\u003c/Detail\u003e\n\u003c/event\u003e\n\n\u003cevent\u003e\n\u003cProcessIndex\u003e86\u003c/ProcessIndex\u003e\n\u003cSequence\u003en/a\u003c/Sequence\u003e\n\u003cTime_of_Day\u003e19:24:41,8919708\u003c/Time_of_Day\u003e\n\u003cProcess_Name\u003eparrot.exe\u003c/Process_Name\u003e\n\u003cPID\u003e500\u003c/PID\u003e\n\u003cOperation\u003eQueryOpen\u003c/Operation\u003e\n\u003cPath\u003eC:\\GnuTools\\MSYS\\home\\MoC\\parrot-svn\\docs\u003c/Path\u003e\n\u003cResult\u003eSUCCESS\u003c/Result\u003e\n\u003cDetail\u003eCreationTime: 19.06.2009 20:20:22, LastAccessTime: 03.07.2009 19:24:41, LastWriteTime: 03.07.2009 19:14:52, ChangeTime: 03.07.2009 19:14:52, AllocationSize: 0, EndOfFile: 0, FileAttributes: D\u003c/Detail\u003e\n\u003c/event\u003e\n\u003c/eventlist\u003e\n\u003c/procmon\u003e```","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1246668437,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MDc=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502807"},"message":"Trac commenter: MoC\n\n\u003cp\u003e\nI also attached a logfile created with Process Monitor which displays all queries made to the docs directory. Seems like Parrot just opens the directory and stops, while Perl reads it correctly.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"090edab1282a45bd2d4c0e11ceffc2d7454f9e77"},"timestamp":1246670253,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MDg=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502808"},"message":"\u003cp\u003e\nMy current Strawberry Perl 5.10.0.3 is built (and ship) with gcc 3.4.5\n\u003c/p\u003e\n\n\u003cp\u003e\nI build Parrot with gcc 3.4.5 and the readdir test is OK.\n\u003c/p\u003e\n\n\u003cp\u003e\nI think that the problem is in the MinGW libc : not the same behaviour between 3.4.5 and 4.4.0\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1246671473,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MDk=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502809"},"message":"Trac commenter: MoC\n\n\u003cp\u003e\nTo make sure I compiled the following snippet:\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e#include \u0026lt;dirent.h\u0026gt;\n#include \u0026lt;stdio.h\u0026gt;\nint main (int argc, char \\* argv[])\n{\n    struct dirent *dirent;\n    DIR *dir = opendir(\"SomeDirectoryThatExists\");\n    while ((dirent = readdir(dir)) != NULL) {\n        printf(\"%s \", dirent-\u0026gt;d_name);\n    }\n    closedir(dir);\n}\n\u003c/pre\u003e\u003cp\u003e\nWhich works as expected. Could it be that the while-loop in the pmc code is not reached at all?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"090edab1282a45bd2d4c0e11ceffc2d7454f9e77"},"timestamp":1246675827,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MTA=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502810"},"message":"\u003cp\u003e\nCould you try to build Parrot without --optimize ?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1246677896,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MTE=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502811"},"message":"Trac commenter: MoC\n\n\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/806#comment:4\" title=\"Comment 4 for Ticket #806\"\u003efperrad\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Could you try to build Parrot without --optimize ?\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nSeems like it works without \u003ci\u003e--optimize\u003c/i\u003e: \u003ca   href=\"http://smolder.plusthree.com/app/public_projects/report_details/24456\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://smolder.plusthree.com/app/public_projects/report_details/24456\u003c/a\u003e.\nIs there a known bug with \u003ci\u003e--optimize\u003c/i\u003e or was that just a guess?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"090edab1282a45bd2d4c0e11ceffc2d7454f9e77"},"timestamp":1246680910,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MTI=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502812"},"message":"\u003cp\u003e\nConfigure.pl with --optimize   ==\u0026gt; gcc with -O2\n\u003c/p\u003e\n\n\u003cp\u003e\n-O2 -s works fine with MinGW gcc-3.4.5 (see \u003ca   href=\"http://smolder.plusthree.com/app/public_projects/report_details/24452\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://smolder.plusthree.com/app/public_projects/report_details/24452\u003c/a\u003e)\n\u003c/p\u003e\n\n\u003cp\u003e\nIt seems to be a bug of MinGW gcc-4.4.0 when -O2 is enabled \u003cbr /\u003e\nor -O2 always needs -s like with gcc-3.4.5\n\u003c/p\u003e\n\n\u003cp\u003e\nMinGW gcc-4.4.0 was released on 22 June 2009, so it's very recent.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1246699569,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MTM=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502813"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/806#comment:6\" title=\"Comment 6 for Ticket #806\"\u003efperrad\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Configure.pl with --optimize   ==\u0026gt; gcc with -O2\n -O2 -s works fine with MinGW gcc-3.4.5 (see \u003ca   href=\"http://smolder.plusthree.com/app/public_projects/report_details/24452\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://smolder.plusthree.com/app/public_projects/report_details/24452\u003c/a\u003e)\n It seems to be a bug of MinGW gcc-4.4.0 when -O2 is enabled \u003cbr /\u003e\n or -O2 always needs -s like with gcc-3.4.5\n MinGW gcc-4.4.0 was released on 22 June 2009, so it's very recent.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nShould we consider adding data like this to the Win32 hints file?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"090edab1282a45bd2d4c0e11ceffc2d7454f9e77"},"timestamp":1247069788,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MTQ=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502814"},"message":"\u003cp\u003e\nSame problem with --optimize=-O1\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1261211818,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4MTU=","github-url":"https://github.com/parrot/parrot/issues/341#issuecomment-3502815"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/806#comment:7\" title=\"Comment 7 for Ticket #806\"\u003ejkeenan\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Replying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/806#comment:6\" title=\"Comment 6 for Ticket #806\"\u003efperrad\u003c/a\u003e:\n\u003c/p\u003e\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Configure.pl with --optimize   ==\u0026gt; gcc with -O2\n -O2 -s works fine with MinGW gcc-3.4.5 (see \u003ca   href=\"http://smolder.plusthree.com/app/public_projects/report_details/24452\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://smolder.plusthree.com/app/public_projects/report_details/24452\u003c/a\u003e)\n It seems to be a bug of MinGW gcc-4.4.0 when -O2 is enabled \u003cbr /\u003e\n or -O2 always needs -s like with gcc-3.4.5\n MinGW gcc-4.4.0 was released on 22 June 2009, so it's very recent.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\n Should we consider adding data like this to the Win32 hints file?\n\u003c/p\u003e\n\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nCan anyone respond?\n\u003c/p\u003e","files":null}]}