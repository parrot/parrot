{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1268987801,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM5NjI=","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-3503962"},"message":"\u003cp\u003e\nReplying to \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/1516\" title=\"feature: Allow a build directory to be specified to Configure.pl (new)\"\u003edukeleto\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n To facilitate cross-compiling environments, it would be nice if we had something like\n \u003ctt\u003e perl Configure.pl --builddir=/foo/build \u003c/tt\u003e\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nAt coke's suggestion, I created a branch for this purpose:  \u003ca   href=\"https://svn.parrot.org/parrot/branches/tt1516_builddir_option/\"\u003e\u003cspan class=\"icon\"\u003eÂ \u003c/span\u003ehttps://svn.parrot.org/parrot/branches/tt1516_builddir_option/\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\nI committed one patch to this branch (r45050) -- a patch which, I should caution, DOES NOT WORK.  (The build fails at miniparrot because it can't locate \u003ctt\u003e-lparrot\u003c/tt\u003e.)  So it illustrates that we need to figure out how to get all the linking paths to work right.\n\u003c/p\u003e\n\n\u003cp\u003e\nPeople working on this ticket should also \u003ctt\u003eperldoc Configure.pl\u003c/tt\u003e and read up on file-based configuration.\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"bd4ae1c77edc81aa7bb32abf5c1babd84abdff35"},"timestamp":1271754227,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM5NjM=","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-3503963"},"message":"1201 byte attachment from gerd\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1516/patch.root.in\n\n```\nIndex: config/gen/makefiles/root.in\n===================================================================\n--- config/gen/makefiles/root.in    (Revision 45754)\n+++ config/gen/makefiles/root.in    (Arbeitskopie)\n@@ -222,7 +222,7 @@\n    runtime/parrot/include/pmctypes.pasm \\\n\n GEN_PM_INCLUDES = \\\n-   lib/Parrot/Pmc2c/PCCMETHOD_BITS.pm\n+   $(BUILD_DIR)/lib/Parrot/Pmc2c/PCCMETHOD_BITS.pm\n\n CONFIGURE_GENERATED_FILES = \\\n     $(GEN_CONFIGS) \\\n@@ -691,7 +691,7 @@\n .pmc.c : # suffix rule (limited support)\n    $(PMC2CC) $\u003c\n\n-vtable.dump : src/vtable.tbl lib/Parrot/Pmc2c/PCCMETHOD_BITS.pm\n+vtable.dump : src/vtable.tbl $(BUILD_DIR)/lib/Parrot/Pmc2c/PCCMETHOD_BITS.pm\n    $(PMC2CV)\n\n # This is a listing of all targets meant to be called by users\n@@ -1082,7 +1082,8 @@\n    $(PERL) $(H2INC) $(INC_DIR)/enums.h $@\n runtime/parrot/include/call_bits.pasm : $(INC_DIR)/enums.h $(H2INC)\n    $(PERL) $(H2INC) $(INC_DIR)/enums.h $@\n-lib/Parrot/Pmc2c/PCCMETHOD_BITS.pm : $(INC_DIR)/enums.h $(H2INC)\n+$(BUILD_DIR)/lib/Parrot/Pmc2c/PCCMETHOD_BITS.pm : $(INC_DIR)/enums.h $(H2INC)\n+   $(MKPATH) $(BUILD_DIR)/lib/Parrot/Pmc2c\n    $(PERL) $(H2INC) $(INC_DIR)/enums.h $@\n\n runtime/parrot/include/libpaths.pasm : $(INC_DIR)/library.h $(H2INC)\n```","files":null},{"type":3,"author":{"id":"bd4ae1c77edc81aa7bb32abf5c1babd84abdff35"},"timestamp":1271772227,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM5NjQ=","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-3503964"},"message":"\u003cp\u003e\nreally only a little first step\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"bd4ae1c77edc81aa7bb32abf5c1babd84abdff35"},"timestamp":1271772348,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM5NjU=","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-3503965"},"message":"\u003cp\u003e\nIf I understand this, then the \"builddir\" option is to be able to specify a builddir that is different from the source directory and all generated files during the \"make\" will be written in that directory.\n\u003c/p\u003e\n\n\u003cp\u003e\nSo may be: sourcedir != builddir != installdir\n\u003c/p\u003e\n\n\u003cp\u003e\nFor building gcc you have to change the current directory to the build directory before executing make.\n\u003c/p\u003e\n\n\u003cp\u003e\nI add a patch for that I think would be the first step after enable the builddir option. It looks to be a terrible work to get the builddir option working.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1271880514,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM5NjY=","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-3503966"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1516#comment:4\" title=\"Comment 4 for Ticket #1516\"\u003egerd\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n For building gcc you have to change the current directory to the build directory before executing make.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nThis is what perl 5 does also.  In fact for perl 5, we actually just make a symlink tree so that most of the build process didn't have to be altered.  Thus you run something like\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e    mkdir build\n    cd build\n    sh ../perl-5.12.0/Configure -Dmksymlinks [... other options]\n    make\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1284793455,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM5Njc=","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-3503967"},"message":"\u003cp\u003e\ndukeleto,\n\u003c/p\u003e\n\n\u003cp\u003e\nCould you comment on what steps we need to take next on this ticket?\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1357845338,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEyMTEzNTcx","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-12113571"},"message":"My usual approach for clean builddirs is creating a tree of symlinks via lndir.\n\n```\nmake -s realclean\npwd=`pwd`\nmkdir ../build\ncd ../build\nlndir $pwd\nperl Configure.pl\n```","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1357854790,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEyMTIwNzUz","github-url":"https://github.com/parrot/parrot/issues/674#issuecomment-12120753"},"message":"@rurban I originally created this ticket because I thought it would help us in cross-compiling. If we can create a BitBake recipe without this, then it is less important than #894","files":null}]}