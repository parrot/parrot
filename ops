{"version":1,"ops":[{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1354754780,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMDY4NDk4","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-11068498"},"message":"On Dec 5, 2012, at 2:08 PM, James E Keenan notifications@github.com wrote:\n\n\u003e Observed today while running 'make test' at 4aee736 on Darwin/x86_64. Here is an excerpt from by test log:\n\u003e \n\u003e no ICU lib loaded\n\nThanks, good catch!\nWe need to skip this test when ICU is not available.\n\n\u003e ext/nqp-rx/t/nqp/46-charspec.t .............. \n\u003e Dubious, test returned 1 (wstat 256, 0x100)\n\u003e No subtests run \n\u003e \n\u003e ext/nqp-rx/t/nqp/46-charspec.t            (Wstat: 256 Tests: 0 Failed: 0)\n\u003e   Non-zero exit status: 1\n\u003e   Parse errors: No plan found in TAP output","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354764084,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMDcxNzM2","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-11071736"},"message":"On 12/5/12 7:46 PM, Reini Urban wrote:\n\n\u003e On Dec 5, 2012, at 2:08 PM, James E Keenannotifications@github.com  wrote:\n\u003e \n\u003e \u003e Observed today while running 'make test' at 4aee736 on Darwin/x86_64. Here is an excerpt from by test log:\n\u003e \u003e \n\u003e \u003e no ICU lib loaded\n\u003e \n\u003e Thanks, good catch!\n\u003e We need to skip this test when ICU is not available.\n\nThat sounds correct.  We have had to account for non-availability of ICU \nseveral times in the past.\n\nTomorrow I will try to confirm the fix on the machine where I first \nobserved it.","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354832824,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMTA4OTUx","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-11108951"},"message":"I mistakenly thought a fix already had been committed, but that was not so.  So there was nothing for me to check today.\n\nThe file in question is written in parrot-nqp.  I don't know the syntax for \"skip all tests unless $PConfig{has_icu}\" in that language, and I couldn't find any prior art in other files in the distro written in parrot-nqp.\n\nIf anyone knows how to do that, please come up to the blackboard and show us. :-)\n\nThank you very much.\nJim Keenan","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1354840934,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMTEzMjU3","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-11113257"},"message":"I've only learned recently that nqp and nqp-rx create uncatchable\ncompile-time errors when icu is not present and the src code contains\n\\cxx charnames. There's no nqp BEGIN block, only a INIT block.\n\nNo way to skip the test inside the test.\nSo we must skip one test from the suite if parrot has no icu, in all\nthree nqp repos.\nparrot/ext/nqp-rx, perl6/nqp and perl6/nqp-rx\n\nThis ticket belongs to perl6/nqp, since this is the final upstream repo for the ext/nqp-rx tests, \nwhich are kept in synch with perl6/nqp-rx.\n\n```\nno ICU lib loaded\ncurrent instr.: 'parrot;HLL;Actions;charname' pc 21203 (ext/nqp-rx/src/stage0/HLL-s0.pir:7328)\ncalled from Sub 'parrot;Regex;Cursor;!reduce' pc 1238 (ext/nqp-rx/src/stage0/Regex-s0.pir:744)\ncalled from Sub 'parrot;Regex;Cursor;!cursor_pass' pc 692 (ext/nqp-rx/src/stage0/Regex-s0.pir:414)\n```\n\n...\n\nHLL;Actions;charname calls find_codepoint at parse-time which fails without ICU.","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354851841,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMTE4MTAx","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-11118101"},"message":"On 12/6/12 7:42 PM, Reini Urban wrote:\n\n\u003e I've only learned recently that nqp and nqp-rx create uncatchable\n\u003e compile-time errors when icu is not present and the src code contains\n\u003e \\cxx charnames. There's no nqp BEGIN block, only a INIT block.\n\u003e \n\u003e No way to skip the test inside the test.\n\u003e So we must skip one test from the suite if parrot has no icu, in all\n\u003e three nqp repos.\n\u003e parrot/ext/nqp-rx, perl6/nqp and perl6/nqp-rx\n\u003e \n\u003e This ticket belongs to perl6/nqp, since this is the final upstream repo for the ext/nqp-rx tests,\n\u003e which are kept in synch with perl6/nqp-rx.\n\nWould it be possible to cheat by changing the test file to a Perl 5 \ntest, then wrapping each parrot-nqp ok() call inside a 'system' call, \nthen checking for 0 return value?\n\n\u003e ---\n\u003e \n\u003e Reply to this email directly or view it on GitHub:\n\u003e https://github.com/parrot/parrot/issues/874#issuecomment-11113257","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1354852976,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMTE4NDA4","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-11118408"},"message":"On Dec 6, 2012, at 9:44 PM, James E Keenan notifications@github.com wrote:\n\n\u003e On 12/6/12 7:42 PM, Reini Urban wrote:\n\u003e \n\u003e \u003e I've only learned recently that nqp and nqp-rx create uncatchable\n\u003e \u003e compile-time errors when icu is not present and the src code contains\n\u003e \u003e \\cxx charnames. There's no nqp BEGIN block, only a INIT block.\n\u003e \u003e \n\u003e \u003e No way to skip the test inside the test.\n\u003e \u003e So we must skip one test from the suite if parrot has no icu, in all\n\u003e \u003e three nqp repos.\n\u003e \u003e parrot/ext/nqp-rx, perl6/nqp and perl6/nqp-rx\n\u003e \u003e \n\u003e \u003e This ticket belongs to perl6/nqp, since this is the final upstream repo for the ext/nqp-rx tests,\n\u003e \u003e which are kept in synch with perl6/nqp-rx.\n\u003e \n\u003e Would it be possible to cheat by changing the test file to a Perl 5 \n\u003e test, then wrapping each parrot-nqp ok() call inside a 'system' call, \n\u003e then checking for 0 return value?\n\nThis or fix nqp to avoid calling find_codepoint when icu is not configured.\nI'm almost there.","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1364170167,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE1MzcyNzEw","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-15372710"},"message":"@rurban are you still working on this?","files":null},{"type":2,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1416749223,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTk3MzEzNzgw"},"title":"ext/nqp-rx/t/nqp/46-charspec.t fails in find_codepoint without icu","was":"ext/nqp-rx/t/nqp/46-charspec.t fails in find_codepoint without icu"},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1416750026,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0MTE4MjAx","github-url":"https://github.com/parrot/parrot/issues/874#issuecomment-64118201"},"message":"fix confirmed in https://github.com/perl6/nqp/issues/151\nand tested --without-icu ok:\n\n```\next/nqp-rx/t/nqp/46-charspec.t ............. ok\next/nqp-rx/t/nqp/47-loop-control.t ......... ok\next/nqp-rx/t/nqp/48-closure.t .............. ok\next/nqp-rx/t/nqp/49-regex-interpolation.t .. ok\next/nqp-rx/t/nqp/50-regex.t ................ ok\next/nqp-rx/t/nqp/51-multi.t ................ ok\next/nqp-rx/t/nqp/52-vtable.t ............... ok\next/nqp-rx/t/nqp/67-threads.t .............. ok\nAll tests successful.\n```","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1416750026,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTk3MzE0ODMx"},"status":2}]}