{"version":1,"ops":[{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1236540222,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3OTA=","github-url":"https://github.com/parrot/parrot/issues/331#issuecomment-3502790"},"message":"\u003cp\u003e\nr37202 clarified and changed the tricky cygwin logic:\n\u003c/p\u003e\n\n\u003cp\u003e\nNow we have a new limitation and DISPLAY is ignored.\n\u003c/p\u003e\n\n\u003cul\u003e\u003cli\u003eif /usr/include/GL is found then freeglut is tried,\n\u003c/li\u003e\u003cli\u003eelse w32api native GLUT is tried.\n\u003c/li\u003e\u003cli\u003eyou must uninstall freeglut and its devel packages to use native GLUT\n\u003c/li\u003e\u003c/ul\u003e\u003cp\u003e\nThis ticket should be used to detangle the headers from the libs. It should be possible to use native w32api GLUT with installed freeglut.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1237317384,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3OTE=","github-url":"https://github.com/parrot/parrot/issues/331#issuecomment-3502791"},"message":"1972 byte attachment from rurban\nat http://trac.parrot.org/parrot/raw-attachment/ticket/253/opengl.t\n\n``` #!parrot\n# Copyright (C) 2009, Parrot Foundation.\n# $Id$\n\n=head1 NAME\n\nt/library/opengl.t  -- OpenGL Tests\n\n=head1 SYNOPSIS\n\n  ./parrot t/library/opengl.t\n\n=head1 DESCRIPTION\n\nTest Parrot's opengl interface.\n\n=cut\n\n.const int TESTS = 7\n\n.sub 'main' :main\n    .param pmc argv\n\n    load_bytecode 'library/Test/More.pbc'\n    .local pmc exports, curr_namespace, test_namespace\n    curr_namespace = get_namespace\n    test_namespace = get_namespace [ 'Test'; 'More' ]\n    exports        = split ' ', 'plan diag ok nok is is_deeply like isa_ok skip isnt todo'\n\n    test_namespace.'export_to'(curr_namespace, exports)\n\n    load_bytecode \"library/config.pbc\"\n    .local pmc conf_hash\n    conf_hash = _config()\n    $S1 = conf_hash['has_opengl']\n    if $S1 == '1' goto HAS_OPENGL\n    skip(TESTS, \"no opengl\")\n    goto END\n\nHAS_OPENGL:\n    plan(TESTS)\n\n    .include 'opengl_defines.pasm'\n    load_bytecode 'OpenGL.pbc'\n    'ok'(1, 'loaded OpenGL.pbc')\n\n    load_bytecode 'library/NCI/call_toolkit_init.pbc'\n    'ok'(2, 'loaded call_toolkit_init.pbc')\n\n    .local pmc import_gl\n    import_gl = get_global ['OpenGL'], '_export_all_functions'\n    import_gl()\n    'ok'(3, '_export_all_functions')\n\n    glutInitWindowSize(20, 20)\n    'ok'(4, 'glutInitWindowSize')\n\n    # Initialize GLUT\n    .local pmc argc\n    .local int count\n    count = argv\n    argc  = new 'Integer'\n    argc  = count\n    glutInit(argc, argv)\n    'ok'(5, 'glutInit')\n\n    # Set display mode, create GLUT window, return window handle\n    .local int mode\n    mode    = .GLUT_DOUBLE | .GLUT_RGBA\n    mode   |= .GLUT_DEPTH\n    mode   |= .GLUT_STENCIL\n    glutInitDisplayMode(mode)\n    'ok'(6, 'glutInitDisplayMode')\n\n    .local int window_id\n    window_id = glutCreateWindow('test')\n    if window_id goto OK_7\n    'nok'(7, 'glutCreateWindow')\n    goto END\nOK_7: \n    'ok'(7, 'glutCreateWindow')\n\nEND:\n.end\n\n# Local Variables:\n#   mode: pir\n#   fill-column: 100\n# End:\n# vim: expandtab shiftwidth=4 ft=pir:\n```","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1237335232,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3OTI=","github-url":"https://github.com/parrot/parrot/issues/331#issuecomment-3502792"},"message":"\u003cp\u003e\nWhile working to sanify opengl on cygwin (which is currently the only platform whuich provides two possible library sets to choose) I created the attached test.\n\u003c/p\u003e\n\n\u003cp\u003e\nThe loadlib initialization needs also to reflect the library set, so we have to take care of:\n\u003c/p\u003e\n\n\u003col\u003e\u003cli\u003elibs\n\u003c/li\u003e\u003cli\u003ematching headers\n\u003c/li\u003e\u003cli\u003ematching so/dll's\n\u003c/li\u003e\u003c/ol\u003e","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1237335384,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3OTM=","github-url":"https://github.com/parrot/parrot/issues/331#issuecomment-3502793"},"message":"\u003cp\u003e\nfails for a failing cygwin config \"freeglut ( ÿý): failed to open display ':0.0'\"\n\u003c/p\u003e","files":null}]}