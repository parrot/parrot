{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1258630207,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MTY=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502716"},"message":"\u003cp\u003e\nReplying to \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/1309\" title=\"bug: perl Configure.pl finds icu but doesn't set it up (new)\"\u003egetpsimon\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cp\u003e\nTo assist in diagnosing this problem:\n\u003c/p\u003e\n\n\u003cp\u003e\n1.  Could you provide information on your OS, platform, etc.?  Also, indicate where you expect to find key ICU files.\n\u003c/p\u003e\n\n\u003cp\u003e\n2.  Could you re-run configuration with verbosity on for auto::icu, and then run the corresponding step test?  The following should work:\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003eperl Configure.pl --verbose-step=auto::icu 2\u0026gt;\u0026amp;1 | tee auto.icu.verbose.txt \u0026amp;\u0026amp; prove -v t/steps/auto/icu-01.t 2\u0026gt;\u0026amp;1 | tee auto.icu.steptest.txt\n\u003c/pre\u003e\u003cp\u003e\nIf you can do that, please add the two output files as Attachments.\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1258630628,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MTc=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502717"},"message":"\u003cp\u003e\nReference only:  Another ICU-related ticket is here:  TT \u003ca class=\"closed ticket\" href=\"http://trac.parrot.org/parrot/ticket/673\" title=\"bug: Parrot 1.1.0 build on OS X with Fink ICU package (closed: wontfix)\"\u003e#673\u003c/a\u003e.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1258665439,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MTg=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502718"},"message":"\u003cpre class=\"wiki\"\u003eOn Thu, 19 Nov 2009, Parrot wrote:\n\u0026gt; -----------------------+----------------------------------------------------\n\u0026gt;  perl Configure.pl finds icu during config but doesn't set you up to use\n\u0026gt;  it.\n\u0026gt;\n\u0026gt;  perl Configure.pl says:\n\u0026gt;  ...\n\u0026gt;  auto::icu -          Is ICU\n\u0026gt;  installed....................................yes.\n\u0026gt;\n\u0026gt;  But during make, the following error is reported:\n\u0026gt;  Invoking Parrot to generate runtime/parrot/include/config.fpmc --cross\n\u0026gt;  your fingers\n\u0026gt;  ./miniparrot config_lib.pasm \u0026gt; runtime/parrot/include/config.fpmc\n\u0026gt;  ./miniparrot: error while loading shared libraries: libicuuc.so.42: cannot\n\u0026gt;  open shared object file: No such file or directory\n\u0026gt;  gmake: *** [runtime/parrot/include/config.fpmc] Error 127\nGenerally speaking, on some Linux systems, this sort of thing can happen\nif you have the runtime-version of a library installed but not the\n\"development\" version.   What do you actually have installed for icu?\nOn a Debian system, for example, you can find out by running:\n    dpkg --get-selections | grep icu\nOther distributions probably have similar commands, but I don't know them.\n--\n    Andy Dougherty      doughera@lafayette.edu\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1258758327,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MTk=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502719"},"message":"7840 byte attachment from getpsimon\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1309/auto.icu.verbose.txt\n\n```Parrot Version 1.8.0 Configure 2.0\nCopyright (C) 2001-2009, Parrot Foundation.\n\nHello, I'm Configure. My job is to poke and prod your system to figure out\nhow to build Parrot. The process is completely automated, unless you passed in\nthe `--ask' flag on the command line, in which case I'll prompt you for a few\npieces of info.\n\nSince you're running this program, you obviously have Perl 5--I'll be pulling\nsome defaults from its configuration.\n\ninit::manifest -      Check MANIFEST.....................................done.\ninit::defaults -      Set Configure's default values.....................done.\ninit::install -       Set up installation paths..........................done.\ninit::hints -         Load platform and local hints files................done.\ninit::headers -       Find header files distributed with Parrot..........done.\ninter::progs -        Determine what C compiler and linker to use........done.\ninter::make -         Is make installed...................................yes.\ninter::lex -          Is lex installed................................skipped.\ninter::yacc -         Is yacc installed...............................skipped.\nauto::gcc -           Is your C compiler actually gcc................yes, 4.3.\nauto::glibc -         Is GNU libc installed...............................yes.\nauto::backtrace -     Does libc have the backtrace\\* functions.............yes.\nauto::msvc -          Is your C compiler actually Visual C++..........skipped.\nauto::attributes -    Detect compiler attributes.........................done.\nauto::warnings -      Detect supported compiler warnings..........set for gcc.\ninit::optimize -      Enable optimization..................................no.\ninter::shlibs -       Determine flags for building shared libraries.....-fPIC.\ninter::libparrot -    Should parrot link against a shared library.........yes.\ninter::charset -      Which charset files should be compiled in..........done.\ninter::encoding -     Which encoding files should be compiled in.........done.\ninter::types -        What types should Parrot use.......................done.\nauto::ops -           Which opcode files should be compiled in...........done.\nauto::pmc -           Which pmc files should be compiled in..............done.\nauto::alignptrs -     Determine your minimum pointer alignment........ 1 byte.\nauto::headers -       Probe for C headers................................done.\nauto::sizes -         Determine some sizes...............................done.\nauto::byteorder -     Compute native byteorder for wordsize.....little-endian.\nauto::va_ptr -        Test the type of va_ptr........................register.\nauto::format -        What formats should be used for sprintf............done.\nauto::isreg -         Does your C library have a working S_ISREG..........yes.\nauto::arch -          Determine CPU architecture and OS..................done.\nauto::jit -           Determine JIT capability.............................no.\nauto::frames -        Determine call frame building capability.............no.\nauto::cpu -           Generate CPU specific stuff........................done.\nauto::cgoto -         Does your compiler support computed goto............yes.\nauto::inline -        Does your compiler support inline...................yes.\nauto::gc -            Determine allocator to use.........................done.\nauto::memalign -      Does your C library support memalign................yes.\nauto::signal -        Determine some signal stuff........................done.\nauto::socklen_t -     Determine whether there is socklen_t................yes.\nauto::neg_0 -         Determine whether negative zero can be printed......yes.\nauto::env -           Does your C library have setenv / unsetenv.........both.\nauto::thread -        Does your system has thread.........................yes.\nauto::gmp -           Does your platform support GMP.......................no.\nauto::readline -      Does your platform support readline..................no.\nauto::gdbm -          Does your platform support gdbm......................no.\nauto::pcre -          Does your platform support pcre....................done.\nauto::opengl -        Does your platform support OpenGL....................no.\nauto::crypto -        Does your platform support crypto....................no.\nauto::gettext -       Does your configuration include gettext.............yes.\nauto::snprintf -      Test snprintf......................................done.\nauto::perldoc -       Is perldoc installed.................................no.\nauto::pod2man -       Is pod2man installed................................yes.\nauto::ctags -         Is (exuberant) ctags installed.......................no.\nauto::revision -      Determine Parrot's revision........................done.\nauto::icu -           Is ICU installed...\nDiscovered icu-config --exists returns 0\nicu-config found... good!\nTrying icu-config with '--ldflags'\nicushared:  captured  -lpthread -lm   -L/usr/local/lib -licui18n -licuuc -licudata  -lpthread -lm   \n\nFor icushared, found  -lpthread -lm   -L/usr/local/lib  -licuuc -licudata  -lpthread -lm    and 0\nTrying icu-config with '--prefix'\nicuheaders:  captured /usr/local\n\nFor icuheaders, found /usr/local/include and 0\nicuconfig: icu-config\nicushared=' -lpthread -lm   -L/usr/local/lib  -licuuc -licudata  -lpthread -lm   '\nheaders='/usr/local/include'\ncc -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -falign-functions=16 -fvisibility=hidden -funit-at-a-time -maccumulate-outgoing-args -W -Wall -Waggregate-return -Wcast-align -Wcast-qual -Wchar-subscripts -Wcomment -Wdisabled-optimization -Wendif-labels -Wextra -Wformat -Wformat-extra-args -Wformat-nonliteral -Wformat-security -Wformat-y2k -Wimplicit -Wimport -Winit-self -Winline -Winvalid-pch -Wlogical-op -Wmissing-braces -Wmissing-field-initializers -Wno-missing-format-attribute -Wmissing-include-dirs -Wpacked -Wparentheses -Wpointer-arith -Wreturn-type -Wsequence-point -Wno-shadow -Wsign-compare -Wstrict-aliasing -Wstrict-aliasing=2 -Wswitch -Wswitch-default -Wtrigraphs -Wundef -Wunknown-pragmas -Wno-unused -Wvariadic-macros -Wwrite-strings -Wbad-function-cast -Wc++-compat -Wdeclaration-after-statement -Werror=declaration-after-statement -Wimplicit-function-declaration -Wimplicit-int -Wmain -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wnonnull -DHAS_GETTEXT  -I./include -c test_16039.c\ncc  -L/usr/local/lib -Wl,-E test_16039.o  -o test_16039  -ldl -lm -lpthread -lcrypt -lrt \n./test_16039\nunicode/ucnv.h OK\nYour compiler found the icu headers... good!\n\nSetting Configuration Data:\n(\n    verbose =\u003e undef,\n);\n\n```\n                  Is ICU installed....................................yes.\n```\n\ngen::config_h -       Generate C headers.................................done.\ngen::core_pmcs -      Generate core pmc list.............................done.\ngen::crypto -         Generate Digest PMC files.......................skipped.\ngen::parrot_include - Generate runtime/parrot/include....................done.\ngen::opengl -         Generating OpenGL bindings......................skipped.\ngen::call_list -      Generate NCI signature list........................done.\ngen::makefiles -      Generate makefiles and other build files...........done.\ngen::platform -       Move platform files into place.....................done.\ngen::config_pm -      Record configuration data for later retrieval......done.\nOkay, we're done!\n\nYou can now use `make' to build your Parrot.\nAfter that, you can use`make test' to run the test suite.\n\nHappy Hacking,\n        The Parrot Team\n\n```\n```","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1258758607,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjA=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502720"},"message":"5915 byte attachment from getpsimon\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1309/auto.icu.steptest.txt\n\n``` t/steps/auto/icu-01....1..136\nok 1 - use config::init::defaults;\nok 2 - use config::auto::icu;\nok 3 - init::defaults constructor returned defined value\nok 4 - The object isa init::defaults\nok 5 - init::defaults has description\nok 6 - init::defaults runstep() returned defined value\nok 7 - auto::icu constructor returned defined value\nok 8 - The object isa auto::icu\nok 9 - auto::icu has description\nok 10 - runstep() returned true value\nok 11 - Got expected value for 'has_icu'\nok 12 - Got expected value for 'icu_shared'\nok 13 - Got expected value for 'icu_dir'\nok 14 - Got expected result\nok 15 - Got expected value for icu-config\nok 16 - Got expected value for icu-config\nok 17 - Got expected value for icu-config\nok 18 - icu-config not found, as expected\nok 19 - Autodetection cancelled, as expected\nok 20 - Continuing to configure without ICU\nok 21 - icu-config not found, as expected\nok 22 - Autodetection cancelled, as expected\nok 23 - Continuing to configure without ICU\nok 24 - icu-config found, as expected\nok 25 - Autodetection continues, as expected\nok 26 - Continuing to try to configure with ICU\nok 27 - icu-config found, as expected\nok 28 - Autodetection continues, as expected\nok 29 - Continuing to try to configure with ICU\nok 30 - Got expected verbose output\nok 31 - icu-config unchanged, as expected\nok 32 - Autodetection still active, as expected\nok 33 - Continuing to try to configure with ICU\nok 34 - icu-config unchanged, as expected\nok 35 - Autodetection still inactive, as expected\nok 36 - Continuing to try to configure with ICU\nok 37 - Got expected verbose output\nok 38 - Got expected ld flags\nok 39 - Continuing to try to configure with ICU\nok 40 - No icushared, as expected\nok 41 - No longer trying to configure with ICU\nok 42 - icushared remains undefined, as expected\nok 43 - Continuing to try to configure with ICU\nok 44 - icuheaders path undefined, as expected\nok 45 - Continuing to try to configure with ICU\nok 46 - Got expected icuheaders path value\nok 47 - No longer trying to configure with ICU\nok 48 - Got expected icuheaders path value\nok 49 - No longer trying to configure with ICU\nok 50 - Got expected icuheaders path value\nok 51 - Continuing to try to configure with ICU\nok 52 - Not trying to configure with ICU\nok 53 - icushared undefined, as expected\nok 54 - icuheaders undefined, as expected\nok 55 - result is still empty string, as expected\nok 56 - Still trying to configure with ICU\nok 57 - icushared undefined, as expected\nok 58 - icuheaders undefined, as expected\nok 59 - result is still empty string, as expected\nok 60 - Still trying to configure with ICU\nok 61 - icushared undefined, as expected\nok 62 - icuheaders undefined, as expected\nok 63 - result is still empty string, as expected\nok 64 - Got expected die message\nok 65 - Got expected verbose output\nok 66 - Got expected verbose output\nok 67 - Got expected verbose output\nok 68 - No verbose output, as expected\nok 69 - Got expected warnings\nok 70 - Got expected warnings\nok 71 - Got expected warnings\nok 72 - Got expected verbose output\nok 73 - Got expected verbose output\nok 74 - ccflags augmented as expected\nok 75 - No verbose output, as expected\nok 76 - ccflags augmented as expected\nok 77 - Got expected value for 'has_icu'\nok 78 - Got expected value for 'icu_shared'\nok 79 - Got expected value for 'icu_dir'\nok 80 - Got expected result\nok 81 - init::defaults constructor returned defined value\nok 82 - The object isa init::defaults\nok 83 - init::defaults has description\nok 84 - auto::icu constructor returned defined value\nok 85 - The object isa auto::icu\nok 86 - auto::icu has description\nok 87 - runstep() returned true value\nok 88 - Got expected value for 'has_icu'\nok 89 - Got expected value for 'icu_shared'\nok 90 - Got expected value for 'icu_dir'\nok 91 - Got expected result\nok 92 - init::defaults constructor returned defined value\nok 93 - The object isa init::defaults\nok 94 - init::defaults has description\nok 95 - auto::icu constructor returned defined value\nok 96 - The object isa auto::icu\nok 97 - auto::icu has description\nok 98 - runstep() returned undefined value as expected\nok 99 - Got expected warnings\nok 100 - Got expected warnings\nok 101 - init::defaults constructor returned defined value\nok 102 - The object isa init::defaults\nok 103 - init::defaults has description\nok 104 - auto::icu constructor returned defined value\nok 105 - The object isa auto::icu\nok 106 - auto::icu has description\nok 107 - runstep() returned true value\nok 108 - Got expected return value: no icu-config\nok 109 - Got expected verbose output re return value\nok 110 - Got expected verbose output re inability to locate icu-config program\nok 111 - runstep() returned true value\nok 112 - Got expected return value: no icu-config\nok 113 - No verbose output captured, as expected\nok 114 - init::defaults constructor returned defined value\nok 115 - The object isa init::defaults\nok 116 - init::defaults has description\nok 117 - auto::icu constructor returned defined value\nok 118 - The object isa auto::icu\nok 119 - auto::icu has description\nok 120 - runstep() returned undefined value as expected\nok 121 - Got expected warnings\nok 122 - Got expected warnings\nok 123 - Got expected warnings\nok 124 - init::defaults constructor returned defined value\nok 125 - The object isa init::defaults\nok 126 - init::defaults has description\nok 127 - auto::icu constructor returned defined value\nok 128 - The object isa auto::icu\nok 129 - auto::icu has description\nok 130 - Got expected verbose output re --ldflags\nok 131 - Got expected verbose output re icushared\nok 132 - Got expected verbose output re icushared\nok 133 - Got expected verbose output re --prefix\nok 134 - Got expected verbose output re icuheaders\nok 135 - Got expected verbose output re icuheaders\nok 136 - Completed all tests in t/steps/auto/icu-01.t\nok\nAll tests successful.\nFiles=1, Tests=136,  1 wallclock secs ( 0.34 cusr +  0.05 csys =  0.39 CPU)\n```","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1258780356,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjE=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502721"},"message":"Trac commenter: getpsimon\n\n\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1309#comment:1\" title=\"Comment 1 for Ticket #1309\"\u003ejkeenan\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Replying to \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/1309\" title=\"bug: perl Configure.pl finds icu but doesn't set it up (new)\"\u003egetpsimon\u003c/a\u003e:\n To assist in diagnosing this problem:\n 1.  Could you provide information on your OS, platform, etc.?  Also, indicate where you expect to find key ICU files.\n 2.  Could you re-run configuration with verbosity on for auto::icu, and then run the corresponding step test?  The following should work:\n {{{\n perl Configure.pl --verbose-step=auto::icu 2\u0026gt;\u0026amp;1 | tee auto.icu.verbose.txt \u0026amp;\u0026amp; prove -v t/steps/auto/icu-01.t 2\u0026gt;\u0026amp;1 | tee auto.icu.steptest.txt\n }}}\n If you can do that, please add the two output files as Attachments.\n Thank you very much.\n kid51\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nSee attached files. I accidentally uploaded auto.icu.verbose twice. Yikes!\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1258792993,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjI=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502722"},"message":"\u003cp\u003e\nThanks for your response.\n\u003c/p\u003e\n\n\u003cp\u003e\n1. I deleted the superfluous attachment.\n\u003c/p\u003e\n\n\u003cp\u003e\n2. The output of \u003ci\u003et/steps/auto/icu-01.t\u003c/i\u003e is fine.  I compared your output of \u003ctt\u003eConfigure.pl --verbose-step=auto::icu\u003c/tt\u003e with mine on Linux/i386.  There did not appear to be significant differences.  So I think \u003ci\u003eConfigure.pl\u003c/i\u003e is doing just a good on your box as on anyone else's.\n\u003c/p\u003e\n\n\u003cp\u003e\n3. Have you had a chance to consider Andy Dougherty's hypothesis and recommendation?  It sounds plausible to me.  I'm on Debian, and I followed his suggestion:\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e$ dpkg --get-selections | grep icu\nicu-doc                                         install\nlibicu36                                        install\nlibicu36-dev                                    install\n\u003c/pre\u003e\u003cp\u003e\nNote the presence of the \u003ci\u003e-dev\u003c/i\u003e package.\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1258796496,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjM=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502723"},"message":"Trac commenter: getpsimon\n\n\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1309#comment:5\" title=\"Comment 5 for Ticket #1309\"\u003ejkeenan\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Thanks for your response.\n 1. I deleted the superfluous attachment.\n 2. The output of \u003ci\u003et/steps/auto/icu-01.t\u003c/i\u003e is fine.  I compared your output of \u003ctt\u003eConfigure.pl --verbose-step=auto::icu\u003c/tt\u003e with mine on Linux/i386.  There did not appear to be significant differences.  So I think \u003ci\u003eConfigure.pl\u003c/i\u003e is doing just a good on your box as on anyone else's.\n 3. Have you had a chance to consider Andy Dougherty's hypothesis and recommendation?  It sounds plausible to me.  I'm on Debian, and I followed his suggestion:\n {{{\n $ dpkg --get-selections | grep icu\n icu-doc                                         install\n libicu36                                        install\n libicu36-dev                                    install\n }}}\n Note the presence of the \u003ci\u003e-dev\u003c/i\u003e package.\n Thank you very much.\n kid51\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nI followed Andy's suggestion, apt-get install libicu-dev, and parrot installed flawlessly. However, parrot won't install if I build ICU from source unless I add /usr/local/lib to LD_LIBRARY_PATH.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1258862977,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjQ=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502724"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1309#comment:6\" title=\"Comment 6 for Ticket #1309\"\u003egetpsimon\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n I followed Andy's suggestion, apt-get install libicu-dev, and parrot installed flawlessly. However, parrot won't install if I build ICU from source unless I add /usr/local/lib to LD_LIBRARY_PATH.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nAh ha  -- that was the missing piece.  I didn't know you were trying to build from a locally-installed version.\n\u003c/p\u003e\n\n\u003cp\u003e\nThere's enough blame here for everyone to share some.  icu-config should perhaps have given more helpful flags (like including the approriate -rpath incantations).  If you want parrot to use libraries from a location not normally searched by ld.so, then perhaps you should be expected to make appropriate local adjustments (either by setting LD_LIBRARY_PATH or running ldconfig or whatever is appropriate on your system).  And finally, even if parrot doesn't automatically add the appropriate flags, it should at least warn you earlier in a more helpful way what is going on.\n\u003c/p\u003e\n\n\u003cp\u003e\nI see two easy possibilities for things parrot could do better:\n\u003c/p\u003e\n\n\u003cp\u003e\n1.  Parrot's icu test could actually try linking a program against -licu and running the program before deciding that the user actually has a useful icu library.\n\u003c/p\u003e\n\n\u003cp\u003e\n2.  Towards the end of the configuration process, Configure.pl could run a quick sanity check to make sure all the flags and libraries will work together, and print a helpful error message if there is any problem. (More details on how to do such a check are in RT \u003ca class=\"missing ticket\"\u003e#41168\u003c/a\u003e.)\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1305864373,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjU=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502725"},"message":"423 byte attachment from jkeenan\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1309/auto_icu.patch.txt\n\n```diff --git a/config/auto/icu.pm b/config/auto/icu.pm\nindex f78ec86..946232b 100644\n--- a/config/auto/icu.pm\n+++ b/config/auto/icu.pm\n@@ -169,6 +169,7 @@ sub runstep {\n             icuheaders      =\u003e $icuheaders,\n         },\n     );\n-    $conf-\u003edata-\u003eadd(' ', 'libs' =\u003e '-licuuc -licudata');\n   $conf-\u003ecc_clean();\n   $self-\u003eset_result(\"yes\");\n   # 5th possible return point; this is the only really successful return.\n\n```\n```","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1305882373,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3MjY=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502726"},"message":"\u003cp\u003e\nAdd two values to 'libs'\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1305882444,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3Mjc=","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-3502727"},"message":"\u003cp\u003e\nIt may be the case that once we located the appropriate libraries, we failed to add them to our \u003ctt\u003elibs\u003c/tt\u003e element in the configuration data.\n\u003c/p\u003e\n\n\u003cp\u003e\ngetpsimon, can you try the patch attached?\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1455719975,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDE4NTIzMjc4Ng==","github-url":"https://github.com/parrot/parrot/issues/307#issuecomment-185232786"},"message":"We improved the icu probes and set the proper status if failed in 2015.\nAdditionally you can use the `--icushared=` and `--icuheaders=` flags","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1455719975,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NTUzNjQwMDM4"},"status":2}]}