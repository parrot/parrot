{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1357406141,"metadata":{"github-id":"MDU6SXNzdWU5NzA3NjE0","github-url":"https://github.com/parrot/parrot/issues/915","origin":"github"},"title":"thread leaks (non-joined) reported by ThreadSanitizer","message":"The alarm thread leaks, is not joined. We might want join it, or suppress these warnings.\n\nRecent clang 3.3 (trunk 171626)\n\n```\nclang -o miniparrot frontend/parrot/main.o src/null_config.o src/longopt.o \\\n    \"-Wl,-rpath=/home/rurban/Perl/parrot/test/blib/lib\" -L\"/home/rurban/Perl/parrot/test/blib/lib\" \\\n    -lparrot -L/usr/lib  -licuuc -licudata  -lnsl -ldl -lm -lcrypt -lutil -lpthread -lrt -lgmp -lreadline  -lffi \\\n   -pie -fsanitize=undefined -fsanitize=thread -fstack-protector -L/usr/local/lib -Wl,-E    \nperl tools/build/gen_version.pl \u003eruntime/parrot/include/parrot_version.pir\n./miniparrot -Iruntime/parrot/include config_lib.pir \u003e runtime/parrot/include/config.fpmc\n==1687== WARNING: Program is run with unlimited stack size, which wouldn't work with ThreadSanitizer.\n==1687== Re-execing with stack size limited to 33554432 bytes.\n==================\nWARNING: ThreadSanitizer: thread leak (pid=1687)\n  Thread T1 (tid=1688, running) created by main thread at:\n    #0 pthread_create ??:0 (exe+0x00000002eb8a)\n    #1 Parrot_alarm_init /usr/src/parrot/test/src/alarm.c:61 (libparrot.so.4.11.0+0x000000adbd24)\n    #2 Parrot_cx_init_scheduler /usr/src/parrot/test/src/scheduler.c:73 (libparrot.so.4.11.0+0x000000da7be3)\n    #3 Parrot_interp_initialize_interpreter /usr/src/parrot/test/src/interp/api.c:337 (libparrot.so.4.11.0+0x000000be7239)\n    #4 Parrot_api_make_interpreter /usr/src/parrot/test/src/embed/api.c:155 (libparrot.so.4.11.0+0x000000a6e485)\n    #5 main /usr/src/parrot/test/frontend/parrot/main.c:178 (exe+0x000000016a84)\n\n==================\nThreadSanitizer: reported 1 warnings\nmake: *** [runtime/parrot/include/config.fpmc] Error 66\n```\n\n`export TSAN_OPTIONS=\"report_thread_leaks=0\"` would suppress this warning. \nSee http://code.google.com/p/thread-sanitizer/wiki/Flags","files":null}]}