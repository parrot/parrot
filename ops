{"version":1,"ops":[{"type":1,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1294663287,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NzQw","github-url":"https://github.com/parrot/parrot/issues/532","origin":"github"},"title":"Failure due to missing external definition of inlined functions","message":"As of version RELEASE_2_11_0-902-gdce9186, attempting to build parrot with Sun's compiler under Linux fails with the following errors:\n\n```\n/tmp/parrot/blib/lib/libparrot.so: undefined reference to `Parrot_pmc_box_integer'\n/tmp/parrot/blib/lib/libparrot.so: undefined reference to `Parrot_pmc_box_string'\n/tmp/parrot/blib/lib/libparrot.so: undefined reference to `Parrot_pmc_box_number'\n```\n\nThe problem is a reappearance of TT #1646.  There really seem to be three separate issues:\n1.  The config::auto inline test does not test the inline keyword in the way that parrot ultimately uses it.  (It specifies neither static nor external, and is in the same file as it is ultimately used.)  It is relevant to note that gcc -std=c99 won't accept the current inline test files either.  A correct test would test the way that inline is intended to actually be used.  If parrot wants to assume that inline functions also have external linkage, then the tests should be written to test for this.  Note that traditional GNU inline behavior is different from C99 behavior.\n   A good discussion of these issues is at \n   [http://www.greenend.org.uk/rjk/2003/03/inline.html].  (In perl 5, we test for and use only \n   `static inline`\n   .  Feel free to copy those tests.)\n2.  The result of the configure test is, in some cases, ignored anyway.  Specifically, if the compiler passes the second test for \n   `__inline`\n   , the following code in \n   `config/gen/config_h/feature_h.in`\n   unconditionally uses a plain \n   `inline`\n   anyway, even though Configure determined that didn't work:\n\n```\n#if defined(__STDC_VERSION__) \u0026\u0026 __STDC_VERSION__ \u003e= 199901L\n#  define PARROT_INLINE inline\n#  define PARROT_HAS_INLINE\n#else\n#  define PARROT_INLINE\n#endif\n```\n1.  The functions above are never declared 'extern'.\n\nOriginally http://trac.parrot.org/parrot/ticket/1943","files":null}]}