{"version":1,"ops":[{"type":3,"author":{"id":"18879c4084549ff2c7022dc058bcf4940fadd0f2"},"timestamp":1282955459,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4Nzk=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502879"},"message":"\u003cp\u003e\nThe current directory should be completely removed from the search path. Putting the current directory at the end of the path doesn't help if an application tries to load a library that might not exist on every system. Windows made the same mistake:\n\u003c/p\u003e\n\n\u003cp\u003e\n\u003ca   href=\"http://www.google.com/search?q=windows+dll+hijack+vulnerability\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttp://www.google.com/search?q=windows+dll+hijack+vulnerability\u003c/a\u003e\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1284322281,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODA=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502880"},"message":"\u003cp\u003e\nCan someone open up a branch and prepare a patch?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1284323758,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODE=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502881"},"message":"\u003cp\u003e\nThere is a design decision about that? And a deprecation notice? The coding job is the minor part of the issue, IMO.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1301264284,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODI=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502882"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1589#comment:3\" title=\"Comment 3 for Ticket #1589\"\u003eNotFound\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n There is a design decision about that? And a deprecation notice? The coding job is the minor part of the issue, IMO.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\ncotto,\n\u003c/p\u003e\n\n\u003cp\u003e\nCould you evaluate the design decision (if any) to be made here?\n\u003c/p\u003e\n\n\u003cp\u003e\nThanks.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1301354033,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODM=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502883"},"message":"\u003cp\u003e\nDesign decision: pick one of the three:\n\u003c/p\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003e\n1 - Keep the current way: look in current directory before library search paths.\n2 - Look in curent directory only if no match found in library search paths.\n3 - Look only in the library search paths.\n\u003c/p\u003e\n\u003c/blockquote\u003e","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1301667269,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODQ=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502884"},"message":"\u003cp\u003e\nI am +1 for \u003ca class=\"closed ticket\" href=\"http://trac.parrot.org/parrot/ticket/3\" title=\"feature: PDD09 GC System (closed: done)\"\u003e#3\u003c/a\u003e, i.e. remove . from the default search path. This removes an entire class of security vulnerabilities. As long as we give a code snippet of how HLL authors can add . to the default search path, this shouldn't be a big issue.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"aeaa659130ab92a2084a11638a6eb1a6beb03360"},"timestamp":1301703058,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODU=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502885"},"message":"\u003cp\u003e\nLooking in the cwd as a last resort sounds like a sane default.  +1.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1302131176,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODY=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502886"},"message":"\u003cp\u003e\nCan we resolve this and make it part of 3.3 ? I think it is important. I am fine with putting . at the end of our search path.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"c1086893059ddff06f8ec7681ac42d5c862a00e1"},"timestamp":1303012034,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODc=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502887"},"message":"\u003cp\u003e\nI would like to take this ticket but, obviously, there is still no general consensus.\n\u003c/p\u003e\n\n\u003cp\u003e\nMy opinion is that it should be removed all together from the search path. Placing the current working directory at the end of the search path does help protect against Trojans somewhat, but not completely.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1303376327,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODg=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502888"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1589#comment:10\" title=\"Comment 10 for Ticket #1589\"\u003esoh_cah_toa\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cp\u003e\nsoh_cah_toa,\n\u003c/p\u003e\n\n\u003cp\u003e\nThanks for the submission.\n\u003c/p\u003e\n\n\u003cp\u003e\nBut I have to ask:  Are there any tests we should write to demonstrate what this patch does and that it does what we want it to?\n\u003c/p\u003e\n\n\u003cp\u003e\nI would be reluctant to apply it otherwise.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"c1086893059ddff06f8ec7681ac42d5c862a00e1"},"timestamp":1303381793,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4ODk=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502889"},"message":"\u003cp\u003e\nYeah, cotto mentioned the same thing a few days ago.\n\u003c/p\u003e\n\n\u003cp\u003e\nUnfortunately, I'm still new to the whole unit testing thing and would need some guidance on that part.\n\u003c/p\u003e\n\n\u003cp\u003e\nI'll make it a point to talk to you guys about it tomorrow afternoon.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"c1086893059ddff06f8ec7681ac42d5c862a00e1"},"timestamp":1303865102,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4OTA=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502890"},"message":"2245 byte attachment from soh-cah-toa\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1589/tt1589.patch\n\n```diff --git a/src/library.c b/src/library.c\nindex 2bb9e13..b3758b9 100644\n--- a/src/library.c\n+++ b/src/library.c\n@@ -155,8 +155,6 @@ parrot_init_library_paths(PARROT_INTERP)\n         if (!STRING_IS_NULL(envvar) \u0026\u0026 !STRING_IS_EMPTY(envvar))\n             VTABLE_push_string(interp, paths, envvar);\n     }\n-    entry = CONST_STRING(interp, \"./\");\n-    VTABLE_push_string(interp, paths, entry);\n  \n   /\\* define library paths */\n   paths = Parrot_pmc_new(interp, enum_class_ResizableStringArray);\n  @@ -168,15 +166,11 @@ parrot_init_library_paths(PARROT_INTERP)\n       if (!STRING_IS_NULL(envvar) \u0026\u0026 !STRING_IS_EMPTY(envvar))\n           VTABLE_push_string(interp, paths, envvar);\n   }\n-    entry = CONST_STRING(interp, \"./\");\n-    VTABLE_push_string(interp, paths, entry);\n  \n   /\\* define languages paths */\n   paths = Parrot_pmc_new(interp, enum_class_ResizableStringArray);\n   VTABLE_set_pmc_keyed_int(interp, lib_paths,\n           PARROT_LIB_PATH_LANG, paths);\n-    entry = CONST_STRING(interp, \"./\");\n-    VTABLE_push_string(interp, paths, entry);\n  \n   /\\* define dynext paths */\n   paths = Parrot_pmc_new(interp, enum_class_ResizableStringArray);\n  diff --git a/t/library/lib_search_path.t b/t/library/lib_search_path.t\n  new file mode 100644\n  index 0000000..62c3cca\n  --- /dev/null\n  +++ b/t/library/lib_search_path.t\n  @@ -0,0 +1,43 @@\n  +#!./parrot\n  +# Copyright (C) 2011 Parrot Foundation.\n  +\n  +=head1 NAME\n  +\n  +t/library/lib_search_path.t - testing for proper search path precedence\n  +\n  +=head1 SYNOPSIS\n  +\n  +This test program verifies that Parrot searches for libraries in the\n  +proper order.\n  +\n  +=head1 AUTHOR\n  +\n  +Kevin Polulak (a.k.a. soh_cah_toa) kpolulak@gmail.com\n  +\n  +=cut\n  +\n  +.const string TESTS = 2\n  +\n  +.sub 'main' :main\n-    .include 'test_more.pir'\n  +\n-    .local pmc lib\n-    .local pmc lib_cwd\n  +\n-    plan(TESTS)\n  +\n-    # Verify current working directory isn't searched\n-    lib_cwd = loadlib 'lib_search_path.t'\n-    is(lib_cwd, '', 'Verify current working directory not searched')\n  +\n-    # Verify runtime/parrot/dynext is searched\n-   lib = loadlib 'osutils.pir'\n-    isnt(lib, '', 'Verify runtime/parrot/dynext is searched')\n  +.end\n  +\n  +# Local Variables:\n  +#   mode: pir\n  +#   fill-column: 100\n  +# End:\n  +# vim: expandtab shiftwidth=4 ft=pir:\n  +\n\n```\n```","files":null},{"type":3,"author":{"id":"c1086893059ddff06f8ec7681ac42d5c862a00e1"},"timestamp":1303883102,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4OTE=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502891"},"message":"\u003cp\u003e\nPatch incudes both the changes and tests.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1304517027,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4OTI=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502892"},"message":"\u003cp\u003e\nPatch applied in \u003ca   href=\"https://github.com/parrot/parrot/tree/tt1589_library_path\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttps://github.com/parrot/parrot/tree/tt1589_library_path\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\nDeprecation data, wiki pages and possibly some docs still need to get modified.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1306057060,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4OTM=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502893"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1589#comment:13\" title=\"Comment 13 for Ticket #1589\"\u003edukeleto\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Patch applied in \u003ca   href=\"https://github.com/parrot/parrot/tree/tt1589_library_path\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttps://github.com/parrot/parrot/tree/tt1589_library_path\u003c/a\u003e\n Deprecation data, wiki pages and possibly some docs still need to get modified.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\ndukeleto, soh_cah_toa:\n\u003c/p\u003e\n\n\u003cp\u003e\nWhich of you can take care of those items?\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1307779819,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI4OTQ=","github-url":"https://github.com/parrot/parrot/issues/368#issuecomment-3502894"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1589#comment:14\" title=\"Comment 14 for Ticket #1589\"\u003ejkeenan\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Replying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1589#comment:13\" title=\"Comment 13 for Ticket #1589\"\u003edukeleto\u003c/a\u003e:\n\u003c/p\u003e\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Patch applied in \u003ca   href=\"https://github.com/parrot/parrot/tree/tt1589_library_path\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttps://github.com/parrot/parrot/tree/tt1589_library_path\u003c/a\u003e\n Deprecation data, wiki pages and possibly some docs still need to get modified.\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\n dukeleto, soh_cah_toa:\n Which of you can take care of those items?\n\u003c/p\u003e\n\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nRepeat question.\n\u003c/p\u003e","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1383680312,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NzQxNjIwMjY="},"status":2}]}