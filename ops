{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1312746138,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM1MTI=","github-url":"https://github.com/parrot/parrot/issues/540#issuecomment-3503512"},"message":"\u003cp\u003e\ndarwin/ppc variant:\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e$ ./parrot_debugger --help\nBus error\n\u003c/pre\u003e\u003cp\u003e\nSince the rap on \u003ci\u003eparrot_debugger\u003c/i\u003e was always bad, I never had occasion to try it until a couple of weeks ago (when I tried this very command).  So I have to wonder:  Did the \u003ctt\u003e--help\u003c/tt\u003e option ever do something useful?  If so, perhaps we should find out when it started to fail, and why.\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"9f0ac2e546d9697509103ae8e55e8228cd05cab1"},"timestamp":1313695502,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM1MTM=","github-url":"https://github.com/parrot/parrot/issues/540#issuecomment-3503513"},"message":"\u003cp\u003e\nthere are two levels of problem here:\n\u003c/p\u003e\n\n\u003cp\u003e\nfirstly, --help isn't being treated as a flag, but as the name of a file to load.  there's no code to handle that case, so it's presumably never worked.\n\u003c/p\u003e\n\n\u003cp\u003e\nbut parrot_debugger also segfaults when fed any file that doesn't end in \".pbc\":\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e$ ./parrot_debugger ops2c.pbc \u0026lt;/dev/null\nParrot 3.7.0-devel Debugger\n(Please note: the debugger is currently under reconstruction)\n(pdb)\n$ ./parrot_debugger ops2c.pir\nSegmentation fault (core dumped)\n$\n\u003c/pre\u003e\u003cp\u003e\naccording to gdb:\n\u003c/p\u003e\n\u003cpre class=\"wiki\"\u003eProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7ae1f7b in Parrot_gc_allocate_memory_chunk_with_interior_pointers (interp=0x1a00, size=480) at src/gc/api.c:667\n667     return interp-\u0026gt;gc_sys-\u0026gt;allocate_memory_chunk_with_interior_pointers(interp, size);\n(gdb) bt\n#0  0x00007ffff7ae1f7b in Parrot_gc_allocate_memory_chunk_with_interior_pointers (interp=0x1a00, size=480) at src/gc/api.c:667\n#1  0x00007ffff7b3d2a9 in Parrot_pf_new (interp=0x1a00, is_mapped=0) at src/packfile/api.c:1355\n#2  0x00007ffff7b3d45a in PackFile_new (interp=0x1a00, is_mapped=0) at src/packfile/api.c:1388\n#3  0x00007ffff7c641a1 in imcc_run_compilation_internal (imcc=0x6abe28, source=0x786158, is_file=1, is_pasm=0) at compilers/imcc/main.c:555\n#4  0x00007ffff7c640f6 in imcc_run_compilation_reentrant (imcc=0x6abe28, fullname=0x786158, is_file=1, is_pasm=0) at compilers/imcc/main.c:527\n#5  0x00007ffff7c64067 in imcc_compile_file (imcc=0x6abe28, fullname=0x786158, is_pasm=0) at compilers/imcc/main.c:504\n#6  0x00007ffff7afdebc in Parrot_compile_file (interp=0x60a010, fullname=0x786158, is_pasm=0) at src/interp/inter_misc.c:207\n#7  0x00000000004015d9 in main (argc=2, argv=0x7fffffffe008) at frontend/parrot_debugger/main.c:213\n(gdb) fr 3\n#3  0x00007ffff7c641a1 in imcc_run_compilation_internal (imcc=0x6abe28, source=0x786158, is_file=1, is_pasm=0) at compilers/imcc/main.c:555\n555     PackFile \\* const pf_raw      = PackFile_new(imcc-\u0026gt;interp, 0);\n(gdb) p *imcc\n$1 = {interp = 0x1a00, prev = 0x0, imc_units = 0x0, last_unit = 0x0, cur_unit = 0x0, sr_return = 0x0, cur_namespace = 0x0, top_node = 0x0, state = 0x0, error_message = 0x0, cur_call = 0x0, cur_obj = 0x0,\n  adv_named_id = 0x0, heredoc_end = 0x0, heredoc_content = 0x0, cur_macro_name = 0x0, is_def = 0, frames = 0x0, globals = 0x0, macro_buffer = 0x0, macros = 0x1200, debug_seg = 0x0, pc = 0x0, regs = {\n    0x0 \u0026lt;repeats 100 times\u0026gt;}, keys = {0x0 \u0026lt;repeats 16 times\u0026gt;}, asm_state = AsmDefault, ghash = {data = 0x0, size = 0, entries = 0}, jump_buf = {{__jmpbuf = {0, 0, 0, 0, 0, 0, 0, 0}, __mask_was_saved = 0,\n      __saved_mask = {__val = {0 \u0026lt;repeats 16 times\u0026gt;}}}}, IMCC_DEBUG = 0, cnr = 0, debug = 0, dont_optimize = 0, emitter = 0, error_code = 0, expect_pasm = 0, imcc_warn = 0, in_pod = 0, ins_line = 0,\n  keyvec = 0, line = 0, optimizer_level = 0, nargs = 0, n_comp_units = 0, nkeys = 0, compiler_state = 0, verbose = 0, seen_main = 0, npc = 0}\n(gdb)\n\u003c/pre\u003e\u003cp\u003e\nfor comparison, {./parrot_debugger /dev/null} segfaults, whereas {./parrot_debugger --help.pbc} works fine!\n\u003c/p\u003e","files":null},{"type":4,"author":{"id":"aef4977f5ea786238d7c9581a2f192f4adc3f39d"},"timestamp":1336352219,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTQ4NzIxNzA="},"status":2}]}