{"version":1,"ops":[{"type":1,"author":{"id":"8c86ede03c8e80b0dad5131138f96e957a4ee66b"},"timestamp":1380648251,"metadata":{"github-id":"MDU6SXNzdWUyMDM0NjkxNw==","github-url":"https://github.com/parrot/parrot/issues/984","origin":"github"},"title":"Nullary subs ignore condition of too-many-arguments-passed.","message":"```\nSummary: nullary arg overflow not checked\nReported by: zefram@fysh.org\n\n---\nNullary subs (those that accept no parameters) should signal an exception\nif called with args, but actually don't.  Per PDD 3, an exception\nshould be thrown if any sub is given too many or too few arguments\nfor its signature.  (Subject to errorsoff, which I'm not using here.)\nAmong subs of fixed arity (only positional args, nothing optional,\nnothing slurpy, nothing named) it seems that this is mostly true, with\nthis exception for nullary subs.  Test case:\n\n$ cat t8.pir\n.sub foo0\n        say \"in foo0\"\n        .return()\n.end\n.sub foo1\n        .param int i\n        say \"in foo1\"\n        .return()\n.end\n.sub main :main\n        say \"about to call foo0\"\n        foo0(1)\n        say \"about to call foo1\"\n        foo1(1,2)\n.end\n$ ./parrot t8.pir\nabout to call foo0\nin foo0\nabout to call foo1\ntoo many positional arguments: 2 passed, 1 expected\ncurrent instr.: 'foo1' pc 5 (t8.pir:5)\ncalled from Sub 'main' pc 36 (t8.pir:14)\n\nBoth subs are being called with one more argument than they accept.\nAn exception should be signalled by foo0(), but as you see that call\ngoes ahead.  foo1() behaves as expected.\n\n-zefram\n\n\n---\nosname= linux\nosvers= 3.2.0-4-amd64\narch=   x86_64-linux-gnu-thread-multi\ncc=     cc\n\n---\nFlags:\n    category=core\n    severity=high\n    ack=no\n\n---\nSummary of my parrot 5.5.0 configuration:\n  configdate='Sun Sep 22 18:01:32 2013 GMT'\n  Platform:\n    osname=linux, archname=x86_64-linux-gnu-thread-multi\n    perl=/usr/bin/perl\n  Compiler:\n    cc='cc', ccflags='-D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fstack-protector  -pipe -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DDISABLE_GC_DEBUG=1 -DNDEBUG -DHAS_GETTEXT',\n  Linker and Libraries:\n    link='cc', linkflags=' -fstack-protector -L/usr/local/lib -Wl,-E',\n    ld='cc', ldflags=' -fstack-protector -L/usr/local/lib',\n    cc_ldflags='',\n    libs='-ldl -lm -lpthread -lcrypt -lrt -lgmp -lreadline '\n  Dynamic Linking:\n    cc_shared='-fPIC',\n    link_dynamic='-Wl,-E',\n    ld_share_flags='-shared -L/usr/local/lib -fstack-protector -fPIC',\n    ld_load_flags='-shared -L/usr/local/lib -fstack-protector -fPIC'\n  Extensions:\n    o='.o', a='.a', exe='',\n    share_ext='.so', load_ext='.so'\n  Misc Programs:\n    ar='ar', ranlib=':',\n    make='make', make_set_make='#'\n  Types:\n    iv=long, intvalsize=8, intsize=4, opcode_t=long, opcode_t_size=8,\n    ptrsize=8,  byteorder=12345678, \n    nv=double, numvalsize=8, doublesize=8, longdoublesize=16\n\n---\nEnvironment:\n    HOME =/home/zefram\n    LANG  (unset)\n    LANGUAGE  (unset)\n    LD_LIBRARY_PATH  (unset)\n    LOGDIR  (unset)\n    PATH =/home/zefram/usr/perl/util:/home/zefram/pub/x86_64-unknown-linux-gnu/bin:/home/zefram/pub/common/bin:/usr/bin:/bin:/usr/local/bin:/usr/games\n    SHELL =/usr/bin/zsh\n```","files":null}]}