{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1295820374,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NjI=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503462"},"message":"\u003cp\u003e\nI spot-checked the individual test files listed above.  It appears that in all, or almost all, cases, the tests that are \"running with warnings\" are ... tests that are testing warnings!\n\u003c/p\u003e\n\n\u003cp\u003e\nWhich suggests that \u003ctt\u003emake warnings_tests\u003c/tt\u003e is not a very useful operation.  Or, at least not until we have for PIR tests something that is the equivalent of IO::CaptureOutput::capture() which we use in Perl 5 tests.\n\u003c/p\u003e\n\n\u003cp\u003e\nSince I doubt that many people have ever used \u003ctt\u003emake warnings_tests\u003c/tt\u003e and since it would take a lot of work to make it do something useful, my recommendation is that we drop it.\n\u003c/p\u003e\n\n\u003cp\u003e\nThoughts?\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"aeaa659130ab92a2084a11638a6eb1a6beb03360"},"timestamp":1295841965,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NjM=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503463"},"message":"\u003cp\u003e\nCan the getstderr and setstderr ops be used for this?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"099af60226e2576bd4ff0f5c2614b710c745cab6"},"timestamp":1295843973,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NjQ=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503464"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/1941#comment:3\" title=\"Comment 3 for Ticket #1941\"\u003ecotto\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n Can the getstderr and setstderr ops be used for this?\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nYes, it's possible. I used them in pirate test suite, afair.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297543477,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NjU=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503465"},"message":"487 byte attachment from jkeenan\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1941/t_compilers_imcc_syn_errors.diff\n\n```diff --git a/t/compilers/imcc/syn/errors.t b/t/compilers/imcc/syn/errors.t\nindex 818be19..ca90ebe 100644\n--- a/t/compilers/imcc/syn/errors.t\n+++ b/t/compilers/imcc/syn/errors.t\n@@ -92,7 +92,7 @@ pir_error_output_like( \u003c\u003c'END_PIR', \u003c\u003c'END_EXPECTED', 'warn about failing .loadl\n     say \"WTF\"\n .end\n END_PIR\n-/^error:imcc:loadlib._nosuch/\n+/error:imcc:loadlib._nosuch/\n END_EXPECTED\n\n pir_error_output_like( \u003c\u003c'CODE', \u003c\u003c'OUTPUT', \"Multi-stage rethrows produce an informative backtrace\");\n\n```\n```","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297544080,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NjY=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503466"},"message":"910 byte attachment from jkeenan\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1941/t_pmc_sub_make_warnings_tests_fail.txt\n\n```#   Failed test 'warn on in sub'\n\n# at t/pmc/sub.t line 747.\n\n# got: 'Stringifying an Undef PMC\n\n# current instr.: '_main' pc 12 (/home/jimk/gitwork/parrot/t/pmc/sub_31.pir:5)\n\n# ok\n\n# '\n\n# expected: 'ok\n\n# '\n\n# Failed test 'warn on in sub, turn off in f2'\n\n# at t/pmc/sub.t line 762.\n\n# 'Stringifying an Undef PMC\n\n# current instr.: '_f1' pc 33 (/home/jimk/gitwork/parrot/t/pmc/sub_32.pir:13)\n\n# back\n\n# Stringifying an Undef PMC\n\n# current instr.: '_main' pc 14 (/home/jimk/gitwork/parrot/t/pmc/sub_32.pir:6)\n\n# ok\n\n# '\n\n# doesn't match '/Stringifying an Undef PMC\n\n# .*\n\n# back\n\n# ok/\n\n# '\n\n# Failed test 'warn on in sub'\n\n# at t/pmc/sub.t line 1098.\n\n# got: 'Stringifying an Undef PMC\n\n# current instr.: 'test' pc 12 (/home/jimk/gitwork/parrot/t/pmc/sub_44.pir:5)\n\n# ok\n\n# '\n\n# expected: 'ok\n\n# '\n\n# Looks like you failed 3 tests of 78.\n\nt/pmc/sub.t ......................... \n\n```\n```","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297544103,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0Njc=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503467"},"message":"2257 byte attachment from jkeenan\nat http://trac.parrot.org/parrot/raw-attachment/ticket/1941/t_pmc_nci_make_warnings_tests_fail.txt\n\n```#   Failed test 'load library fails'\n\n# at t/pmc/nci.t line 40.\n\n# got: 'Couldn't load 'no_such_library': no_such_library.so: cannot open shared object file: No such file or directory\n\n# current instr.: 'test' pc 0 (/home/jimk/gitwork/parrot/t/pmc/nci_1.pir:4)\n\n# undefined\n\n# '\n\n# expected: 'undefined\n\n# '\n\n# Failed test 'dlfunc on undef'\n\n# at t/pmc/nci.t line 63.\n\n# got: 'Couldn't load 'no_such_library': no_such_library.so: cannot open shared object file: No such file or directory\n\n# current instr.: 'test' pc 0 (/home/jimk/gitwork/parrot/t/pmc/nci_2.pir:5)\n\n# Symbol 'no_such_function' not found: /home/jimk/gitwork/parrot/blib/lib/libparrot.so.3.0.0: undefined symbol: no_such_function\n\n# current instr.: 'test' pc 3 (/home/jimk/gitwork/parrot/t/pmc/nci_2.pir:6)\n\n# undefined\n\n# '\n\n# expected: 'undefined\n\n# '\n\n# Failed test 'dlfunc function not found'\n\n# at t/pmc/nci.t line 87.\n\n# got: 'libnci_test was successfully loaded\n\n# Symbol 'no_such_function' not found: /home/jimk/gitwork/parrot/runtime/parrot/dynext/libnci_test.so: undefined symbol: no_such_function\n\n# current instr.: 'test' pc 8 (/home/jimk/gitwork/parrot/t/pmc/nci_3.pir:9)\n\n# undefined\n\n# '\n\n# expected: 'libnci_test was successfully loaded\n\n# undefined\n\n# '\n\n# Failed test 'dlvar - unknown symbol'\n\n# at t/pmc/nci.t line 2487.\n\n# got: 'libnci_test was successfully loaded\n\n# Symbol 'non_existing' not found: /home/jimk/gitwork/parrot/runtime/parrot/dynext/libnci_test.so: undefined symbol: non_existing\n\n# current instr.: 'test' pc 13 (/home/jimk/gitwork/parrot/t/pmc/nci_60.pir:17)\n\n# 'non_existing' is not defined\n\n# '\n\n# expected: 'libnci_test was successfully loaded\n\n# 'non_existing' is not defined\n\n# '\n\n# Failed test 'dlfunc - unknown symbol'\n\n# at t/pmc/nci.t line 2517.\n\n# got: 'libnci_test was successfully loaded\n\n# Symbol 'non_existing' not found: /home/jimk/gitwork/parrot/runtime/parrot/dynext/libnci_test.so: undefined symbol: non_existing\n\n# current instr.: 'test' pc 13 (/home/jimk/gitwork/parrot/t/pmc/nci_61.pir:17)\n\n# 'non_existing' is not defined\n\n# '\n\n# expected: 'libnci_test was successfully loaded\n\n# 'non_existing' is not defined\n\n# '\n\n# Looks like you failed 5 tests of 73.\n\nt/pmc/nci.t ......................... \n\n```\n```","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297565077,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0Njg=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503468"},"message":"\u003cp\u003e\nHave this file pass 'make warnings_tests'\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297565680,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0Njk=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503469"},"message":"\u003cp\u003e\noutput from 'make warnings_tests' for this file\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297565703,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NzA=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503470"},"message":"\u003cp\u003e\noutput from 'make warnings_tests' for this file\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1297565846,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDM0NzE=","github-url":"https://github.com/parrot/parrot/issues/523#issuecomment-3503471"},"message":"\u003cp\u003e\n1. As of today (commit d76e2cc1) the number of tests failing under \u003ctt\u003emake warnings_tests\u003c/tt\u003e is much smaller.\n\u003c/p\u003e\n\n## \u003cpre class=\"wiki\"\u003eTest Summary Report\n\nt/compilers/imcc/syn/errors.t     (Wstat: 256 Tests: 8 Failed: 1)\n  Failed test:  7\n  Non-zero exit status: 1\nt/pmc/nci.t                       (Wstat: 1280 Tests: 73 Failed: 5)\n  Failed tests:  1-3, 60-61\n  Non-zero exit status: 5\nt/pmc/sub.t                       (Wstat: 768 Tests: 78 Failed: 3)\n  Failed tests:  31-32, 44\n  Non-zero exit status: 3\nFiles=208, Tests=7094, 71 wallclock secs ( 0.99 usr  0.42 sys +\n  40.23 cusr  9.89 csys = 51.53 CPU)\nResult: FAIL\nmake: **\\* [warnings_tests] Error 1\n\u003c/pre\u003e\u003cp\u003e\n2. I am attaching a patch which eliminates the failure in \u003ci\u003et/compilers/imcc/syn/errors.t\u003c/i\u003e.  Please review.\n\u003c/p\u003e\n\n\u003cp\u003e\n3. I am attaching two other patches which display the sections of the output of 'make warnings_tests' relevant to \u003ci\u003et/pmc/nci.t\u003c/i\u003e and \u003ci\u003et/pmc/sub.t\u003c/i\u003e.  I wonder:  Are the tests written in such a way as to anticipate the possibility of warnings output or other output to STDERR?\n\u003c/p\u003e","files":null}]}