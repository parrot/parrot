{"version":1,"ops":[{"type":1,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1355254400,"metadata":{"github-id":"MDU6SXNzdWU5MTkxNDgw","github-url":"https://github.com/parrot/parrot/issues/880","origin":"github"},"title":"GC walks into thread interp, examples/threads/chameneos.pir","message":"```\n$ parrot examples/threads/chameneos.pir\ngoing to sleep\nBus error: 10 (core dumped)\n```\n\nSame with -DTHREAD_DEBUG, fixed with -G --no-gc\n\nThe fun part of this is that the backtrace is not the same each time I run this. Here are two different backraces:\n\nBacktrace #1:\n\n```\n#0  0x000000010d584fc8 in Parrot_pcc_invoke_from_sig_object (interp=0x7ff142c03bf0, sub_obj=0x7ff1479ec838, call_object=0x7ff1479ec4f0) at pcc.c:339\n339         Interp_core_SET(interp, old_core);\n(gdb) bt\n#0  0x000000010d584fc8 in Parrot_pcc_invoke_from_sig_object (interp=0x7ff142c03bf0, sub_obj=0x7ff1479ec838, call_object=0x7ff1479ec4f0) at pcc.c:339\n#1  0x000000010d5649a0 in Parrot_ext_call (interp=0x7ff142c03bf0, sub_pmc=0x7ff1479ec838, signature=0x10d77b8f8 \"P-\u003e\") at extend.c:158\n#2  0x000000010d71a4ab in Parrot_Task_invoke (interp=0x7ff142c03bf0, _self=0x7ff1490479f0, next=0x0) at task.c:168\n#3  0x000000010d584f63 in Parrot_pcc_invoke_from_sig_object (interp=0x7ff142c03bf0, sub_obj=0x7ff1490479f0, call_object=0x7ff1479ec590) at pcc.c:330\n#4  0x000000010d5649a0 in Parrot_ext_call (interp=0x7ff142c03bf0, sub_pmc=0x7ff1490479f0, signature=0x10d776edc \"-\u003e\") at extend.c:158\n#5  0x000000010d5cad13 in Parrot_cx_next_task (interp=0x7ff142c03bf0, scheduler=0x7ff1430cd530) at scheduler.c:231\n#6  0x000000010d5ca9d2 in Parrot_cx_outer_runloop (interp=0x7ff142c03bf0) at scheduler.c:149\n#7  0x000000010d5ca6ff in Parrot_cx_begin_execution (interp=0x7ff142c03bf0, main=0x7ff143812a78, argv=0x7ff1430cd7d8) at scheduler.c:109\n#8  0x000000010d5de31d in Parrot_pf_execute_bytecode_program (interp=0x7ff142c03bf0, pbc=0x7ff143813428, args=0x7ff1430cd7d8) at api.c:2829\n#9  0x000000010d55af5a in Parrot_api_run_bytecode (interp_pmc=0x7ff1430c3bd8, pbc=0x7ff143813428, args=0x7ff1430cd7d8) at bytecode.c:161\n#10 0x000000010d4eb86e in main (argc=2, argv=0x7fff527152f8) at main.c:172\n\n```\n\nBacktrace #2:\n\n```\n(gdb) bt\n#0  0x00007fff8a7c1cef in cpu_number ()\n#1  0x00007fff8a7fb7c5 in szone_malloc_should_clear ()\n#2  0x00007fff8a7ee183 in malloc_zone_malloc ()\n#3  0x00007fff8a7eebd7 in malloc ()\n#4  0x000000010132434a in Parrot_PMCList_push_pmc_orig (interp=0x7fbef3c03bf0, _self=0x7fbef40cd5a8, value=0x7fbefe2d8870) at pmclist.c:515\n#5  0x0000000101322985 in Parrot_PMCList_push_pmc (interp=0x7fbef3c03bf0, _self=0x7fbef40cd5a8, value=0x7fbefe2d8870) at pmclist.c:237\n#6  0x00000001013480d3 in Parrot_Scheduler_push_pmc_orig (interp=0x7fbef3c03bf0, _self=0x7fbef40cd530, task=0x7fbefe2d8870) at scheduler.c:299\n#7  0x0000000101346415 in Parrot_Scheduler_push_pmc (interp=0x7fbef3c03bf0, _self=0x7fbef40cd530, task=0x7fbefe2d8870) at scheduler.c:139\n#8  0x00000001012083f8 in Parrot_cx_preempt_task (interp=0x7fbef3c03bf0, scheduler=0x7fbef40cd530, next=0x7fbef40fef58) at scheduler.c:375\n#9  0x0000000101186417 in Parrot_pass (cur_opcode=0x7fbef40fef50, interp=0x7fbef3c03bf0) at core_ops.c:24537\n#10 0x00000001011ffe4a in runops_fast_core (interp=0x7fbef3c03bf0, runcore_unused=0x7fbef3c0e980, pc=0x7fbef40fef50) at cores.c:499\n#11 0x00000001011ff28a in runops_int (interp=0x7fbef3c03bf0, offset=555) at main.c:220\n#12 0x00000001011cb3be in runops (interp=0x7fbef3c03bf0, offs=555) at ops.c:123\n#13 0x00000001011c1fc4 in Parrot_pcc_invoke_from_sig_object (interp=0x7fbef3c03bf0, sub_obj=0x7fbef9a23678, call_object=0x7fbef9a23330) at pcc.c:338\n#14 0x00000001011a19a0 in Parrot_ext_call (interp=0x7fbef3c03bf0, sub_pmc=0x7fbef9a23678, signature=0x1013b88f8 \"P-\u003e\") at extend.c:158\n#15 0x00000001013574ab in Parrot_Task_invoke (interp=0x7fbef3c03bf0, _self=0x7fbefe2d8870, next=0x0) at task.c:168\n#16 0x00000001011c1f63 in Parrot_pcc_invoke_from_sig_object (interp=0x7fbef3c03bf0, sub_obj=0x7fbefe2d8870, call_object=0x7fbef9a233d0) at pcc.c:330\n#17 0x00000001011a19a0 in Parrot_ext_call (interp=0x7fbef3c03bf0, sub_pmc=0x7fbefe2d8870, signature=0x1013b3edc \"-\u003e\") at extend.c:158\n#18 0x0000000101207d13 in Parrot_cx_next_task (interp=0x7fbef3c03bf0, scheduler=0x7fbef40cd530) at scheduler.c:231\n#19 0x00000001012079d2 in Parrot_cx_outer_runloop (interp=0x7fbef3c03bf0) at scheduler.c:149\n#20 0x00000001012076ff in Parrot_cx_begin_execution (interp=0x7fbef3c03bf0, main=0x7fbef40e1478, argv=0x7fbef40cd7d8) at scheduler.c:109\n#21 0x000000010121b31d in Parrot_pf_execute_bytecode_program (interp=0x7fbef3c03bf0, pbc=0x7fbef40e1e28, args=0x7fbef40cd7d8) at api.c:2829\n#22 0x0000000101197f5a in Parrot_api_run_bytecode (interp_pmc=0x7fbef40c3bd8, pbc=0x7fbef40e1e28, args=0x7fbef40cd7d8) at bytecode.c:161\n#23 0x000000010112986e in main (argc=2, argv=0x7fff5ead72f8) at main.c:172\n```\n\n```\n$ git rev-parse HEAD\n48a2a418b9a144d5d164ef4c97a185d2a791b12a\n```\n\nCan anybody else reproduce this?","files":null}]}