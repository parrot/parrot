{"version":1,"ops":[{"type":3,"author":{"id":"56b030459ff5c3e63b58d71e1bed10897e6a7686"},"timestamp":1246413622,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NzQ=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502774"},"message":"525 byte attachment from chromatic\nat http://trac.parrot.org/parrot/raw-attachment/ticket/800/unicode_args.patch\n\n# ```=== src/embed.c\n\n--- src/embed.c (revision 39883)\n+++ src/embed.c (local)\n@@ -644,7 +644,7 @@\n     for (i = 0; i \u003c argc; i++) {\n         /\\* Run through argv, adding everything to @ARGS. */\n         STRING \\* const arg =\n-            string_make(interp, argv[i], strlen(argv[i]), NULL,\n- ```\n         string_make(interp, argv[i], strlen(argv[i]), \"unicode\",\n           PObj_external_FLAG);\n  \n   if (Interp_debug_TEST(interp, PARROT_START_DEBUG_FLAG))\n  ```\n\n```\n```","files":null},{"type":3,"author":{"id":"56b030459ff5c3e63b58d71e1bed10897e6a7686"},"timestamp":1246431622,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NzU=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502775"},"message":"\u003cp\u003e\nEncode command-line arguments as Unicode, not ASCII\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"56b030459ff5c3e63b58d71e1bed10897e6a7686"},"timestamp":1246431678,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NzY=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502776"},"message":"\u003cp\u003e\nThis patch passes all Parrot tests; how does it work for Rakudo?\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"0c9c62332064205b2d799407019fa3e7e2f43862"},"timestamp":1247016010,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3Nzc=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502777"},"message":"\u003cp\u003e\nEverything works great in Rakudo now.  We should add whatever tests we want for this, and then I think we can mark it as \"fixed\".\n\u003c/p\u003e\n\n\u003cp\u003e\nPm\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1298270829,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3Nzg=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502778"},"message":"\u003cp\u003e\npmichaud, chromatic:\n\u003c/p\u003e\n\n\u003cp\u003e\nIs this still a live issue?  If so, the patch will have to be re-pulled, because the area where it presumably would apply in \u003ci\u003esrc/embed.c\u003c/i\u003e has changed significantly.\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003ePARROT_CANNOT_RETURN_NULL\nstatic PMC*\nsetup_argv(PARROT_INTERP, int argc, ARGIN(const char **argv))\n{\n...\n    for (i = 0; i \u0026lt; argc; ++i) {\n        /* Run through argv, adding everything to @ARGS. */\n        STRING * const arg = Parrot_str_new_init(interp, argv[i],\n                strlen(argv[i]),\n                Parrot_utf8_encoding_ptr, PObj_external_FLAG);\n        if (Interp_debug_TEST(interp, PARROT_START_DEBUG_FLAG))\n            Parrot_io_eprintf(interp, \"\\t%vd: %s\\n\", i, argv[i]);\n        VTABLE_push_string(interp, userargv, arg);\n    }\n...\n}\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"aef4977f5ea786238d7c9581a2f192f4adc3f39d"},"timestamp":1298326217,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3Nzk=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502779"},"message":"\u003cp\u003e\nI suspect this is either fixed or on the way to being fixed with recent work by nwellnhof and plobsing and others. I would like to hear what they have to say about it.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"18879c4084549ff2c7022dc058bcf4940fadd0f2"},"timestamp":1298326658,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3ODA=","github-url":"https://github.com/parrot/parrot/issues/327#issuecomment-3502780"},"message":"\u003cp\u003e\nThis was fixed by plobsing for Linux only. For other Unices, we need code to initialize the platform encoding. For Windows it's not that easy. See here for our discussion on IRC: \u003ca   href=\"http://irclog.perlgeek.de/parrot/2011-01-09#i_3167023\"\u003e\u003cspan class=\"icon\"\u003eÂ \u003c/span\u003ehttp://irclog.perlgeek.de/parrot/2011-01-09#i_3167023\u003c/a\u003e\n\u003c/p\u003e","files":null}]}