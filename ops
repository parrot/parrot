{"version":1,"ops":[{"type":3,"author":{"id":"5c5a1437d57bc93e00fe40289d8c8a34b3bf11f0"},"timestamp":1328780920,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODQ2ODc=","github-url":"https://github.com/parrot/parrot/issues/714#issuecomment-3884687"},"message":"Bah, the diff didn't format all that well, let's try to do it better:\n\n```\n--- src/scheduler.c.orig        2011-10-18 22:44:11.000000000 +0000\n+++ src/scheduler.c\n@@ -993,7 +993,7 @@ Parrot_cx_schedule_sleep(PARROT_INTERP, \n     Parrot_cx_runloop_wake(interp, interp-\u003escheduler);\n\n     /* A more primitive, platform-specific, non-threaded form of sleep. */\n-    if (time \u003e 1) {\n+    if (time \u003e= 1) {\n         /* prevent integer overflow when converting to microseconds\n          * and problems in platforms that doesn't allow usleep more\n          * than 1 second */\n```","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1328801560,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODkyMzg=","github-url":"https://github.com/parrot/parrot/issues/714#issuecomment-3889238"},"message":"This patch no longer applies to 4.0.0 but I made it work and currently testing this. Nicely done! :metal:\n\nJust to be clear, where you seeing timer test _failures_ or were you seeing the Timer PMC tests intermittently hang forever?","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1328802929,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODk3NDk=","github-url":"https://github.com/parrot/parrot/issues/714#issuecomment-3889749"},"message":"Sadly, I am still seeing t/pmc/timer.t hang forever after test 11. That being said, it could be that my hanging issue is totally different than this fencepost error. Not quite sure yet.","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1328803031,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODk3ODU=","github-url":"https://github.com/parrot/parrot/issues/714#issuecomment-3889785"},"message":"I made a branch for this patch: https://github.com/parrot/parrot/tree/714/scheduler_bug\n\nCan we get some testing on various platforms?","files":null},{"type":3,"author":{"id":"5c5a1437d57bc93e00fe40289d8c8a34b3bf11f0"},"timestamp":1328865941,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDM0MTM=","github-url":"https://github.com/parrot/parrot/issues/714#issuecomment-3903413"},"message":"\u003e This patch no longer applies to 4.0.0 but I made it work and\n\u003e currently testing this. Nicely done! :metal:\n\nYah, I saw that construct had gone in 3.10.0.  I'm seeing New and\nExciting test failures on that version, though...\n\n\u003e Just to be clear, where you seeing timer test _failures_ or\n\u003e were you seeing the Timer PMC tests intermittently hang\n\u003e forever?\n\nI was seeing test failures, as in:\n\n## Test Summary Report\n\nt/op/time.t                               (Wstat: 0 Tests: 19 Failed: 2)\n  Failed tests:  5-6\nt/pmc/timer.t                             (Wstat: 512 Tests: 9 Failed: 2)\n  Failed tests:  4, 6\n  Non-zero exit status: 2\nt/pir/timer_exit.t                        (Wstat: 0 Tests: 1 Failed: 1)\n  Failed test:  3\n  Parse errors: Tests out of sequence.  Found (3) but expected (1)\n\nE.g. one of the tests did \"sleep 1\", which instead of doing sleep(1)\nended up doing usleep(1000000), which promptly returned -1 and set\nerrno to EINVAL, and time didn't progress notably, so the test failed.\n\nRegards,\n- HÃ¥vard","files":null}]}