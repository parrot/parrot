{"version":1,"ops":[{"type":1,"author":{"id":"fe8af3263289cd763d1456c9b165be9f1ccc1f9b"},"timestamp":1422993082,"metadata":{"github-id":"MDU6SXNzdWU1NjQyNzM1OA==","github-url":"https://github.com/parrot/parrot/issues/1200","origin":"github"},"title":"SIGBUS on OpenBSD/arm, invalid ptr with GMS gc","message":"Probably an unaligned access.  I don’t know this code well enough to fix it.\n\n```\n./parrot winxed.pbc -c --noan tools/dev/pbc_to_exe.winxed\n*** Signal SIGBUS in /home/pascal/src/parrot (Makefile:937 'tools/dev/pbc_to_exe\n.pir')\n~/src/parrot $ ls *.core\nparrot.core\n~/src/parrot $ rot winxed.pbc -c --noan tools/dev/pbc_to_exe.winxed           \u003c\nGNU gdb 6.3\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"arm-unknown-openbsd5.6\"...\nCore was generated by `parrot'.\nProgram terminated with signal 10, Bus error.\nReading symbols from /home/pascal/src/parrot/blib/lib/libparrot.so.7.0.2...done.\nLoaded symbols for /home/pascal/src/parrot/blib/lib/libparrot.so.7.0.2\nReading symbols from /usr/lib/libutil.so.12.1...done.\nLoaded symbols for /usr/lib/libutil.so.12.1\nReading symbols from /usr/lib/libpthread.so.18.1...done.\nLoaded symbols for /usr/lib/libpthread.so.18.1\nReading symbols from /usr/lib/libreadline.so.4.0...done.\nLoaded symbols for /usr/lib/libreadline.so.4.0\nReading symbols from /usr/lib/libncurses.so.14.0...done.\nLoaded symbols for /usr/lib/libncurses.so.14.0\nReading symbols from /usr/lib/libstdc++.so.57.0...done.\nLoaded symbols for /usr/lib/libstdc++.so.57.0\nReading symbols from /usr/lib/libm.so.9.0...done.\nLoaded symbols for /usr/lib/libm.so.9.0\nReading symbols from /usr/lib/libc.so.77.3...done.\nLoaded symbols for /usr/lib/libc.so.77.3\nReading symbols from /usr/libexec/ld.so...done.\nLoaded symbols for /usr/libexec/ld.so\n#0  0x476b656c in trace_mem_block (interp=0x42f5db00, mem_pools=0x0, \n    lo_var_ptr=3221157800, hi_var_ptr=3221159640) at src/gc/system.c:473\n473             const size_t ptr = *(size_t *)cur_var_ptr;\n(gdb) bt\n#0  0x476b656c in trace_mem_block (interp=0x42f5db00, mem_pools=0x0, \n    lo_var_ptr=3221157800, hi_var_ptr=3221159640) at src/gc/system.c:473\n#1  0x476b67f0 in trace_system_stack (interp=0x42f5db00, mem_pools=0x0)\n    at src/gc/system.c:239\n#2  0x476b68e8 in trace_system_areas (interp=0x42f5db00, mem_pools=0x0)\n    at src/gc/system.c:209\n#3  0x476b5cb4 in Parrot_gc_trace_root (interp=0x42f5db00, mem_pools=0x0, \n    trace=GC_TRACE_FULL) at src/gc/mark_sweep.c:187\n#4  0x476b3748 in gc_gms_mark_and_sweep (interp=0x42f5db00, flags=0)\n    at src/gc/gc_gms.c:850\n#5  0x476b38f0 in gc_gms_maybe_mark_and_sweep (interp=0x42f5db00, flags=0)\n    at src/gc/gc_gms.c:1527\n#6  0x476b3bc8 in gc_gms_allocate_pmc_header (interp=0x42f5db00, \n    flags_unused=0) at src/gc/gc_gms.c:1540\n#7  0x476a34b4 in Parrot_gc_new_pmc_header (interp=0x42f5db00, flags=0)\n    at src/gc/api.c:314\n#8  0x47704dd4 in get_new_pmc_header (interp=0x42f5db00, base_type=15, flags=0)\n    at src/pmc.c:572\n#9  0x47705ab4 in Parrot_pmc_new (interp=0x42f5db00, base_type=15)\n    at src/pmc.c:217\n#10 0x476ce5f4 in Parrot_pcc_reuse_continuation (interp=0x42f5db00, \n    call_context=0x42bc7bc4, next=0x45b2cfe4) at src/call/context.c:892\n---Type \u003creturn\u003e to continue, or q \u003creturn\u003e to quit---\n#11 0x4764369c in Parrot_callmethodcc_p_sc (cur_opcode=0x45b2cfd8, \n    interp=0x42f5db00) at src/ops/core_ops.c:18616\n#12 0x477081fc in runops_fast_core (interp=0x42f5db00, \n    runcore_unused=0x472aace0, pc=0x45b2cfd8) at src/runcore/cores.c:495\n#13 0x47707abc in runops_int (interp=0x42f5db00, offset=73069)\n    at src/runcore/main.c:220\n#14 0x476cd0d0 in runops (interp=0x42f5db00, offs=132) at src/call/ops.c:123\n#15 0x476c30c0 in Parrot_pcc_invoke_from_sig_object (interp=0x42f5db00, \n    sub_obj=0x4b561d54, call_object=0x4b561da4) at src/call/pcc.c:307\n#16 0x4769ab00 in Parrot_ext_call (interp=0x47912c57, sub_pmc=0x4b561d68, \n    signature=0x42f5db00 \"�{�B\") at src/extend.c:164\n#17 0x4786e520 in Parrot_Task_invoke (interp=0x42f5db00, _self=0x4b561c64, \n    next=0x0) at task.pmc:175\n#18 0x476c305c in Parrot_pcc_invoke_from_sig_object (interp=0x42f5db00, \n    sub_obj=0x4b561c64, call_object=0x4b561d68) at src/call/pcc.c:299\n#19 0x4769aaa0 in Parrot_ext_call (interp=0x0, sub_pmc=0x43139a20, \n    signature=0x42f5db00 \"�{�B\") at src/extend.c:155\n#20 0x477120fc in Parrot_cx_next_task (interp=0x42f5db00, scheduler=0x4b5612a0)\n    at src/scheduler.c:231\n#21 0x477121c0 in Parrot_cx_outer_runloop (interp=0x42f5db00)\n    at src/scheduler.c:149\n#22 0x4771255c in Parrot_cx_begin_execution (interp=0x42f5db00, \n---Type \u003creturn\u003e to continue, or q \u003creturn\u003e to quit---\n    main=0x4b561778, argv=0x4b5613f4) at src/scheduler.c:109\n#23 0x47727fec in Parrot_pf_execute_bytecode_program (interp=0x42f5db00, \n    pbc=0x4b561c50, args=0x4b5613f4) at src/packfile/api.c:2905\n#24 0x4768f7e0 in Parrot_api_run_bytecode (interp_pmc=0x4ad12750, \n    pbc=0x4b561c50, args=0x4b5613f4) at src/embed/bytecode.c:161\n#25 0x0000b150 in main (argc=5, argv=0xbffeff44) at frontend/parrot2/main.c:186\n```","files":null}]}