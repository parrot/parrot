{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1258840663,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NjA=","github-url":"https://github.com/parrot/parrot/issues/321#issuecomment-3502760"},"message":"\u003cpre class=\"wiki\"\u003e1163 .sub add_using_subclass_of_complex_bug_59630\n1164     skip( 3, 'add using subclass of Complex - TT #1318' )\n1165     .return()\n1166\n\u003c/pre\u003e","files":null},{"type":3,"author":{"id":"099af60226e2576bd4ff0f5c2614b710c745cab6"},"timestamp":1259643924,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NjE=","github-url":"https://github.com/parrot/parrot/issues/321#issuecomment-3502761"},"message":"\u003cp\u003e\nHello.\n\u003c/p\u003e\n\n\u003cp\u003e\nYes, test can be unskipped. Unfortunately it will not pass. Major problem is in interaction between Object, PMCProxy and get_attr_str (used in auto_attrs). Currently Complex.add(Complex) invoked propely. But GETATTR_(re|im) fail to fetch correct values because it should fetch real object from PMCProxy before fetching attributes.\n\u003c/p\u003e\n\n\u003cp\u003e\n--\nBacek\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"96fb2e2e33b59677e3a85ec74746c085275c50d1"},"timestamp":1259788484,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NjI=","github-url":"https://github.com/parrot/parrot/issues/321#issuecomment-3502762"},"message":"\u003cp\u003e\nI did some tests on this and simplified the basic test in t/pmc/complex.t\n\u003c/p\u003e\n\n\u003cpre class=\"wiki\"\u003e#! parrot\n.sub main :main\n    .include 'test_more.pir'\n    .include 'fp_equality.pasm'\n    .include \"iglobals.pasm\"\n    plan(3)\n    $P0 = subclass 'Complex', 'MyComplex'\n    addattribute $P0, \"re\"\n    addattribute $P0, \"im\"\n    .local pmc a, b, c\n    ##   a = 1 + 2i\n    a = new ['MyComplex']\n    a['real'] = 1\n    a['imag'] = 2\n    is( a, \"1+2i\", 'a created' )\n    ##   b = 3 + 4i\n    b = new ['MyComplex']\n    b['real'] = 3\n    b['imag'] = 4\n    is( b, \"3+4i\" , 'b created' )\n    ##   a = a + b\n    a = add a, b\n    is( a, \"4+6i\", 'subclass add' )\n.end\n\u003c/pre\u003e\u003cp\u003e\ngiving the following results:\n\u003c/p\u003e\n\u003cpre class=\"wiki\"\u003emhb@mhb-desktop:~/parrot$ date\nWed Dec  2 13:09:06 GMT 2009\nmhb@mhb-desktop:~/parrot$ prove -v t/pmc/sub_comp.t\nt/pmc/sub_comp.t ..\n1..3\nok 1 - a created\nok 2 - b created\nnot ok 3 - subclass add\n\n# Have: 0+0i\n\n# Want: 4+6i\n\nFailed 1/3 subtests\n\n## Test Summary Report\n\nt/pmc/sub_comp.t (Wstat: 0 Tests: 3 Failed: 1)\n  Failed test:  3\nFiles=1, Tests=3,  0 wallclock secs ( 0.02 usr  0.00 sys +  0.01 cusr  0.02 csys =  0.05 CPU)\nResult: FAIL\n\u003c/pre\u003e\u003cp\u003e\nSo it looks like the subclassed add always returns 0+0i\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"96fb2e2e33b59677e3a85ec74746c085275c50d1"},"timestamp":1259789437,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI3NjM=","github-url":"https://github.com/parrot/parrot/issues/321#issuecomment-3502763"},"message":"\u003cp\u003e\nthis looks like the problem specified in TT \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/562\" title=\"bug: subclassing basic number types fails to inherit basic ops like add, sub, ... (new)\"\u003e#562\u003c/a\u003e\n\u003c/p\u003e","files":null}]}