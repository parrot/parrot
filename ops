{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1267179948,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODAy","github-url":"https://github.com/parrot/parrot/issues/594","origin":"github"},"title":"P6metaclass.register does not catch second registration of PMC Class","message":"Registering a PMC class works. Registering the same class a second time does not produce a diagnostic - although attempting to register a non-PMC class twice does.\n\nAlso, the second register produces some horrible results.\n\n```\nmain();\n\nsub main() {\n    pir::load_bytecode('dumper.pbc');\n    pir::load_bytecode('P6object.pbc');\n    my $nsp;\n\n\n    $nsp := Q:PIR {\n        %r = get_hll_namespace ['Key']\n    };\n    _dumper($nsp);\n\n    P6metaclass.register('Key');\n\n    $nsp := Q:PIR {\n        %r = get_hll_namespace ['Key']\n    };\n    _dumper($nsp);\n\n\n    P6metaclass.register('Key');\n\n    $nsp := Q:PIR {\n        %r = get_hll_namespace ['Key']\n    };\n    _dumper($nsp);\n}\n```\n\nOriginally http://trac.parrot.org/parrot/ticket/1481","files":null}]}