{"version":1,"ops":[{"type":1,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1347482335,"metadata":{"github-id":"MDU6SXNzdWU2ODMxMDYw","github-url":"https://github.com/parrot/parrot/issues/827","origin":"github"},"title":"t/src/embed.t, t/src/extend.t: test failures on Darwin/Intel","message":"On parrot-dev, dukeleto and I each reported test failures in the 'threads' branch when run on Darwin/Intel.  It appears that the threads branch has been merged into master without diagnosing or correcting these problems.  Consequently, we now have test failures in master when run on Darwin/Intel.\n\nI can reproduce these failures as follows:\n\n```\n$ export DYLD_LIBRARY_PATH=/Users/\u003cusername\u003e/gitwork/parrot/blib/lib/\n$ perl t/harness --gc-debug t/src/embed.t t/src/extend.t\n===(       2;0   1/13   1/19 )==========================================\n#   Failed test 'Minimal embed, create multiple interps without giving 1st interp to Parrot_interp_new '\n#   at t/src/embed.t line 113.\n# Exited with error code: [SIGNAL 6]\n# Received:\n# \n# Expected:\n# Done\n# Really done\n# \n===(      23;3   6/13  17/19 )==========================================\n#   Failed test 'multiple Parrot_interp_new/Parrot_x_exit cycles'\n#   at t/src/extend.t line 727.\n# Exited with error code: [SIGNAL 6]\n# Received:\n# Starting interp 1\n# Destroying interp 1\n# Starting interp 2\n# Destroying interp 2\n# \n# Expected:\n# Starting interp 1\n# Destroying interp 1\n# Starting interp 2\n# Destroying interp 2\n# \n# Looks like you failed 1 test of 19.\nt/src/extend.t .. Dubious, test returned 1 (wstat 256, 0x100)           \nFailed 1/19 subtests \nt/src/embed.t ... 8/13 \nnot ok 8 - calling a sub with string argument and return a string # TODO Must explicitly set a PIR compreg\nt/src/embed.t ... 9/13 not ok 9 - returning a Float PMC # TODO Must explicitly set a PIR compreg\nnot ok 10 - returning two Float PMCs in a ResizablePMCArray # TODO Must explicitly set a PIR compreg\nnot ok 11 - calling a sub with string argument and return a numeric # TODO Must explicitly set a PIR compreg\nt/src/embed.t ... 12/13 not ok 12 - Insert external sub in namespace # TODO Must explicitly set a PIR compreg\nok 13 # skip TT #306; many symbols not exported, embedding parrot fails\n# Looks like you failed 1 test of 13.\nt/src/embed.t ... Dubious, test returned 1 (wstat 256, 0x100)\nFailed 1/13 subtests \n    (less 1 skipped subtest: 11 okay)\n\nTest Summary Report\n-------------------\nt/src/extend.t (Wstat: 256 Tests: 19 Failed: 1)\n  Failed test:  19\n  Non-zero exit status: 1\nt/src/embed.t (Wstat: 256 Tests: 13 Failed: 1)\n  Failed test:  2\n  Non-zero exit status: 1\nFiles=2, Tests=32,  6 wallclock secs ( 0.05 usr  0.01 sys +  3.45 cusr  1.40 csys =  4.91 CPU)\nResult: FAIL\n```","files":null}]}