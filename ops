{"version":1,"ops":[{"type":1,"author":{"id":"b06e3ac6b5400499d4c972ae8fd19b799ea1eb1f"},"timestamp":1257713562,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODA2","github-url":"https://github.com/parrot/parrot/issues/598","origin":"github"},"title":"docs/parrotbyte.pod \u0026\u0026 docs/pdds/pdd13_bytecode.pod are either incorrect/unclear","message":"```\nfixup_unpack() in src/packfile.c contains the following code:\n\nfor (i = 0; i \u003c self-\u003efixup_count; i++) {\nPackFile_FixupEntry * const entry =\nself-\u003efixups[i] =\nmem_allocate_typed(PackFile_FixupEntry);\nentry-\u003etype = PF_fetch_opcode(pf, \u0026cursor);\nswitch (entry-\u003etype) {\ncase enum_fixup_label:\ncase enum_fixup_sub:\nentry-\u003ename = PF_fetch_cstring(pf, \u0026cursor);\nentry-\u003eoffset = PF_fetch_opcode(pf, \u0026cursor);\nbreak;\ncase enum_fixup_none:\nbreak;\ndefault:\nPIO_eprintf(interp,\n\"PackFile_FixupTable_unpack: Unknown fixup type\n%d!\\n\",\nentry-\u003etype);\nreturn NULL;\n}\n}\n```\n\nAnd include/parrot/packfile.h has the following:\n\n```\ntypedef enum {\nenum_fixup_none,\nenum_fixup_label,\nenum_fixup_sub\n} enum_fixup_t;\n```\n\nWhen walking through fixup_unpack() in GDB, I get the following:\n\n```\n\nBreakpoint 4, fixup_unpack (interp=0x805f7e0, seg=0x825c5d8,\ncursor=0x9d570120) at src/packfile.c:3043\n...\n...\n3072 entry-\u003etype = PF_fetch_opcode(pf, \u0026cursor);\n(gdb) n\n3073 switch (entry-\u003etype) {\n(gdb) p entry-\u003etype\n$13 = 2\n```\n\nHowever, the docs -- namely docs/pdds/pdd13_bytecode.pod (in the section\ntitled \"Fixup Segment\") and docs/parrotbyte.pod (in the section \"Fixup\nsegment\") say that the type for a subroutine fixup should be 0x01, not 0x02\n...\n\nThis should either be corrected if wrong, or the docs should be cleared up a\nbit otherwise to make the meaning more clear.\n\nThanks,\nJesse Taylor\n\nPREVIOUSLY tracked by RT#51634.\n\nOriginally http://trac.parrot.org/parrot/ticket/1237","files":null}]}