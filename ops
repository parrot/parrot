{"version":1,"ops":[{"type":3,"author":{"id":"4fb4d0813c4a8ce8e1dee50feb91464c67ac79db"},"timestamp":1305153786,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2NzI=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502672"},"message":"2801 byte attachment from colomon\nat http://trac.parrot.org/parrot/raw-attachment/ticket/2107/pcre-bug\n\n```\nSummary: \"Failed to load libpcre\" during build\nReported by: colomon@gmail.com\n---\nUsing RELEASE_3_3_0-199-g3b374ae, I get the following (under OS X):\n\nFailed to load libpcre\ncurrent instr.: 'parrot;PCRE;init' pc 0 (runtime/parrot/library/pcre.pir:57)\ncalled from Sub 'read_one_sig' pc 1943 (tools/dev/nci_thunk_gen.pir:854)\ncalled from Sub 'read_sigs' pc 1864 (tools/dev/nci_thunk_gen.pir:816)\ncalled from Sub 'main' pc 40 (tools/dev/nci_thunk_gen.pir:48)\ngmake: *** [src/glut_nci_thunks.c] Error 1\nCommand failed (status 512): gmake install-dev\nError while executing perl build/gen_parrot.pl --prefix=/Users/colomon/sol/temp/rakudo/parrot_install --gc=gms --optimize; aborting\n```\n\nI've been successfully building Parrot this way for years, so this would appear to be a fairly recent change.  Scuttlebutt on #perl6 is that other people have seen this problem as well.\n\n```\n---\nosname= darwin\nosvers= 9.0\narch=   darwin-thread-multi-2level\ncc=     cc\n---\nFlags:\n    category=core\n    severity=high\n    ack=no\n---\nSummary of my parrot 3.3.0 (r1) configuration:\n  configdate='Wed May 11 18:47:17 2011 GMT'\n  Platform:\n    osname=darwin, archname=darwin-multi-2level\n    perl=perl\n  Compiler:\n    cc='/usr/bin/gcc-4.0', ccflags='-O2 -fno-common -I/opt/local/include -no-cpp-precomp  -pipe -fstack-protector -I/opt/local/include -pipe -fno-common  -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DDISABLE_GC_DEBUG=1 -DNDEBUG -DHAS_GETTEXT',\n  Linker and Libraries:\n    link='c++', linkflags='-undefined dynamic_lookup -L/opt/local/lib',\n    ld='c++', ldflags='-L/opt/local/lib -fstack-protector -L\"/Users/colomon/sol/temp/rakudo/parrot/blib/lib\"',\n    cc_ldflags='',\n    libs='-lm -lutil -lgmp -lreadline -lintl'\n  Dynamic Linking:\n    cc_shared=' ',\n    link_dynamic=' ',\n    ld_share_flags='-dynamiclib -undefined dynamic_lookup',\n    ld_load_flags='-undefined dynamic_lookup -bundle'\n  Extensions:\n    o='.o', a='.a', exe='',\n    share_ext='.dylib', load_ext='.bundle'\n  Misc Programs:\n    ar='ar', ranlib='ranlib',\n    make='gmake', make_set_make='#'\n  Types:\n    iv=long, intvalsize=4, intsize=4, opcode_t=long, opcode_t_size=4,\n    ptrsize=4,  byteorder=1234, \n    nv=double, numvalsize=8, doublesize=8, longdoublesize=16\n\n---\nEnvironment:\n    DYLD_LIBRARY_PATH =:/usr/local/netpbm/lib\n    HOME =/Users/colomon\n    LANG =en_US.UTF-8\n    LANGUAGE  (unset)\n    LC_CTYPE =en_US.UTF-8\n    LD_LIBRARY_PATH  (unset)\n    LOGDIR  (unset)\n    PATH =/Users/colomon/.perl6/bin:/opt/local/bin:/opt/local/sbin::/Users/colomon/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/opt/local/bin:/usr/local/git/bin:/usr/local/netpbm/bin\n    SHELL =/bin/bash\n```","files":null},{"type":3,"author":{"id":"e41900fa9f21c4a8ffab68b60545716ff2bd759d"},"timestamp":1305172401,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2NzM=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502673"},"message":"\u003cp\u003e\nI have the same problem (linux, amd64), worked around it using --without-pcre as a build parameter.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"4fb4d0813c4a8ce8e1dee50feb91464c67ac79db"},"timestamp":1305172489,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2NzQ=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502674"},"message":"\u003cp\u003e\nI should have said that I worked around it the same way.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1305184635,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2NzU=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502675"},"message":"\u003cp\u003e\nCould I ask that this ticket be evaluated in consideration with these currently open tickets that appear to touch on PCRE?\n\u003c/p\u003e\n\n\u003cp\u003e\nTT \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/2028\" title=\"deprecation: pcre is deprecated (new)\"\u003e#2028\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\nTT \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/2024\" title=\"bug: t/library/pcre.t: Not honoring '--without-pcre' configuration flag (new)\"\u003e#2024\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\nTT \u003ca class=\"new ticket\" href=\"http://trac.parrot.org/parrot/ticket/1795\" title=\"bug: pcre_compile picked wrong function signature letter. (new)\"\u003e#1795\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1309377392,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2NzY=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502676"},"message":"\u003cp\u003e\nAdditional PCRE-related build failure reported today:\n\u003c/p\u003e\n\n\u003cp\u003e\n\u003ca   href=\"https://gist.github.com/1053756\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003eConfigure.pl output\u003c/a\u003e\n\u003c/p\u003e\n\n\u003cp\u003e\n\u003ca   href=\"https://gist.github.com/1053747\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003emake output\u003c/a\u003e\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"76484e451c8adcf68d1a41e60ab7fdf43d921282"},"timestamp":1312320629,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2Nzc=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502677"},"message":"\u003cp\u003e\nMvG++ posted a patch at \u003ca   href=\"https://github.com/parrot/parrot/pull/144\"\u003e\u003cspan class=\"icon\"\u003e \u003c/span\u003ehttps://github.com/parrot/parrot/pull/144\u003c/a\u003e -- somebody please review and apply it.\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"3771fd696fba286f6d0b9544dc89da489f0c740e"},"timestamp":1312321681,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2Nzg=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502678"},"message":"\u003cp\u003e\nmerged in 2d6e52a64f865819d73ed59e37496c0b20d39457, test welcome\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1313138764,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MDI2Nzk=","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-3502679"},"message":"\u003cp\u003e\nReplying to \u003ca href=\"http://trac.parrot.org/parrot/ticket/2107#comment:9\" title=\"Comment 9 for Ticket #2107\"\u003ejimmy\u003c/a\u003e:\n\u003c/p\u003e\n\n\u003cblockquote class=\"citation\"\u003e\n\u003cp\u003e\n merged in 2d6e52a64f865819d73ed59e37496c0b20d39457, test welcome\n\u003c/p\u003e\n\u003c/blockquote\u003e\n\n\u003cp\u003e\nWould it be possible for you to write such a test?\n\u003c/p\u003e\n\n\u003cp\u003e\nThank you very much.\n\u003c/p\u003e\n\n\u003cp\u003e\nkid51\n\u003c/p\u003e","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1355293465,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMjc4MjM0","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-11278234"},"message":"Can anybody comment on the status of this issue?","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1355364495,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMzE5Mjcw","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-11319270"},"message":"1. Tonight I installed pcre on a Darwin/Intel box where it was not previously installed.  I used 'homebrew' and it installed pcre version 8.31 -- though, curiously, Configure.pl reported finding version 8.02.  Nonetheless, 'make' proceeded without incident and the only failure in 'make test' was that in 'ext/nqp-rx/t/nqp/46-charspec.t' that has previously been reported.\n2. Some time ago I installed PCRE on my Linode.  Configure.pl reports finding version 7.6 and this has not posed any 'make' or 'make test' problems in a long time.","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1356624412,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExNzExMDY1","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-11711065"},"message":"Fixed on gentoo https://bugs.gentoo.org/show_bug.cgi?id=377379#c11\nTried ok on win32-gcc and my linux and darwin boxes (never failed there)\n\nStill failing on my failing darwin/ppc box with macports, because `/opt/local/lib` is in the gcc libsearch path and \n`-L/opt/local/lib` was added by hints so the conf probe passes, but is not in the parrot loadlib search path, \nnor the ld loader path, so `Parrot_dyn_load_lib` fails.","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1356626002,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExNzExNzA5","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-11711709"},"message":"I'll add a new `dynext_libs` config entry, a env_search_path_sep seperated list of lib paths, \nfilled by hints (later maybe by a commandline option) - for now only by fink and macports - \n\nand add these libs if not empty to the PARROT_LIB_PATH_DYNEXT. Otherwise the runtime will never know that the build system used a proper libpath.\n\nSee branch `rurban/pcre-dynext_libs-gh302`","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1356638970,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExNzE3MDcx","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-11717071"},"message":"Fixed with f1f4f4e","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1357148431,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExODE2NjY2","github-url":"https://github.com/parrot/parrot/issues/302#issuecomment-11816666"},"message":"Fixed with fa141227955afc4686fd88534d6fef4b2f2e45e2, the merge of rurban/pcre-dynext_libs-gh302\n\ndynext_libs subsequently renamed to dynext_dirs","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1357148431,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzMyMzA1Njc="},"status":2}]}