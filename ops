{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354584456,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgwMzM3","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10980337"},"message":"https://gist.github.com/4199684  is the build log","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354584535,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgwMzY0","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10980364"},"message":"I recall seeing \"'runtime/parrot/include/config.fpmc' is truncated\" in the past, but that's probably \u003e 2 years past.","files":null},{"type":3,"author":{"id":"099af60226e2576bd4ff0f5c2614b710c745cab6"},"timestamp":1354586751,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgxMjQz","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10981243"},"message":"Hello.\n\nUsually it's caused by segfault of miniparrot.\n\n## \n\nBacek\n\nOn Tue, Dec 4, 2012 at 12:28 PM, James E Keenan notifications@github.comwrote:\n\n\u003e I recall seeing \"'runtime/parrot/include/config.fpmc' is truncated\" in the\n\u003e past, but that's probably \u003e 2 years past.\n\u003e \n\u003e —\n\u003e Reply to this email directly or view it on GitHubhttps://github.com/parrot/parrot/issues/871#issuecomment-10980364.","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354587840,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgxNjAz","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10981603"},"message":"Resuming the diagnosis, I tried to rerun make's last command:\n\n```\n./miniparrot -Iruntime/parrot/include config_lib.pir \u003e runtime/parrot/include/config.fpmc\n```\n\nSince no error was reported, I once again ran 'make'.  I got this:\n\n```\n/usr/bin/gcc -I./include -I./include/pmc -pipe -fno-common -Wno-long-double  \\\n-isystem /sw/include -isystem /opt/local/include -DHASATTRIBUTE_CONST  \\\n-DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  \\\n-DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  \\\n-DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  \\\n-DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHAS_GETTEXT -g   \\\n -falign-functions=16 -funit-at-a-time -Wall -Wextra -Waggregate-return \\\n-Wcast-align -Wcast-qual -Wdisabled-optimization -Wdiv-by-zero \\\n-Wendif-labels -Wformat-extra-args -Wformat-nonliteral -Wformat-security \\\n-Wformat-y2k -Wimplicit -Wimport -Winit-self -Winline -Winvalid-pch \\\n-Wmissing-declarations -Wno-missing-format-attribute -Wmissing-include-dirs \\\n-Wmultichar -Wpacked -Wpointer-arith -Wreturn-type -Wsequence-point \\\n-Wsign-compare -Wstrict-aliasing -Wstrict-aliasing=2 -Wswitch -Wswitch-default \\\n-Wno-unused -Wvariadic-macros -Wwrite-strings -Wmissing-prototypes \\\n-fvisibility=hidden -Isrc -Isrc/ -o src/parrot_config.o -c src/parrot_config.c\nsrc/parrot_config.c:17: error: parse error at end of input\nmake: *** [src/parrot_config.o] Error 1\n```\n\nWhen I looked at src/parrot.c, it consisted solely of this:\n\n```\n/* ex: set ro:\n * !!!!!!!   DO NOT EDIT THIS FILE   !!!!!!!\n *\n * This file is generated automatically by tools/build/parrot_config_c.pl.\n *\n * Any changes made here will be lost!\n *\n */\n\n#include \u003cstdio.h\u003e\n#include \"parrot/api.h\"\n\nint Parrot_set_config_hash(Parrot_PMC interp_pmc);\nconst unsigned char * Parrot_get_config_hash_bytes(void);\nint Parrot_get_config_hash_length(void);\n\nstatic const unsigned char parrot_config[] = {\n```\n\nSo there was, indeed, truncation.","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354589019,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgxOTg4","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10981988"},"message":"miniparrot created truncated file\n\n```\n$ ./miniparrot -Iruntime/parrot/include config_lib.pir \u003e runtime/parrot/include/config.fpmc\n$ ls -l runtime/parrot/include/config.fpmc\n-rw-r--r--   1 jimk  jimk  0 Dec  3 21:40 runtime/parrot/include/config.fpmc\n```","files":null},{"type":3,"author":{"id":"099af60226e2576bd4ff0f5c2614b710c745cab6"},"timestamp":1354589028,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgxOTkw","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10981990"},"message":"Hello.\n\nJust run \"echo $?\" after miniparrot. It will show exit status. I suspect\nyou'll get 139 - segfault.\n\n## \n\nBacek\n\nOn Tue, Dec 4, 2012 at 1:24 PM, James E Keenan notifications@github.comwrote:\n\n\u003e Resuming the diagnosis, I tried to rerun make's last command:\n\u003e \n\u003e ./miniparrot -Iruntime/parrot/include config_lib.pir \u003e runtime/parrot/include/config.fpmc\n\u003e \n\u003e Since no error was reported, I once again ran 'make'. I got this:\n\u003e \n\u003e /usr/bin/gcc -I./include -I./include/pmc -pipe -fno-common -Wno-long-double  \\\n\u003e -isystem /sw/include -isystem /opt/local/include -DHASATTRIBUTE_CONST  \\\n\u003e -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  \\\n\u003e -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  \\\n\u003e -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  \\\n\u003e -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHAS_GETTEXT -g   \\\n\u003e  -falign-functions=16 -funit-at-a-time -Wall -Wextra -Waggregate-return \\\n\u003e -Wcast-align -Wcast-qual -Wdisabled-optimization -Wdiv-by-zero \\\n\u003e -Wendif-labels -Wformat-extra-args -Wformat-nonliteral -Wformat-security \\\n\u003e -Wformat-y2k -Wimplicit -Wimport -Winit-self -Winline -Winvalid-pch \\\n\u003e -Wmissing-declarations -Wno-missing-format-attribute -Wmissing-include-dirs \\\n\u003e -Wmultichar -Wpacked -Wpointer-arith -Wreturn-type -Wsequence-point \\\n\u003e -Wsign-compare -Wstrict-aliasing -Wstrict-aliasing=2 -Wswitch -Wswitch-default \\\n\u003e -Wno-unused -Wvariadic-macros -Wwrite-strings -Wmissing-prototypes \\\n\u003e -fvisibility=hidden -Isrc -Isrc/ -o src/parrot_config.o -c src/parrot_config.c\n\u003e src/parrot_config.c:17: error: parse error at end of input\n\u003e make: **\\* [src/parrot_config.o] Error 1\n\u003e \n\u003e When I looked at src/parrot.c, it consisted solely of this:\n\u003e \n\u003e /\\* ex: set ro:\n\u003e - !!!!!!!   DO NOT EDIT THIS FILE   !!!!!!!\n\u003e   *\n\u003e - This file is generated automatically by tools/build/parrot_config_c.pl.\n\u003e   *\n\u003e - Any changes made here will be lost!\n\u003e   *\n\u003e   */\n\u003e \n\u003e #include \u003cstdio.h\u003e\n\u003e #include \"parrot/api.h\"\n\u003e \n\u003e int Parrot_set_config_hash(Parrot_PMC interp_pmc);\n\u003e const unsigned char \\* Parrot_get_config_hash_bytes(void);\n\u003e int Parrot_get_config_hash_length(void);\n\u003e \n\u003e static const unsigned char parrot_config[] = {\n\u003e \n\u003e So there was, indeed, truncation.\n\u003e \n\u003e —\n\u003e Reply to this email directly or view it on GitHubhttps://github.com/parrot/parrot/issues/871#issuecomment-10981603.","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354589675,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgyMjA3","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10982207"},"message":"No, I got a simple 1:\n\n```\n$ ./miniparrot -Iruntime/parrot/include config_lib.pir \u003e runtime/parrot/include/config.fpmc\n$ echo $?\n1\n```","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1354590324,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgyNDYx","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10982461"},"message":"@jkeenan is your disk full by any chance?","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354591323,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTgyNzg3","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10982787"},"message":"No, it's at 89%, which is where it usually is.  That was one of the first things I checked.","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1354608844,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTg3ODIy","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10987822"},"message":"Gisting the output of this might give us more details:\n\nsudo dtruss ./miniparrot -Iruntime/parrot/include config_lib.pir\n\ndtruss is like strace on Linux and requires root privs to run.","files":null},{"type":3,"author":{"id":"507abfae537e007c08969e763a32a0acbd878b1b"},"timestamp":1354611129,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwOTg4Njk4","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-10988698"},"message":"Note that a segfault is not the only reason for miniparrot to exit. It may also be just an abort() or a Parrot exception that doesn't make it to the terminal. Could you run the miniparrot call in a debugger and add break points on exit() and Parrot_confess()?","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354676082,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMDI2MTgw","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-11026180"},"message":"Unfortunately, this version of Darwin is too old to support dtruss.  However, once upon a time Nick Clark was able to diagnose a problem on this machine by having me do 'ktrace' and 'kdump'.  So I have provided such a dump in this gist:\n\nhttps://gist.github.com/4211696","files":null},{"type":4,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354764295,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzEzMTEwMzk="},"status":2},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354764323,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMDcxODA2","github-url":"https://github.com/parrot/parrot/issues/871#issuecomment-11071806"},"message":"I can confirm that as of commit 4aee736ecd3b1a4556ce27f553961624751540e4, Parrot once again builds on Darwin/PPC -- 11+ years!\n\nAnd except for the ICU-related failure being handled in Issue #874, 'make test' passed as well.\n\nClosing ticket. Thank you very much.","files":null}]}