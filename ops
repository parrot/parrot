{"version":1,"ops":[{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1320118372,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1ODY0MDQ=","github-url":"https://github.com/parrot/parrot/issues/187#issuecomment-2586404"},"message":"I am +1 to merge this.\n\nJim: In the future for other branches, you can go to branch link ( i.e.\nhttps://github.com/parrot/parrot/tree/jkeenan/reposition_archive_tarball ) and\nclick \"pull request\".\n\nAn issue and pull request will be opened that are connected, and a commit diff\nwill appear as well. You can currently look at\nhttps://github.com/parrot/parrot/compare/master...jkeenan%2Freposition_archive_tarball\nto see the diff from master. Doing it the \"pull request\" way will also show all\ncommit messages that mention the commit (for this, it would be all commit\nmessages containing #187). Hope that helps.","files":null},{"type":3,"author":{"id":"aef4977f5ea786238d7c9581a2f192f4adc3f39d"},"timestamp":1320150922,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1ODk3MTE=","github-url":"https://github.com/parrot/parrot/issues/187#issuecomment-2589711"},"message":"I think that's a pretty great idea. I haven't tried to really unpack\nthe tarball and examine the contents myself, but anything we can do to\nfollow the principle of least-surprise would be a good idea.\n\nAlso, if people are getting parrot through a source tarball or\nsomething, getting their files back might be a little bit more\ncomplicated than a git checkout.  I don't think too many people are\ngoing to do it that way, but it's still a good thing to protect\nagainst.\n\n+1\n\n--Andrew Whitworth\n\nOn Mon, Oct 31, 2011 at 9:09 PM, James E Keenan\nreply@reply.github.com\nwrote:\n\n\u003e Currently, running any of the following commands ...\n\u003e \n\u003e  perl t/harness --archive\n\u003e  perl t/fullharness --archive\n\u003e  make smolder_test\n\u003e  make smoke\n\u003e  make smolder_fulltest\n\u003e \n\u003e ... will create a tarball called 'parrot_test_run.tar.gz' that sits in the top-level directory of the Parrot distribution.  This tarball is suitable for uploading to our Smolder server -- but don't try to peek inside!\n\u003e \n\u003e Should you decompress and untar this archive ...\n\u003e \n\u003e  tar xzf parrot_test_run.tar.gz\n\u003e \n\u003e ... you will overwrite all the files in t/, as well as a couple of other files like 'config_lib.pir', 'myconfig', 'README', etc.  You will discover that, e.g., the files under t/ now contain the TAP output from running the tests -- not the source code of the tests.\n\u003e \n\u003e The reason for this is that (for reasons extrinsic to Parrot) TAP::Harness::Archive adds files to an archive without first creating a separate top-level directory.  I think this is conceptually erroneous, but since it works with Smolder, we have to live with it.\n\u003e \n\u003e But we don't have to live with the risk of overwriting our source-code files.  Granted, you can restore your files with a series of commands like:\n\u003e \n\u003e  git checkout -- t/\n\u003e \n\u003e ... but that gets tedious.  As an expedient, I recommend that we create a new subdirectory, t/archive/, solely for the purpose of creating the archive in a place where it can be safely decompressed and untarred.\n\u003e \n\u003e I have created the jkeenan/reposition_archive_tarball branch in git to hold code which implements this functionality.  I have successfully created both a regular, 't/harness' archive and a 't/fullharness' archive there and sent them to Smolder (e.g., http://smolder.parrot.org/app/projects/report_details/24230 and http://smolder.parrot.org/app/projects/report_details/24232).  This diff may be helpful:  git diff f7b8d31f8..4603865e\n\u003e \n\u003e Please review.\n\u003e \n\u003e ## \n\u003e \n\u003e Reply to this email directly or view it on GitHub:\n\u003e https://github.com/parrot/parrot/issues/187","files":null},{"type":4,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1320191182,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NDkyMzEyNg=="},"status":2},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1320191190,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1OTc4MDA=","github-url":"https://github.com/parrot/parrot/issues/187#issuecomment-2597800"},"message":"Merged.\n\ncommit 9e917359122e7aa27359f57162aef2d8465830b0\nMerge: 7fcdbb3... 4603865...\nAuthor: jkeenan jkeenan@cpan.org\nDate:   Tue Nov 1 19:29:59 2011 -0400\n\n```\nMerge branch 'jkeenan/reposition_archive_tarball'\n```","files":null}]}