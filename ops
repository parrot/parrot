{"version":1,"ops":[{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1327168669,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1OTc3Mjc=","github-url":"https://github.com/parrot/parrot/issues/703#issuecomment-3597727"},"message":"What is happening is primarily that files generated during configuration, build or testing have not been added to the appropriate `clean` targets in `config/gen/makefiles/root.in`.\n\nIn the `kid51/makefiles_more_clean` branch I have made commits which get us _most_ of the way toward a solution to this problem.  In this branch, once I have run `make realclean` I can run (on my Linux/i386 machine) the program underlying `make manitest`, `perl tools/dev/manicheck.pl`, and get this result:\n\n\u003cpre\u003e\n$ perl tools/dev/manicheck.pl \nFound 7817 distinct files among MANIFEST and directory contents.\n\n      0 missing\n      0 extra\n\u003c/pre\u003e\n\n\n`make manitest`, however, is more problematic.  Since it is a `make` target, by definition it cannot be run immediately after `make realclean`, because that command deletes all the makefiles.  So what happens if I run `perl Configure.pl` and generate the makefiles, then run `make manitest` (or, the equivalent, `perl tools/dev/manicheck.pl`)?  I get:\n\n\u003cpre\u003e\n$ perl tools/dev/manicheck.pl \nFound 7845 distinct files among MANIFEST and directory contents.\n\n      0 missing\n     26 extra\n\nExtra files:\n  .parrot_current_rev\n  compilers/imcc/Rules.mak\n  config_lib.pir\n  docs/Makefile\n  editor/Makefile\n  include/parrot/config.h\n  include/parrot/core_pmcs.h\n  include/parrot/feature.h\n  include/parrot/has_header.h\n  lib/Parrot/Config/Generated.pm\n  lib/Parrot/PMC.pm\n  Makefile\n  MANIFEST.configure.generated\n  myconfig\n  runtime/parrot/include/opengl_defines.pasm\n  runtime/parrot/include/signal.pasm\n  runtime/parrot/library/config.pir\n  runtime/parrot/library/OpenGL_funcs.pir\n  src/core_pmcs.c\n  src/dynoplibs/Defines.mak\n  src/dynoplibs/Rules.mak\n  src/dynpmc/Defines.mak\n  src/dynpmc/Rules.mak\n  src/glut_callbacks.c\n  src/glut_nci_thunks.nci\n  tools/dev/mk_language_shell.pl\n\u003c/pre\u003e\n\n\nIn other words, the files generated during configuration now fall into the 'extra' category.  This means that `make manitest`, as currently written is of limited usefulness.  (Perhaps we could make use of the content of `MANIFEST.configure.generated` to improve this situation.)\n\ngerdr:  Can you try out the `kid51/makefiles_more_clean` branch on your machine and report the results?  That would entail running:\n\n\u003cpre\u003e\nmake realclean  \u0026\u0026 perl Configure.pl --test \u0026\u0026 make test \u0026\u0026 make realclean \u0026\u0026 perl tools/dev/manicheck.pl\n\u003c/pre\u003e\n\n\nThank you very much.\nJim Keenan","files":null},{"type":3,"author":{"id":"4277d85693ce7ae3559eb0a94f3b50be93446600"},"timestamp":1327171273,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1OTgwNjU=","github-url":"https://github.com/parrot/parrot/issues/703#issuecomment-3598065"},"message":"@jkeenan result of the above invocation:\n\n```\nFound 3056 distinct files among MANIFEST and directory contents.\n\n      0 missing\n      2 extra\n\nExtra files:\n  libparrot.dll.a\n  parrot.exe.stackdump\n```\n\nwhere `libparrot.dll.a` is the import library accompanying the DLL, and the stackdump is generated by `t/pmc/sub.t`, probably due to issue #276.","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1327189605,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1OTk5NjI=","github-url":"https://github.com/parrot/parrot/issues/703#issuecomment-3599962"},"message":"In e46827e, I added `libparrot.dll.a` to the `prog-clean`target.  So if you repeat the previous procedure, you should see that vanish from 'extra'.  That leaves `parrot.exe.stackdump`.  If that's a side effect of a build error, then it's outside the scope of `MANIFEST` and, presumably this ticket.\n\nThank you very much.\nJim Keenan","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1394553469,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM3MzEyNDYw","github-url":"https://github.com/parrot/parrot/issues/703#issuecomment-37312460"},"message":"All issues already addressed. \nFor a proper test (as well a proper installation) one have to observe the proper build order, as MANIFEST.generated is created dynamically during the build.","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1394553469,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTAwOTE5Mjcz"},"status":2}]}