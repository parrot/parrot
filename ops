{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1268735745,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODY1","github-url":"https://github.com/parrot/parrot/issues/656","origin":"github"},"title":"NQP-rx doesn't create PMC for string // expressions","message":"```\naustin@andLinux:~/kakapo$ cat test.nqp\n\nmy %hash;\n%hash\u003ckey\u003e := 1;\n\n#my $x := ~ %hash\u003ckey\u003e;\nmy $y := ~ %hash\u003ckey\u003e // 'r';\n```\n\nProduces:\n\n```\naustin@andLinux:~/kakapo$ parrot-nqp test.nqp\nNull PMC access in set_string_native()\ncurrent instr.: '_block11' pc 0 (EVAL_1:6)\ncalled from Sub 'parrot;PCT;HLLCompiler;eval' pc -1 ((unknown file):-1)\ncalled from Sub 'parrot;PCT;HLLCompiler;evalfiles' pc 1303 (compilers/pct/src/PCT/HLLCompiler.pir:707)\ncalled from Sub 'parrot;PCT;HLLCompiler;command_line' pc 1489 (compilers/pct/src/PCT/HLLCompiler.pir:794)\ncalled from Sub 'parrot;NQP;Compiler;main' pc -1 ((unknown file):-1)\naustin@andLinux:~/kakapo$ \n```\n\nThe bad part of the code seems to be:\n\n```\n    vivify_13:\n    set $S21, $P20\n    set $P18, $S21\n    defined $I23, $P18\n    if $I23, default_22\n    new $P24, \"String\"\n    assign $P24, \"r\"\n    set $P18, $P24\n```\n\nNote here the use of $P18, which has never been initialized.\n\nOriginally http://trac.parrot.org/parrot/ticket/1510","files":null}]}