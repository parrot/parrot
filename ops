{"version":1,"ops":[{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1338572799,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNjYyOTE=","github-url":"https://github.com/parrot/parrot/issues/777#issuecomment-6066291"},"message":"It seems very reasonable to be able to turn these off. Should they be default? Which behavior is less surprising?","files":null},{"type":3,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1338645433,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNzc2OTA=","github-url":"https://github.com/parrot/parrot/issues/777#issuecomment-6077690"},"message":"Please review the 777/no_pretty_debug branch.  Here is a cumulative diff:\n\n``` perl\ndiff --git a/config/gen/makefiles/root.in b/config/gen/makefiles/root.in\nindex 1cca180..6a5109b 100644\n--- a/config/gen/makefiles/root.in\n+++ b/config/gen/makefiles/root.in\n@@ -639,6 +639,7 @@ all : \\\n #IF(has_dynamic_linking):    $(DYNOPLIBS_TARGETS) \\\n #IF(has_dynamic_linking):    $(LIBNCI_TEST_SO) \\\n    $(GEN_LIBRARY) \\\n+   select_pretty_debug \\\n    src/install_config$(O)\n\n corevm : \\\n@@ -1085,9 +1086,6 @@ $(LIBPARROT_SHARED) : $(O_FILES)\n        $(O_FILES) $(C_LIBS) $(ICU_SHARED)\n #IF(win32):    if exist $@.manifest mt.exe -nologo -manifest $@.manifest -outputresource:$@;2\n #IF(libparrot_shared_alias):   ( cd @blib_dir@ ; ln -sf @libparrot_shared@ @libparrot_shared_alias@ )\n-   $(CP) tools/dev/gdb-pp-load.py @blib_dir@/@libparrot_shared@-gdb.py\n-   $(CP) tools/dev/gdb-pp.py @blib_dir@/GDBPrettyPrint.py\n-   @echo '' \u003e @blib_dir@/__init__.py\n\n $(INSTALLABLECONFIG) : src/install_config$(O) $(PARROT_CONFIG) $(PBC_TO_EXE)\n    $(PARROT) -o parrot_config.pbc $(DEV_TOOLS_DIR)/parrot-config.pir\n@@ -2053,6 +2051,10 @@ pdf:\n pdf-clean:\n    $(MAKE_C) docs pdf-clean\n\n+select_pretty_debug : $(LIBPARROT_SHARED)\n+#IF(no_pretty_debug):  @echo \"Pretty debugging output has explicitly been declined.\"\n+#ELSE: $(CP) tools/dev/gdb-pp-load.py @blib_dir@/@libparrot_shared@-gdb.py \u0026\u0026 $(CP) tools/dev/gdb-pp.py @blib_dir@/GDBPrettyPrint.py \u0026\u0026 echo '' \u003e @blib_dir@/__init__.py\n+\n ###############################################################################\n #\n # compiler implementation targets:\ndiff --git a/config/init/defaults.pm b/config/init/defaults.pm\nindex 96d5f62..1f1bd29 100644\n--- a/config/init/defaults.pm\n+++ b/config/init/defaults.pm\n@@ -89,6 +89,7 @@ sub runstep {\n         optimize  =\u003e '',\n         verbose   =\u003e $conf-\u003eoptions-\u003eget('verbose'),\n         build_dir =\u003e $build_dir,\n+        no_pretty_debug =\u003e $conf-\u003eoptions-\u003eget('no-pretty-debug'),\n         configured_from_file =\u003e\n             $conf-\u003eoptions-\u003eget('configured_from_file') || '',\n         configuration_steps =\u003e ( join q{ } =\u003e $conf-\u003eget_list_of_steps() ),\ndiff --git a/lib/Parrot/Configure/Options/Conf/Shared.pm b/lib/Parrot/Configure/Options/Conf/Shared.pm\nindex 7483958..bb820a5 100644\n--- a/lib/Parrot/Configure/Options/Conf/Shared.pm\n+++ b/lib/Parrot/Configure/Options/Conf/Shared.pm\n@@ -54,6 +54,7 @@ our @shared_valid_options = qw{\n     mandir\n     nomanicheck\n     no-line-directives\n+    no-pretty-debug\n     oldincludedir\n     opcode\n     ops\n```\n\nThere are two issues for code review.\n\nFirst, I have proceeded on the assumption that Parrot's current default behavior -- to implement GDB pretty-printing -- should continue to be default.  That implies that pretty-printing will have to be explicitly turned off with command-line option `--no-pretty-debug`.\n\nSecond, my knowledge of makefiles is very much trial-and-error.  There may be more elegant ways to code the template in `config/gen/makefiles/root.in`.   As a corollary, I should note that this has been tested only with this version of `make`:\n\n```\n$ make --version\nGNU Make 3.81\nCopyright (C) 2006  Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE.\n\nThis program built for i486-pc-linux-gnu\n```\n\nThank you very much.\nJim Keenan","files":null}]}