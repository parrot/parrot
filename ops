{"version":1,"ops":[{"type":1,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1257660443,"metadata":{"github-id":"MDU6SXNzdWUyODQ4Nzky","github-url":"https://github.com/parrot/parrot/issues/584","origin":"github"},"title":"src/pmc/fixedpmcarray.pmc:  get_repr() should use freeze/thaw","message":"This ticket moves an item previously discussed in the RT system at [http://rt.perl.org/rt3/Ticket/Display.html?id=46673 RT 46673] to the TT system.\n\n{{{\n179 =item C\u003cSTRING *get_repr()\u003e\n180 \n181 Returns a string representation of the array contents.\n182 RT #46673 implement freeze/thaw and use that instead.\n183 \n184 =cut\n185 \n186 */\n187 \n188     VTABLE STRING *get_string() {\n189         return Parrot_str_from_int(INTERP, SELF.elements());\n190     }\n191 \n192     VTABLE STRING *get_repr() {\n193         STRING *res    = CONST_STRING(INTERP, \"(\");\n194         const INTVAL n = VTABLE_elements(INTERP, SELF);\n195         INTVAL  i;\n196 \n197         for (i = 0; i \u003c n; ++i) {\n198             PMC \\* const val = SELF.get_pmc_keyed_int(i);\n199             if (i \u003e 0)\n200                 res = Parrot_str_append(INTERP, res, CONST_STRING(INTERP, \",     \"));\n201 \n202             res = Parrot_str_append(INTERP, res, VTABLE_get_repr(INTERP, val    ));\n203         }\n204 \n205         res = Parrot_str_append(INTERP, res, CONST_STRING(INTERP, \")\"));\n206 \n207         return res;\n208     }\n\nkid51\n\nOriginally http://trac.parrot.org/parrot/ticket/1229","files":null}]}