{"version":1,"ops":[{"type":1,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1332258437,"metadata":{"github-id":"MDU6SXNzdWUzNzMwMTkw","github-url":"https://github.com/parrot/parrot/issues/745","origin":"github"},"title":"sh tools/dev/mk_native_pbc fails","message":"```\n$ sh tools/dev/mk_native_pbc \n4: x86_64 double float 64 bit opcode_t, 8-byte double\n\nParrot Version 4.2.0 Configure 2.0\nCopyright (C) 2001-2011, Parrot Foundation.\n\nHello, I'm Configure. My job is to poke and prod your system to figure out\nhow to build Parrot. The process is completely automated, unless you passed in\nthe `--ask' flag on the command line, in which case I'll prompt you for a few\npieces of info.\n\nSince you're running this program, you obviously have Perl 5--I'll be pulling\nsome defaults from its configuration.\n\ninit::manifest -      Check MANIFEST..................................skipped.\ninit::defaults -      Set Configure's default values.....................done.\ninit::install -       Set up installation paths..........................done.\ninit::hints -         Load platform and local hints files................done.\ninter::progs -        Determine what C compiler and linker to use........done.\ninter::make -         Is make installed...................................yes.\ninter::lex -          Is lex installed................................skipped.\ninter::yacc -         Is yacc installed...............................skipped.\nauto::gcc -           Is your C compiler actually gcc................yes, 4.4.\nauto::glibc -         Is GNU libc installed...............................yes.\nauto::backtrace -     Does libc have the backtrace* functions.............yes.\nauto::msvc -          Is your C compiler actually Visual C++..........skipped.\nauto::attributes -    Detect compiler attributes.........................done.\nauto::warnings -      Detect supported compiler warnings.................done.\nauto::arch -          Determine CPU architecture and OS..................done.\nauto::cpu -           Generate CPU specific stuff........................done.\ninit::optimize -      Enable optimization..................................no.\ninter::shlibs -       Determine flags for building shared libraries.....-fPIC.\ninter::libparrot -    Should parrot link against a shared library...\nWarning: Building a shared parrot library may conflict with your previously-installed /home/leto/git/parrot/installed_parrot/lib/libparrot.so\n......yes.\ninter::types -        What types should Parrot use.......................done.\nauto::ops -           Which opcode files should be compiled in...........done.\nauto::pmc -           Which pmc files should be compiled in..............done.\nauto::headers -       Probe for C headers................................done.\nauto::sizes -         Determine some sizes...............................done.\nauto::byteorder -     Compute native byteorder for wordsize.....little-endian.\nauto::va_ptr -        Test the type of va_ptr........................register.\nauto::format -        What formats should be used for sprintf............done.\nauto::isreg -         Does your C library have a working S_ISREG..........yes.\nauto::llvm -          Is minimum version of LLVM installed.................no.\nauto::inline -        Does your compiler support inline...................yes.\nauto::gc -            Determine allocator to use..........................gms.\nauto::memalign -      Does your C library support memalign................yes.\nauto::signal -        Determine some signal stuff........................done.\nauto::socklen_t -     Determine whether there is socklen_t................yes.\nauto::stat -          Detect stat type....................................bsd.\nauto::neg_0 -         Determine whether negative zero can be printed......yes.\nauto::env -           Does your C library have setenv / unsetenv.........both.\nauto::timespec -      Does your system has timespec.......................yes.\nauto::infnan -        Is standard C Inf/NaN handling present..............yes.\nauto::thread -        Does your system has thread.........................yes.\nauto::gmp -           Does your platform support GMP......................yes.\nauto::readline -      Does your platform support readline.................yes.\nauto::pcre -          Does your platform support pcre................yes, 7.8.\nauto::opengl -        Does your platform support OpenGL....................no.\nauto::zlib -          Does your platform support zlib.....................yes.\nauto::gettext -       Does your configuration include gettext.............yes.\nauto::snprintf -      Test snprintf......................................done.\nauto::perldoc -       Is perldoc installed................................yes.\nauto::coverage -      Are coverage analysis tools installed...............yes.\nauto::pod2man -       Is pod2man installed................................yes.\nauto::ctags -         Is (exuberant) ctags installed......................yes.\nauto::revision -      Determine Parrot's revision...........................1.\nauto::icu -           Is ICU installed....................................yes.\nauto::libffi -        Is libffi installed.................................yes.\nauto::ipv6 -          Determine IPV6 capabilities.........................yes.\nauto::platform -      Generate a list of platform object files...........done.\ngen::config_h -       Generate C headers.................................done.\ngen::core_pmcs -      Generate core pmc list.............................done.\ngen::opengl -         Generating OpenGL bindings......................skipped.\ngen::makefiles -      Generate makefiles and other build files...........done.\ngen::config_pm -      Record configuration data for later retrieval......done.\nOkay, we're done!\n\nYou can now use `make' to build your Parrot.\nAfter that, you can use `make test' to run the test suite.\n\nHappy Hacking,\n        The Parrot Team\n\n  Extensions:\n    o='.o', a='.a', exe='',\n    share_ext='.so', load_ext='.so'\n  Misc Programs:\n    ar='ar', ranlib=':',\n    make='make', make_set_make='#'\n  Types:\n    iv=long, intvalsize=8, intsize=4, opcode_t=long, opcode_t_size=8,\n    ptrsize=8,  byteorder=12345678, \n    nv=double, numvalsize=8, doublesize=8, longdoublesize=16\nsrc/runcore/subprof.c: In function ‘dump_profile_data’:\nsrc/runcore/subprof.c:855: warning: format ‘%lld’ expects type ‘long long int’, but argument 4 has type ‘UHUGEINTVAL’\nsrc/runcore/subprof.c:953: warning: format ‘%lld’ expects type ‘long long int’, but argument 4 has type ‘UHUGEINTVAL’\nsrc/packfile/api.c: In function ‘Parrot_pf_tag_constant’:\nsrc/packfile/api.c:377: warning: switch missing default case\nsrc/packfile/api.c: In function ‘Parrot_pf_subs_by_tag’:\nsrc/packfile/api.c:442: warning: switch missing default case\nsrc/pmc/packfileannotation.c: In function ‘Parrot_PackfileAnnotation_nci_get_pmc_value’:\nsrc/pmc/packfileannotation.c:288: warning: cast discards qualifiers from pointer target type\nsrc/pmc/packfileannotation.c: In function ‘Parrot_PackfileAnnotation_nci_get_type’:\nsrc/pmc/packfileannotation.c:357: warning: switch missing default case\ncompilers/imcc/imcc.l:1287: warning: no previous prototype for ‘determine_input_file_type’\nfrontend/parrot2/prt0.pbc.c\nDone reading input\nwriting coda\ncc -o pbc_to_exe.o -I\"/home/leto/git/parrot/include\" -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHASATTRIBUTE_HOT  -DHASATTRIBUTE_COLD  -DHAS_GETTEXT    -c pbc_to_exe.c\nCompiled: pbc_to_exe.o\ncc -o pbc_to_exe \"pbc_to_exe.o\" \"/home/leto/git/parrot/src/parrot_config.o\" \"-Wl,-rpath=/home/leto/git/parrot/blib/lib\" -L\"/home/leto/git/parrot/blib/lib\" -lparrot -Wl,-E  -fstack-protector -L/usr/local/lib -Wl,-E   -ldl -lm -lpthread -lcrypt -lrt -lgmp -lreadline  -lffi    -lm   -L/usr/lib  -licuuc -licudata  -lm   \nLinked: pbc_to_exe\ncc -o parrot_config.o -I\"/home/leto/git/parrot/include\" -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHASATTRIBUTE_HOT  -DHASATTRIBUTE_COLD  -DHAS_GETTEXT    -c parrot_config.c\nCompiled: parrot_config.o\ncc -o parrot_config \"parrot_config.o\" \"/home/leto/git/parrot/src/parrot_config.o\" \"-Wl,-rpath=/home/leto/git/parrot/blib/lib\" -L\"/home/leto/git/parrot/blib/lib\" -lparrot -Wl,-E  -fstack-protector -L/usr/local/lib -Wl,-E   -ldl -lm -lpthread -lcrypt -lrt -lgmp -lreadline  -lffi    -lm   -L/usr/lib  -licuuc -licudata  -lm   \nLinked: parrot_config\ncc -o parrot-nqp.o -I\"/home/leto/git/parrot/include\" -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHASATTRIBUTE_HOT  -DHASATTRIBUTE_COLD  -DHAS_GETTEXT    -c parrot-nqp.c\nCompiled: parrot-nqp.o\ncc -o parrot-nqp \"parrot-nqp.o\" \"/home/leto/git/parrot/src/parrot_config.o\" \"-Wl,-rpath=/home/leto/git/parrot/blib/lib\" -L\"/home/leto/git/parrot/blib/lib\" -lparrot -Wl,-E  -fstack-protector -L/usr/local/lib -Wl,-E   -ldl -lm -lpthread -lcrypt -lrt -lgmp -lreadline  -lffi    -lm   -L/usr/lib  -licuuc -licudata  -lm   \nLinked: parrot-nqp\ncc -o winxed.o -I\"/home/leto/git/parrot/include\" -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHASATTRIBUTE_HOT  -DHASATTRIBUTE_COLD  -DHAS_GETTEXT    -c winxed.c\nCompiled: winxed.o\ncc -o winxed \"winxed.o\" \"/home/leto/git/parrot/src/parrot_config.o\" \"-Wl,-rpath=/home/leto/git/parrot/blib/lib\" -L\"/home/leto/git/parrot/blib/lib\" -lparrot -Wl,-E  -fstack-protector -L/usr/local/lib -Wl,-E   -ldl -lm -lpthread -lcrypt -lrt -lgmp -lreadline  -lffi    -lm   -L/usr/lib  -licuuc -licudata  -lm   \nLinked: winxed\ncc -o ops2c.o -I\"/home/leto/git/parrot/include\" -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHASATTRIBUTE_CONST  -DHASATTRIBUTE_DEPRECATED  -DHASATTRIBUTE_MALLOC  -DHASATTRIBUTE_NONNULL  -DHASATTRIBUTE_NORETURN  -DHASATTRIBUTE_PURE  -DHASATTRIBUTE_UNUSED  -DHASATTRIBUTE_WARN_UNUSED_RESULT  -DHASATTRIBUTE_HOT  -DHASATTRIBUTE_COLD  -DHAS_GETTEXT    -c ops2c.c\nCompiled: ops2c.o\ncc -o ops2c \"ops2c.o\" \"/home/leto/git/parrot/src/parrot_config.o\" \"-Wl,-rpath=/home/leto/git/parrot/blib/lib\" -L\"/home/leto/git/parrot/blib/lib\" -lparrot -Wl,-E  -fstack-protector -L/usr/local/lib -Wl,-E   -ldl -lm -lpthread -lcrypt -lrt -lgmp -lreadline  -lffi    -lm   -L/usr/lib  -licuuc -licudata  -lm   \nLinked: ops2c\nInvoking Parrot to generate install_config.fpmc\nerror:imcc:syntax error, unexpected PARROT_OP ('print')\n    in file '-' line 1\n\ncurrent instr.: '__default_get_packfile' pc 408 (frontend/parrot2/prt0.pir:149)\nt/native_pbc/number_4.pbc updated\nt/native_pbc/string_4.pbc updated\nmake: `pbc_dump' is up to date.\nHEADER =\u003e [\n    wordsize  = 8   (interpreter's wordsize/INTVAL = 8/8)\n    byteorder = 0   (interpreter's byteorder       = 0)\n    floattype = 0   (interpreter's NUMVAL_SIZE     = 8)\n    parrot-version 4.2.0, bytecode-version 12.0\n    UUID: type = 0, size = 0\n    no endianize, no opcode, no numval transform\n    dirformat = 1\n]\nt/native_pbc/integer.t .. skipped: pending robust testing strategy, GH #394\nFiles=1, Tests=0,  0 wallclock secs ( 0.01 usr  0.02 sys +  0.06 cusr  0.00 csys =  0.09 CPU)\nResult: NOTESTS\nParrot Version 4.2.0 Configure 2.0\nCopyright (C) 2001-2011, Parrot Foundation.\n\nHello, I'm Configure. My job is to poke and prod your system to figure out\nhow to build Parrot. The process is completely automated, unless you passed in\nthe `--ask' flag on the command line, in which case I'll prompt you for a few\npieces of info.\n\nSince you're running this program, you obviously have Perl 5--I'll be pulling\nsome defaults from its configuration.\n\ninit::manifest -      Check MANIFEST..................................skipped.\ninit::defaults -      Set Configure's default values.....................done.\ninit::install -       Set up installation paths..........................done.\ninit::hints -         Load platform and local hints files................done.\ninter::progs -        Determine what C compiler and linker to use........done.\ninter::make -         Is make installed...................................yes.\ninter::lex -          Is lex installed................................skipped.\ninter::yacc -         Is yacc installed...............................skipped.\nauto::gcc -           Is your C compiler actually gcc................yes, 4.4.\nauto::glibc -         Is GNU libc installed...............................yes.\nauto::backtrace -     Does libc have the backtrace* functions.............yes.\nauto::msvc -          Is your C compiler actually Visual C++..........skipped.\nauto::attributes -    Detect compiler attributes.........................done.\nauto::warnings -      Detect supported compiler warnings.................done.\nauto::arch -          Determine CPU architecture and OS..................done.\nauto::cpu -           Generate CPU specific stuff........................done.\ninit::optimize -      Enable optimization..................................no.\ninter::shlibs -       Determine flags for building shared libraries.....-fPIC.\ninter::libparrot -    Should parrot link against a shared library...\nWarning: Building a shared parrot library may conflict with your previously-installed /home/leto/git/parrot/installed_parrot/lib/libparrot.so\n......yes.\ninter::types -        What types should Parrot use.......................done.\nauto::ops -           Which opcode files should be compiled in...........done.\nauto::pmc -           Which pmc files should be compiled in..............done.\nauto::headers -       Probe for C headers................................done.\nauto::sizes -         Determine some sizes...............................done.\nauto::byteorder -     Compute native byteorder for wordsize.....little-endian.\nauto::va_ptr -        Test the type of va_ptr........................register.\nauto::format -        What formats should be used for sprintf............done.\nauto::isreg -         Does your C library have a working S_ISREG..........yes.\nauto::llvm -          Is minimum version of LLVM installed.................no.\nauto::inline -        Does your compiler support inline...................yes.\nauto::gc -            Determine allocator to use..........................gms.\nauto::memalign -      Does your C library support memalign................yes.\nauto::signal -        Determine some signal stuff........................done.\nauto::socklen_t -     Determine whether there is socklen_t................yes.\nauto::stat -          Detect stat type....................................bsd.\nauto::neg_0 -         Determine whether negative zero can be printed......yes.\nauto::env -           Does your C library have setenv / unsetenv.........both.\nauto::timespec -      Does your system has timespec.......................yes.\nauto::infnan -        Is standard C Inf/NaN handling present..............yes.\nauto::thread -        Does your system has thread.........................yes.\nauto::gmp -           Does your platform support GMP......................yes.\nauto::readline -      Does your platform support readline.................yes.\nauto::pcre -          Does your platform support pcre................yes, 7.8.\nauto::opengl -        Does your platform support OpenGL....................no.\nauto::zlib -          Does your platform support zlib.....................yes.\nauto::gettext -       Does your configuration include gettext.............yes.\nauto::snprintf -      Test snprintf......................................done.\nauto::perldoc -       Is perldoc installed................................yes.\nauto::coverage -      Are coverage analysis tools installed...............yes.\nauto::pod2man -       Is pod2man installed................................yes.\nauto::ctags -         Is (exuberant) ctags installed......................yes.\nauto::revision -      Determine Parrot's revision...........................1.\nauto::icu -           Is ICU installed....................................yes.\nauto::libffi -        Is libffi installed.................................yes.\nauto::ipv6 -          Determine IPV6 capabilities.........................yes.\nauto::platform -      Generate a list of platform object files...........done.\ngen::config_h -       Generate C headers.................................done.\ngen::core_pmcs -      Generate core pmc list.............................done.\ngen::opengl -         Generating OpenGL bindings......................skipped.\ngen::makefiles -      Generate makefiles and other build files...........done.\ngen::config_pm -      Record configuration data for later retrieval......done.\nOkay, we're done!\n\nYou can now use `make' to build your Parrot.\nAfter that, you can use `make test' to run the test suite.\n\nHappy Hacking,\n        The Parrot Team\n\n  Extensions:\n    o='.o', a='.a', exe='',\n    share_ext='.so', load_ext='.so'\n  Misc Programs:\n    ar='ar', ranlib=':',\n    make='make', make_set_make='#'\n  Types:\n    iv=long, intvalsize=8, intsize=4, opcode_t=long, opcode_t_size=8,\n    ptrsize=8,  byteorder=12345678, \n    nv=long double, numvalsize=16, doublesize=8, longdoublesize=16\nsrc/nci/libffi.c:40:4: error: #error \"unhandled NUMVAL_SIZE value\"\nsrc/nci/libffi.c: In function ‘build_ffi_thunk’:\nsrc/nci/libffi.c:277: error: ‘ffi_type_parrot_numval’ undeclared (first use in this function)\nsrc/nci/libffi.c:277: error: (Each undeclared identifier is reported only once\nsrc/nci/libffi.c:277: error: for each function it appears in.)\nsrc/nci/libffi.c: In function ‘nci_to_ffi_type’:\nsrc/nci/libffi.c:321: error: ‘ffi_type_parrot_numval’ undeclared (first use in this function)\nmake: *** [src/nci/libffi.o] Error 1\n```","files":null}]}