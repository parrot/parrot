{"version":1,"ops":[{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1350072546,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDkzODg2OTk=","github-url":"https://github.com/parrot/parrot/issues/850#issuecomment-9388699"},"message":"Can anybody reproduce this? /cc @Whiteknight @niner","files":null},{"type":3,"author":{"id":"aeaa659130ab92a2084a11638a6eb1a6beb03360"},"timestamp":1352428062,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwMjEzNjIz","github-url":"https://github.com/parrot/parrot/issues/850#issuecomment-10213623"},"message":"This is happening because the task in task-nqp.t is trying to do useful work like call `ok` and access a variable from the parent interp.  If you take those things out (and thereby remove much of the value of the test), the test seems to work fine.  It's also easy to make task.t fail in the same way by using `ok` instead of calling the `say` op directly.","files":null},{"type":3,"author":{"id":"507abfae537e007c08969e763a32a0acbd878b1b"},"timestamp":1352443382,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwMjE2OTQ2","github-url":"https://github.com/parrot/parrot/issues/850#issuecomment-10216946"},"message":"On Thursday 08 November 2012 18:27:44 cotto wrote:\n\n\u003e This is happening because the task in task-nqp.t is trying to do useful work\n\u003e like call `ok` and access a variable from the parent interp.  If you\n\u003e take those things out (and thereby remove much of the value of the test),\n\u003e the test seems to work fine.  It's also easy to make task.t fail in the\n\u003e same way by using `ok` instead of calling the `say` op directly.\n\nThat's the reason why task.t is using say instead of ok. Parrot's Test-More \nuses global variables. Writing to other interp's variables is not allowed. One \nhas to create a task and schedule it on the owning interp to write. Sounds \nvery inconvenient, but remember: simply increasing the variable and then \nprinting would not be thread-safe anyway.\n\nStefan","files":null},{"type":3,"author":{"id":"aeaa659130ab92a2084a11638a6eb1a6beb03360"},"timestamp":1352448544,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwMjE4MTM0","github-url":"https://github.com/parrot/parrot/issues/850#issuecomment-10218134"},"message":"Well phooey.  That suggests that the fix is to make Test::Builder and friends thread-aware.  A proper thread implementation is important enough for Parrot that it's worth at least looking into updating our Test::\\* libraries if there's no easier option.  For now, we can hack around this by using `say` like the pir test does so that the branch can get closer to being merged into master.","files":null},{"type":3,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1352491612,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDEwMjQyNzUx","github-url":"https://github.com/parrot/parrot/issues/850#issuecomment-10242751"},"message":"Ok, this makes sense to me now. It would be nice for our Test::\\* stuff to be smarter, but for now I will try using say() instead of ok() and see if that gets the tests passing.","files":null},{"type":3,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1354649471,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDExMDExNjEx","github-url":"https://github.com/parrot/parrot/issues/850#issuecomment-11011611"},"message":"Changed it to say with a6111e414d and 21519b47d\nand enabled the nqp-rx tests with 4f78e5c4f1c799","files":null},{"type":4,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1354649472,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzExNTYwMDg="},"status":2}]}