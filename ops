{"version":1,"ops":[{"type":1,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1253600727,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODg4","github-url":"https://github.com/parrot/parrot/issues/679","origin":"github"},"title":"inter::progs ought to be smarter about finding linker","message":"This issue was first discussed in [http://rt.perl.org/rt3/Ticket/Display.html?id=49558 RT #49558].  I'm quoting Andy Dougherty's original post in its entirety.\n\n\"This patch just notes a problem area. In order to pick the correct linker on platforms where there is more than one possibility (e.g. the vendor's cc and gcc), Configure.pl needs to know which compiler is being used. Both solaris.pm and dec_osf.pm (assuming my recent patch is applied) handle this with a callback -- immediately after $cc is set, they run a test program to see if $cc is really gcc. Duplicating this callback code in each hints file seems wrong. Configure really ought to do at least some of that guessing right away.\n\n\"(The ????? can be filled in with whatever tag RT assigns this.)\"\n\n```\ndiff -r -u parrot-current/config/inter/progs.pm parrot-andy/config/inter/progs.pm\n--- parrot-current/config/inter/progs.pm 2008-01-02 08:59:40.000000000 -0500\n+++ parrot-andy/config/inter/progs.pm 2008-01-09 08:55:50.000000000 -0500\n@@ -91,6 +91,15 @@\nif $ask;\n$conf-\u003edata-\u003eset( cc =\u003e $cc );\n\n+ # XXX [RT ????? ] Configure should do some intelligent guessing here.\n+ # Which linker to pick may well depend on the compiler chosen.\n+ # If the user picks 'gcc', then the linker should probably\n+ # be either 'gcc' or 'g++'.\n+ # If the user picks 'cc', then the linker should probably be\n+ # the associated c++ compiler, known as 'c++', 'CC', or 'cxx',\n+ # or perhaps something else.\n+ # Currently, solaris and dec_osf handle this with callbacks.\n+ #\n$link = integrate( $conf-\u003edata-\u003eget('link'), $conf-\u003eoptions-\u003eget('link') );\n$link = prompt( \"How about your linker?\", $link ) if $ask;\n$conf-\u003edata-\u003eset( link =\u003e $link );\n```\n\nI don't know whether the patch would cleanly apply today.\n\nThank you very much.[[BR]]\nkid51\n\nOriginally http://trac.parrot.org/parrot/ticket/1056","files":null}]}