{"version":1,"ops":[{"type":1,"author":{"id":"2da6485217cbb88ff96be8f3dcc7f9ae44cf6bf0"},"timestamp":1259768001,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NTcz","github-url":"https://github.com/parrot/parrot/issues/370","origin":"github"},"title":"[RFC] make a test_core.pir that tests which are part of coretest use, instead of test_more.pir","message":"Tests that are in \n`make coretest`\n cannot use PGE, but there is nothing enforcing this, so they end up being added and then the first poor sap that types \n`make corevm; make coretest`\n gets something like\n\n```\n# test_fetch_keyed_pmc\n# test_fetch_keyed_int\n# test_fetch_keyed_str\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_atan' pc 1170 (t/op/inf_nan.t:224)\ncalled from Sub 'main' pc 137 (t/op/inf_nan.t:34)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_sqrt_n_n' pc 3976 (t/op/number.t:798)\ncalled from Sub 'main' pc 389 (t/op/number.t:62)\n# test_vivify_keyed_pmc\n# test_vivify_keyed_int\n# test_vivify_keyed_str\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/md2.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/md2.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/md4.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/md4.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/md5.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/md5.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/ripemd160.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/ripemd160.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/sha.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/sha.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/sha1.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/sha1.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/sha256.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/sha256.t:33)\n\"load_bytecode\" couldn't find file 'PGE.pbc'\ncurrent instr.: 'parrot;Test;More;like' pc 1662 (runtime/parrot/library/Test/More.pir:1085)\ncalled from Sub 'test_digest' pc 205 (t/dynpmc/sha512.t:72)\ncalled from Sub 'main' pc 68 (t/dynpmc/sha512.t:33)\n# no extension recognized for t/perl/testlib/hello\n# no extension recognized for t/perl/testlib/hello\n# no extension recognized for t/perl/testlib/hello\nmake: *** [coretest] Error 1\n```\n\nThe proposal is to have a test_core.pir which only imports the subset of function from test_more.pir that are valid for making the corevm target happy.\n\nFor reference, this is the current output of \"make coretest\" on trunk. \n\nOriginally http://trac.parrot.org/parrot/ticket/1342","files":null}]}