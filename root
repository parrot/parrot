{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1254558192,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NDgx","github-url":"https://github.com/parrot/parrot/issues/284","origin":"github"},"title":"Multidispatch 'concatenate_str' does not handle LHS undef","message":"This NQP code prints one line, then fails.\n\n```\nmy $x;\nmy $z := '\u003e' ~ $x;\nsay($z);\nmy $y := $x ~ '\u003c';\nsay($y);\n```\n\nThe error:\n\n```\nMultiple Dispatch: No suitable candidate found for 'concatenate_str', with signature 'PSP-\u003eP'\ncurrent instr.: '_block11' pc 50 (EVAL_3:27)\ncalled from Sub 'parrot;PCT;HLLCompiler;eval' pc 982 (src/PCT/HLLCompiler.pir:548)\n```\n\nThe generated PIR is `concat $P0, $P1, $P2` for the constant-on-the-left case. But NQP generates `concat $P0, $P1, '\u003c'` for the constant-on-the-right case. It is this case, with an undef first argument, that fails.\n\nChanging the constant to a register does not affect the behavior. Storing an empty string in place of the left-hand undef does resolve the problem. I believe the multidispatch doesn't know what to do with undef.\n\nOriginally http://trac.parrot.org/parrot/ticket/1088","files":null}]}