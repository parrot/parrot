{"version":1,"ops":[{"type":1,"author":{"id":"3771fd696fba286f6d0b9544dc89da489f0c740e"},"timestamp":1296404749,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODAz","github-url":"https://github.com/parrot/parrot/issues/595","origin":"github"},"title":"[NCI] callback sub parameter definition isn't unified with  callback definition in the C lib.","message":"Hello,\n   see https://github.com/parrot/parrot/blob/master/src/nci_test.c#-115 , there are two define here.\n\n```\ntypedef void (*cb_C1_func)(const char*, void*);\nPARROT_DYNEXT_EXPORT void nci_cb_C1(cb_C1_func, void*);\n```\n\nthe callback is created by:\n\n```\n     cb_wrapped = new_callback cb, user_data, \"vtU\"\n```\n\nwhich means it's first parameter is external_data, and the two is user_data. that is, the callback function should be defined as this one:\n\n```\n.sub _call_back\n  .param string external_data\n  .param pmc user_data\n  print \"user data: \"\n  print u\n  print \"\\n\"\n  print \"external data: \"\n  print s\n  print \"\\n\"\n.end\n```\n\nbut actually in t/pmc/nci.t, it's defined as:\n\n```\n.sub _call_back\n  .param pmc user_data\n  .param string external_data\n  print \"user data: \"\n  print u\n  print \"\\n\"\n  print \"external data: \"\n  print s\n  print \"\\n\"\n.end\n\n```\n\naccording to t/pmc/nci.t it seems that no matter user_data is the first parameter or two, the callback sub must be defined as:\n\n```\n.sub _call_back\n  .param pmc user_data\n  .param string external_data\n.end\n```\n\nthen I took a look at PDD16, and it's said user_data should be defined in the second parameter:\n\n```\n.sub _call_back\n  .param string external_data\n  .param pmc user_data\n.end\n\n```\n\nwhich is right.\n\nOriginally http://trac.parrot.org/parrot/ticket/1992","files":null}]}