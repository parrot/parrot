{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1267085748,"metadata":{"github-id":"MDU6SXNzdWUyODQ4Nzg4","github-url":"https://github.com/parrot/parrot/issues/580","origin":"github"},"title":"Improve random-ness of Parrot_range_rand","message":"Parrot_range_rand(min, max, ignored) returns a number between min and max, inclusive.\n\nHowever, it does so by computing a floating point number, multiplying that be the integer difference, and adding it to the min.\n\nThe result of this, in C, is that truncating conversion introduces a bias away from max.\n\nConsider a call `Parrot_range_rand(0, 10, 0)` - the result is min (0 in our case) plus (max-min) (10-0, or 10) times a random number in the range 0.0 ... 1.0.\n\nBut because of truncating conversion, 10*(rand) will convert to 0 about 10% of the time (0.000 ... 0.099), 1 about 10% of the time (0.100 ... 0.199), ..., and 9 about 10% of the time (0.900 ... 0.999). About 0% of the time (there is a change of hitting 1.0, but floats have a ''lot'' of decimal places...) the result will be 10.\n\nOriginally http://trac.parrot.org/parrot/ticket/1479","files":null}]}