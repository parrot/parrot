{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1393509249,"metadata":{"github-id":"MDU6SXNzdWUyODQyMDEzNw==","github-url":"https://github.com/parrot/parrot/issues/1039","origin":"github"},"title":"-O2: fix empty ins-\u003eop ptr caused by failed constant propagation","message":"testcase:\n`m -s parrot_old \u0026\u0026 ./parrot_old -d61 -O2 t/compilers/imcc/syn/clash_1.pir`\n=\u003e `error:imcc:get_code_size: no opnum ins#2` _0x91500ed0_, the 1st changed op in constant propagation.\n\n```\npropagating constant 0x915019c0 null $I0\n    propagating into register 0: 0x91500ed0 if $I0, nok1  !!\nopt if_xc_ic =\u003e deleted\n - no if_ic_ic\npropagating constant 0x91501380 null $I0\n    propagating into register 0: 0x91501490 if $I0, nok2\n```\n\nso we want to exchange  if_xc_ic by if_ic_ic, but there's not such op.\n`IMCC_subst_constants` might return found (wrong) with an empty tmp.\n\nwork done in branch `rurban/imccO2`\n\nby omitting the empty tmp in 966d9c2 the following tests were fixed, but it is still WIP\n\n```\n-t/compilers/imcc/syn/clash.t      (Wstat: 768 Tests: 13 Failed: 3)\n-  Failed tests:  1-2, 8\n-t/compilers/imcc/syn/pcc.t        (Wstat: 768 Tests: 27 Failed: 2)\n-  Failed tests:  7-8\n-t/op/jit.t                        (Wstat: 768 Tests: 61 Failed: 2)\n-  Failed tests:  52-53\n-t/op/spawnw.t                     (Wstat: 256 Tests: 7 Failed: 1)\n-  Failed test:  7\n-t/op/stringu.t                    (Wstat: 256 Tests: 48 Failed: 1)\n-  Failed test:  32\n-t/pmc/coroutine.t                 (Wstat: 256 Tests: 12 Failed: 1)\n-  Failed test:  11\n-t/pmc/exception-old.t             (Wstat: 256 Tests: 22 Failed: 1)\n-  Failed test:  19\n```","files":null}]}