{"version":1,"ops":[{"type":1,"author":{"id":"0782f66a529ccd24e18226f5eebab20a90bea166"},"timestamp":1231242754,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NDcz","github-url":"https://github.com/parrot/parrot/issues/276","origin":"github"},"title":"Can't thaw a Sub (or a PIR subclass of a Sub)","message":"Code:\n\n```\n.sub main :main\n\n  $P0 = get_class 'Sub'\n  $P1 = subclass $P0, 'myProc'\n\n  .local pmc pirC\n  pirC = compreg 'PIR'\n\n  .local string code\n  code = \u003c\u003c\"END_CODE\"\n\n.sub bar\n  say \"hi\"\n.end\nEND_CODE\n\n  .local pmc compiled\n  compiled = pirC(code)\n  compiled = compiled[0] # just want the first executable sub here.\n\n  compiled() # works\n\n  .local pmc sub\n  sub = new 'myProc'\n  assign sub, compiled\n  sub() # works\n\n  $S0 = freeze sub\n  say \"frozen\"\n  $P2 = thaw $S0\n  say \"thawed\"\n  $P2()\n.end\n```\n\nOutput:\n\n```\nhi\nhi\nfrozen\nUnsupported key type in Key.thaw\ncurrent instr.: 'main' pc 48 (borked.pir:30)\n```\n\nI'd expect to be able to thaw this PMC, and then invoke the sub after thaw.\n\nOriginally http://trac.parrot.org/parrot/ticket/132","files":null}]}