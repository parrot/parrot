{"version":1,"ops":[{"type":1,"author":{"id":"76484e451c8adcf68d1a41e60ab7fdf43d921282"},"timestamp":1277749260,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NzMw","github-url":"https://github.com/parrot/parrot/issues/522","origin":"github"},"title":"postgres libraries don't work from foreign HLLs","message":"This works without error:\n\n```\n.sub main :main\n    load_bytecode 'Pg.pir'\n    $P0 = new 'Pg'\n    $P1 = $P0.'connectdb'('')\n.end\n```\n\nBut this dies:\n\n```\n.HLL 'foo'\n.sub main :main\n    load_bytecode 'Pg.pir'\n    $P0 = new 'Pg'\n    $P1 = $P0.'connectdb'('')\n.end\n```\n\nError:\n\n```\nNull PMC access in invoke()\ncurrent instr.: 'foo;Pg;Conn;status' pc 137 (/home/moritz/rakudo/parrot_install/lib/2.5.0-devel/library/Pg.pir:150)\ncalled from Sub 'foo;Pg;connectdb' pc 55 (/home/moritz/rakudo/parrot_install/lib/2.5.0-devel/library/Pg.pir:86)\ncalled from Sub 'main' pc 12 (foo.pir:5)\n```\n\nEither Pg should be in the 'parrot' HLL, and needs explicit calling, or it should work anywhere it is included.\n\nOriginally http://trac.parrot.org/parrot/ticket/1692","files":null}]}