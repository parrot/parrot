{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1265519208,"metadata":{"github-id":"MDU6SXNzdWUyODQ4Njkw","github-url":"https://github.com/parrot/parrot/issues/482","origin":"github"},"title":"Parrot will not parse PIR missing newline at EOF","message":"This script:\n\n```\nperl -e 'print \".sub foo\\n\\tsay \\\"Hello, world\\\"\\n.end\\n# Last line\"' \u003e x.pir \n```\n\nproduces a .pir file with no newline at the end. (Vim really WANTS to add a trailing newline, so beware how you look at it.)\n\nYou can check with\n\n```\nod -tx1z x.pir\n```\n\nwhich outputs something like:\n\n```\n0000000 2e 73 75 62 20 66 6f 6f 0a 09 73 61 79 20 22 48  \u003e.sub foo..say \"H\u003c\n0000020 65 6c 6c 6f 2c 20 77 6f 72 6c 64 22 0a 2e 65 6e  \u003eello, world\"..en\u003c\n0000040 64 0a 23 20 4c 61 73 74 20 6c 69 6e 65           \u003ed.# Last line\u003c\n0000055\n```\n\nAt any rate, feeding that input to parrot (v2.0) produces:\n\n```\naustin@andLinux:~/kakapo$ parrot --output x.pbc x.pir\nerror:imcc:syntax error, unexpected $undefined, expecting $end (' ')\n    in file 'x.pir' line 4\n```\n\nAppending a newline satisfies the parser.\n\nOriginally http://trac.parrot.org/parrot/ticket/1424","files":null}]}