{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1414237338,"metadata":{"github-id":"MDU6SXNzdWU0NjgwOTc3Ng==","github-url":"https://github.com/parrot/parrot/issues/1113","origin":"github"},"title":"darwin -m32 fails in Parrot_sysmem_amount","message":"Need to use HW_PHYSMEM there. No chance to get \u003e2GB RAM in i386.\nWonder why it worked on darwin/ppc32, but we used HW_PHYSMEM there before also.\n\nSee branch `smoke-me/darwin32-gh1113`\n\nInteresting is also the error in the exception handling afterwards:\nempty encoding in the error string leads to an assertion, hiding the original error message.\n\n```\n$ ./miniparrot -Iruntime/parrot/include -o frontend/parrot2/prt0.pbc frontend/parrot2/prt0.pir\nsrc/string/api.c:672: failed assertion 'encoding'\nBacktrace - Obtained 14 stack frames (max trace depth is 32).\n0   miniparrot                          0x000c8ae8 Parrot_print_backtrace + 88\n1   miniparrot                          0x000c746c Parrot_confess + 223\n2   miniparrot                          0x0005cbfa Parrot_str_new_init + 170\n3   miniparrot                          0x000fc9a8 Parrot_vsprintf_c + 248\n4   miniparrot                          0x000c823a build_exception_from_args + 234\n5   miniparrot                          0x000c83a1 Parrot_ex_throw_from_c_args + 210\n6   miniparrot                          0x001501b5 Parrot_sysmem_amount + 133\n7   miniparrot                          0x000d5df5 Parrot_gc_gms_init + 1605\n8   miniparrot                          0x000cba76 Parrot_gc_initialize + 662\n9   miniparrot                          0x000f00ff Parrot_interp_initialize_interpreter + 175\n10  miniparrot                          0x000bbd9e Parrot_api_make_interpreter + 574\n11  miniparrot                          0x0005a832 main + 82\n12  libdyld.dylib                       0x925c0701 start + 1\n13  ???                                 0x00000005 0x0 + 5\nAttempting to get PIR backtrace.  No guarantees.  Here goes...\nsrc/debug.c:3651: failed assertion 'ctx'\nBacktrace - Obtained 18 stack frames (max trace depth is 32).\n0   miniparrot                          0x000c8ae8 Parrot_print_backtrace + 88\n1   miniparrot                          0x000c746c Parrot_confess + 223\n2   miniparrot                          0x000b773b PDB_get_continuation_backtrace + 155\n3   miniparrot                          0x000b7cbe PDB_backtrace + 110\n4   miniparrot                          0x000c8c4c Parrot_print_backtrace + 444\n5   miniparrot                          0x000c746c Parrot_confess + 223\n6   miniparrot                          0x0005cbfa Parrot_str_new_init + 170\n7   miniparrot                          0x000fc9a8 Parrot_vsprintf_c + 248\n8   miniparrot                          0x000c823a build_exception_from_args + 234\n9   miniparrot                          0x000c83a1 Parrot_ex_throw_from_c_args + 210\n10  miniparrot                          0x001501b5 Parrot_sysmem_amount + 133\n```","files":null}]}