{"version":1,"ops":[{"type":1,"author":{"id":"aa8915ba52969f979af836ca4704fd27e613004f"},"timestamp":1258567966,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NDk3","github-url":"https://github.com/parrot/parrot/issues/300","origin":"github"},"title":"NQPrx does not vivify globals in all cases","message":"This code:\n\n```\nmodule Z;\nour $Global;\nsub zzz() {\n        unless $Global {\n                say(\"Not set\");\n        }\n}\nINIT {\n        zzz();\n}\n\nmodule A;\n\nsub aaa() {\n    our $G2;\n\n    unless $G2 {\n        say(\"Not set\");\n    }\n}\n```\n\ngenerates:\n\n```\n    get_global $P21, \"$Global\"\n    unless $P21, unless_20\n```\n\nfor the access code in `sub zzz`. There is no guard for null. But in the access code in `sub aaa` there is this:\n\n```\n    get_global $P31, \"$G2\"\n    unless_null $P31, vivify_17\n```\n\nApparently the scope isn't being looked up correctly, or something?\n\nOriginally http://trac.parrot.org/parrot/ticket/1308","files":null}]}