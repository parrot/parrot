{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1422216522,"metadata":{"github-id":"MDU6SXNzdWU1NTQyNzk2Mg==","github-url":"https://github.com/parrot/parrot/issues/1191","origin":"github"},"title":"win: better env support, fragile linking","message":"`putenv` should be replaced with `putenv_s`.\n\nWe need to provide unicode (ucs-2) versions\n\nWith msvc cl 17 and win64 access to the non-POSIX global environ was gone. We might need a `PARROT_HAS_ENVIRON` in feature.h, and more `environ` probes.\nSince Visual Studio 2005 direct access to the global `environ` symbol is now deprecated,\nand with linking to msvcrt it does not work anymore.\nPolling `_environ` in a Unicode context is meaningless when `/MD` or `/MDd` linkage is used.\nWe need to replace the access by index in `env.pmc`.\nThis is fixed in 7.0.2, it was a linking problem","files":null}]}