{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1356987019,"metadata":{"github-id":"MDU6SXNzdWU5NTk3NTIz","github-url":"https://github.com/parrot/parrot/issues/904","origin":"github"},"title":"Broken nci_thunk_gen.pir \"pv\" error: ‘t_1’ undeclared ","message":"added missing `src/nci/extra_thunks.nci`\n\n```\n# examples/nci/Qt\np    v\n```\n\n=\u003e `src/nci/extra_thunks.c`: pcf_ptr_void:\n\n```\n    PMC  * t_0; void * v_0;\n    Parrot_pcc_fill_params_from_c_args(interp, call_object, \"v\", \u0026t_1);\n    v_1 = t_1;\n```\n\nSimplier test to repro:\n`echo \"p  v\" | ./parrot tools/dev/nci_thunk_gen.pir --output=thunks_test.c`\n\nIt should generate:\n\n```\n    ...\n    PMC  * t_0; char * v_0;\n    GETATTR_NCI_orig_func(interp, nci, orig_func);\n    fn_pointer = (func_t)D2FPTR(orig_func);\n    v_0 =  (*fn_pointer)();\n    if (v_0 != NULL) {\n        t_0 = Parrot_pmc_new(interp, enum_class_UnManagedStruct);\n        VTABLE_set_pointer(interp, t_0, v_0);\n    }\n    else {\n        t_0 = PMCNULL;\n    };\n    Parrot_pcc_set_call_from_c_args(interp, call_object, \"P\", t_0);\n```","files":null}]}