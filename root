{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1416998384,"metadata":{"github-id":"MDU6SXNzdWU1MDE0Mjk2Nw==","github-url":"https://github.com/parrot/parrot/issues/1150","origin":"github"},"title":"Fix tests for VALGRIND=valgrind","message":"valgrind output filtering requires the valgrind specific lines ==$pid== Memcheck ... to start at a new line.\nThus all tests need to end with a newline.\n\nresult should not interleave with post-exit valgrind ==pid== output\ne.g. =\u003e \"`42==16469== Memcheck, a memory error detector`\"\nWe need to add \"42\\n\" because ==... is only filtered at new lines.\n\nSome of the filtered valgrind lines are darwin specific:\n`--$pid:0:syswrap- WARNING: Ignoring sigreturn( ..., UC_RESET_ALT_STACK );`\non longjmp, darwin only.\nor `UNKNOWN task message [id 3403, to mach_task_self(), reply 0x813]` on some new unhandled IO requests. (darwin valgrind cannot handle all calls yet as of 2014).\n\nSee `smoke-me/valgrind-tests`","files":null}]}