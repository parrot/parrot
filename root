{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1375293389,"metadata":{"github-id":"MDU6SXNzdWUxNzQ2NjQxMA==","github-url":"https://github.com/parrot/parrot/issues/975","origin":"github"},"title":"Add threads leak example with subtasks creating proxies","message":"main thread enters a sub. then creates pmcarray A, then puts Integer pmc B in A[0]. Passes A to a task C, then sleeps 2 seconds then forces a GC by allocating a ton of objects. Task C creates pmcarray D, then takes A[0] (which is B) and puts it in D[0], and sets A[0] to null/undef.. then sleeps 5 seconds and then tries to access B.\n\nNote that current parrot threads will leak proxies created in subthreads, it can only handle proxies in threads created by the main thread, not by subthreads.\nThe main GC won't be able to reach C's reference to B, whether in a local register or in D[0].\n\nWe should at least add a testcase in `examples/threads/leak_test.pir` for it","files":null}]}