{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1417636229,"metadata":{"github-id":"MDU6SXNzdWU1MDg4MzY1MA==","github-url":"https://github.com/parrot/parrot/issues/1153","origin":"github"},"title":"ResizablePMCArray delete is unprotected","message":"You could pass an invalid index and it happily will move array items around. right to left, everything after the index.\nAnd apparently some code in PGE accesses an out of bounds index, on certain match parameters\n\nThree solutions on out of bounds (oob) indices:\n- bail out silently\n- throw an oob exception\n- add a warning on delete[0] of an empty array to keep PGE running.\n\nI initially implemented the exception in 6003fdcf78fd61c501153019ef8b880a5ce0afb0, and found test failures in \n\n```\nt/compilers/pge/p5regex/p5rx.t            (Wstat: 0 Tests: 960 Failed: 7)\n  Failed tests:  172, 420-421, 442-443, 869-870\n```\n\nI'm not sure yet, if it's caused by the other rpa changes in #1152 or by delete.\n\nBy accepting the illegal delete[0] of an empty array only p5rx.t 442-443 is remaining.\nSo I will go with the warning for this case, until PGE is fixed to check the length.\nAll other illegal accesses are now forbidden.","files":null}]}