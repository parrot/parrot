{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1393539846,"metadata":{"github-id":"MDU6SXNzdWUyODQ2MDMzOA==","github-url":"https://github.com/parrot/parrot/issues/1041","origin":"github"},"title":"-O2 constant propagation gone too far: t/op/calling_30.pir","message":"```\nm -s parrot_old \u0026\u0026 ./parrot_old -d7061 -O1 -o t/op/calling_30-O2.pbc t/op/calling_30.pir 2\u003e calling_30-O2.log\nm -s parrot_old \u0026\u0026 ./parrot_old -d7061 -O2 -o t/op/calling_30-O2.pbc t/op/calling_30.pir 2\u003e calling_30-O2.log\nwdiff -3 calling_30-O1.log calling_30-O2.log\n```\n\n```\n    $I0 = 77\n    $I0 = foo(42, $I0)\n    print $I0\n=\u003e\n    $I0 = foo(42, 77)\n    print 77\n```\n\nThis is obviously non-sense as it ignores the result of the function call.\nHandled in branch `rurban/imccO2`\n\nReally:\n\n```\n46 set_i_ic 0 77    0x21bef30 set I0, 77\n49 set_args_pc 0 42 0   0x21c0520 set_args \n53 set_p_pc 0 0 0x21c03d0 set_p_pc P0, foo\n56 invokecc_p 0 0x21c05d0 invokecc P0\n58 get_results_pc 1 0   0x21c0710 get_results \n61 print_i 0    0x21bf360 print I0\n63 print_sc 2   0x21bf4c0 print \"\\n\"\n=\u003e\n46 set_i_ic 0 77    0x23a5f30 set I0, 77\n49 set_args_pc 0 42 0   0x23a7520 set_args \n53 set_p_pc 0 0 0x23a73d0 set_p_pc P0, foo\n56 invokecc_p 0 0x23a75d0 invokecc P0\n58 get_results_pc 1 0   0x23a7710 get_results \n61 print_ic 77  0x23a6360 print 77\n63 print_sc 2   0x23a64c0 print \"\\n\"\n```","files":null}]}