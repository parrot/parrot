{"version":1,"ops":[{"type":1,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1239773873,"metadata":{"github-id":"MDU6SXNzdWUyODQ4NzI4","github-url":"https://github.com/parrot/parrot/issues/520","origin":"github"},"title":"perldoc detection fails if build runs as root","message":"If you build parrot as root, the detection of perldoc\nwill always fail.  The reason is that perldoc for security\nreasons runs as either 'nobody', 'nouser' or uid -2.\nTherefore, it cannot write to a file given as the argument\nto perldoc's -d option, when that file is created by File::Temp,\nsince it's owned by root and has mode 0600.\n\nIt also appears to me that the first part of the perldoc\ntest is ... a little sketchy in how it should behave?\ncapture_output doesn't collect STDERR output, it captures\nSTDOUT output.\n\nI know, using \u003e instead of perldoc's -d option is possibly\nport unfriendly to non-Unix systems, so a better way of\ntesting should probably be found.  In my case, I do this\nfor only Unix-y systems, so permit myself some leeway here.\n\nPatch to be attached.\n\nRegards,\n- HÃ¥vard\n\nOriginally http://trac.parrot.org/parrot/ticket/555 by heidnes","files":null}]}