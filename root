{"version":1,"ops":[{"type":1,"author":{"id":"6d59fc378929d99368e023bcfc49aacae1e68aad"},"timestamp":1267710530,"metadata":{"github-id":"MDU6SXNzdWUyODQ4ODQ1","github-url":"https://github.com/parrot/parrot/issues/636","origin":"github"},"title":"factorial example in languages/squaak gives incorrect result","message":"[squaak]% cat examples/factorial.sq \n# Copyright (C) 2008, Parrot Foundation.\n# $Id: factorial.sq 36833 2009-02-17 20:09:26Z allison $\n\nprint(\"Please enter number: \")\nx = read()\n\nsub factorial(n)\n    ## test for \u003c 2 because all numbers are represented by\n    ## floating-point numbers, and equality checks on those\n    ## do not work (yet?)\n    if n \u003c 2 then\n        return 1\n    else\n        return n \\* factorial(n - 1)\n    end\nend\n\nprint(\"factorial of \", x, \" is: \", factorial(x))\n\n[squaak]% ./installable_squaak examples/factorial.sq \nPlease enter number: \n10\nfactorial of 10\n is: 1\n[squaak]% ./installable_squaak examples/factorial.sq\nPlease enter number: \n10\nfactorial of 10\n is: 1\n[squaak]% pwd\n/home/parthm/src/parrot-2.1.1/examples/languages/squaak\n[squaak]% which parrot\n/home/parthm/src/parrot-2.1.1/parrot\n[squaak]%\n\nIt seems (n \u003c 2) is always returning true. Below are the results with prints added.\n\n[squaak]% cat fac2.sq \n# Copyright (C) 2008, Parrot Foundation.\n# $Id: factorial.sq 36833 2009-02-17 20:09:26Z allison $\n\nprint(\"Please enter number: \")\nx = read()\n\nprint(\"you entered:\", x)\n\nsub factorial(n)\n    ## test for \u003c 2 because all numbers are represented by\n    ## floating-point numbers, and equality checks on those\n    ## do not work (yet?)\n\n```\nprint(\"got: \", n)\nprint(\"is n \u003c 2:\", n \u003c 2)\n\nif n \u003c 2 then\n    print(\"return 1\")\n    return 1\nelse\n    print(\"return n * fac(n-1)\")\n    return n * factorial(n - 1)\nend\n```\n\nend\n\nprint(\"factorial of \", x, \" is: \", factorial(x))\n\n[squaak]% ./installable_squaak fac2.sq\nPlease enter number: \n10\nyou entered:10\n\ngot: 10\n\nis n \u003c 2:1\nreturn 1\nfactorial of 10\n is: 1\n[squaak]%\n\nOriginally http://trac.parrot.org/parrot/ticket/1494 by parthm","files":null}]}