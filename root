{"version":1,"ops":[{"type":1,"author":{"id":"0a92d3f9f01a5a4514d86646f7597e2b20e9fd61"},"timestamp":1345295218,"metadata":{"github-id":"MDU6SXNzdWU2MzA1MjE3","github-url":"https://github.com/parrot/parrot/issues/815","origin":"github"},"title":"Segfault upon building nqp","message":"When building nqp (master) on parrot (also master), the following command crashes:\n\n/home/bart/usr/bin/parrot --library=src/stage1 src/stage1/nqp.pbc --target=pir --output=src/stage2/gen/nqp-mo.pir --setting=NULL src/stage2/gen/nqp-mo.pm\n\nOn the following line:\n0x00007ffff7afb109 in Parrot_hash_buffer (buf=0x7ffff016d692 \u003cAddress 0x7ffff016d692 out of bounds\u003e, len=16, \n    hashval=3339987910647287971) at src/hash.c:201\n201         hashval += *buf++;\n#0  0x00007ffff7afb109 in Parrot_hash_buffer (buf=0x7ffff016d692 \u003cAddress 0x7ffff016d692 out of bounds\u003e, len=16,\n\n```\nhashval=3339987910647287971) at src/hash.c:201\n```\n#1  0x00007ffff7c528b2 in fixed8_hash (interp_unused=0x611050, src=0x3b791e8, hashval=17988963583919786051)\n\n```\nat src/string/encoding/shared.c:975\n```\n#2  0x00007ffff7afd96d in Parrot_hash_get_bucket (interp=0x611050, hash=0x1827078, key=0x3b791e8) at src/hash.c:1236\n#3  0x00007ffff7bc0404 in Parrot_Hash_exists_keyed_str (interp=0x611050, _self=0x1252d28, key=0x3b791e8) at src/pmc/hash.c:298\n#4  0x00007ffff0d70713 in add_string_to_heap (interp=0x611050, writer=0x6148210, s=0x3b791e8) at serialization.c:123\n#5  0x00007ffff0d70c6b in write_str_func (interp=0x611050, writer=0x6148210, value=0x3b791e8) at serialization.c:209\n#6  0x00007ffff0d69e50 in serialize (interp=0x611050, st=0x84a7f0, data=0x39dbe60, writer=0x6148210) at KnowHOWREPR.c:86\n#7  0x00007ffff0d72e76 in serialize_object (interp=0x611050, writer=0x6148210, obj=0x3b7bdc8) at serialization.c:797\n#8  0x00007ffff0d73815 in serialize (interp=0x611050, writer=0x6148210) at serialization.c:937\n#9  0x00007ffff0d73e6f in Serialization_serialize (interp=0x611050, sc=0x1335760, empty_string_heap=0x1252df0) at serialization.c:1023\n#10 0x00007ffff0d6613a in Parrot_nqp_serialize_sc_s_p_p (cur_opcode=0x7ffff04dd348, interp=0x611050) at nqp_ops.c:8768\n#11 0x00007ffff7b34b19 in runops_fast_core (interp=0x611050, runcore_unused=0x6e1d20, pc=0x7ffff04dd348) at src/runcore/cores.c:499\n#12 0x00007ffff7b33fc2 in runops_int (interp=0x611050, offset=132) at src/runcore/main.c:220\n#13 0x00007ffff7b08d21 in runops (interp=0x611050, offs=132) at src/call/ops.c:126\n#14 0x00007ffff7b01870 in Parrot_pcc_invoke_from_sig_object (interp=0x611050, sub_obj=0x6f8350, call_object=0x6f8418)\n\n```\nat src/call/pcc.c:338\n```\n#15 0x00007ffff7ae5d48 in Parrot_ext_call (interp=0x611050, sub_pmc=0x6f8350, signature=0x7ffff7d05101 \"P-\u003e\") at src/extend.c:158\n#16 0x00007ffff7c4dd33 in Parrot_Task_invoke (interp=0x611050, _self=0x6f8170, next=0x0) at src/pmc/task.c:166\n#17 0x00007ffff7b0180b in Parrot_pcc_invoke_from_sig_object (interp=0x611050, sub_obj=0x6f8170, call_object=0x6f8378)\n\n```\nat src/call/pcc.c:330\n```\n#18 0x00007ffff7ae5d48 in Parrot_ext_call (interp=0x611050, sub_pmc=0x6f8170, signature=0x7ffff7cb4ecd \"-\u003e\") at src/extend.c:158\n#19 0x00007ffff7b3b7c9 in Parrot_cx_next_task (interp=0x611050, scheduler=0x6e4458) at src/scheduler.c:218\n#20 0x00007ffff7b3b53d in Parrot_cx_outer_runloop (interp=0x611050) at src/scheduler.c:147\n#21 0x00007ffff7b3b45c in Parrot_cx_begin_execution (interp=0x611050, main=0x6e4e08, argv=0x6e46d8) at src/scheduler.c:111\n#22 0x00007ffff7b4a703 in Parrot_pf_execute_bytecode_program (interp=0x611050, pbc=0x6f8148, args=0x6e46d8) at src/packfile/api.c:2829\n#23 0x00007ffff7adddf8 in Parrot_api_run_bytecode (interp_pmc=0x6d7880, pbc=0x6f8148, args=0x6e46d8) at src/embed/bytecode.c:161\n#24 0x0000000000401698 in main (argc=7, argv=0x7fffffffe148) at frontend/parrot2/main.c:171\n\nJust thought I'd let you know :-)","files":null}]}