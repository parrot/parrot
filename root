{"version":1,"ops":[{"type":1,"author":{"id":"646f0669ead6eaf64196bebf3884a5eff162357a"},"timestamp":1359678266,"metadata":{"github-id":"MDU6SXNzdWUxMDUyMzk1Ng==","github-url":"https://github.com/parrot/parrot/issues/930","origin":"github"},"title":"FileHandle.readall() broken when file already read from.","message":"Reported on #perl6 with example: https://gist.github.com/4687526\n\nSimple winxed version (filename: `iobug.winxed`)\n\n``` winxed\n$load 'Test/More.pbc';\nfunction main() {\n    Test.More.plan(1);\n\n    var file = open('iobug.winxed');\n    file.readline();\n    string rest = file.readall();\n    Test.More.is(-1, indexof(rest, \"\\0\"));\n}\n```\n\nIt appears that `Parrot_io_readall_s` (`src/io/api.c`:750) allocates a string the size of the entire file and then reads into that.","files":null}]}