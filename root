{"version":1,"ops":[{"type":1,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1355669689,"metadata":{"github-id":"MDU6SXNzdWU5MzE2NTEw","github-url":"https://github.com/parrot/parrot/issues/887","origin":"github"},"title":"t/native_pbc/*.t: Some tests failing under 'make testr'","message":"Partial output of 'make testr' run at commit ba7d5740f5aa4795b48846b5fc181064a7b2fdcb:\n\n```\n#   Failed test 'magic string 0xfePBC0x0a0x1a0x0a len=7'\n#   at t/native_pbc/header.t line 65.\n#          got: 'error:i'\n#     expected: '?PBC\n# \n# '\n\n#   Failed test 'wordsize: 109'\n#   at t/native_pbc/header.t line 66.\n\n#   Failed test 'byteorder: 99'\n#   at t/native_pbc/header.t line 67.\n\n#   Failed test 'floattype: 99'\n#   at t/native_pbc/header.t line 68.\n\n#   Failed test 'major version: 58 vs 4'\n#   at t/native_pbc/header.t line 69.\n#          got: '58'\n#     expected: '4'\n\n#   Failed test 'minor version: 115 vs 10'\n#   at t/native_pbc/header.t line 70.\n#          got: '115'\n#     expected: '10'\n\n#   Failed test 'patch version: 121 vs 0'\n#   at t/native_pbc/header.t line 71.\n#          got: '121'\n#     expected: '0'\n# Looks like you failed 7 tests of 9.\nt/native_pbc/header.t ............... Dubious, test returned 7 (wstat 1792, 0x700)\nFailed 7/9 subtests \n===(    6972;46  10/25  25/78   9/17  1/4 )=============================\n#   Failed test '4_le=\u003e8_le i386 32 bit opcode_t, 4 byte intval, 8 byte double'\n#   at t/native_pbc/Test.pm line 114.\n# : Size in directory 0 doesn't match size 1128419582 at offset 0x0\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n\n#   Failed test '4_be=\u003e8_le big-endian 32 bit opcode_t, 4 byte intval, 8 byte double'\n#   at t/native_pbc/Test.pm line 114.\n# PackFile_unpack: Dir format was 16777216 not 1\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n# Looks like you failed 2 tests of 4.\nt/native_pbc/integer.t .............. Dubious, test returned 2 (wstat 512, 0x200)\nFailed 2/4 subtests \n    (less 1 skipped subtest: 1 okay)\n===(    6980;46  11/25  28/78   9/17  1/7 )=============================\n#   Failed test '4_8_le=\u003e8_8_le i386 32 bit opcode_t, 4 byte intval, 8 byte double'\n#   at t/native_pbc/Test.pm line 114.\n# : Size in directory 0 doesn't match size 1128419582 at offset 0x0\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n\n#   Failed test '4_12_le=\u003e8_8_le i386 32 bit opcode_t, 4 byte intval, 12 byte long double'\n#   at t/native_pbc/Test.pm line 114.\n# : Size in directory 0 doesn't match size 1128419582 at offset 0x0\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n\n#   Failed test '4_8_be=\u003e8_8_le big-endian 32 bit opcode_t, 4 byte intval, 8 byte double'\n#   at t/native_pbc/Test.pm line 114.\n# PackFile_unpack: Dir format was 16777216 not 1\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n===(    6992;47  16/25  32/78   9/17  4/7 )=============================\n#   Failed test '8_16_le=\u003e8_8_le x86_64 64 bit opcode_t, 8 byte intval, 16 byte long double'\n#   at t/native_pbc/Test.pm line 114.\n# src/pmc/imageiothaw.c:281: failed assertion 'PARROT_IMAGEIOTHAW(_self)-\u003ecurs \u003c= (opcode_t *) (PARROT_IMAGEIOTHAW(_self)-\u003eimg-\u003estrstart + Parrot_str_byte_length((interp), PARROT_IMAGEIOTHAW(_self)-\u003eimg))'\n# Backtrace - Obtained 32 stack frames (max trace depth is 32).\n#0   libparrot.dylib                     0x00000001029222db Parrot_print_backtrace + 59\n#1   libparrot.dylib                     0x000000010292252e Parrot_confess + 190\n#2   libparrot.dylib                     0x0000000102a84df2 Parrot_ImageIOThaw_shift_integer_orig + 226\n#3   libparrot.dylib                     0x0000000102a84723 Parrot_ImageIOThaw_shift_integer + 35\n#4   libparrot.dylib                     0x0000000102a85002 Parrot_ImageIOThaw_shift_pmc_orig + 50\n#5   libparrot.dylib                     0x0000000102a84793 Parrot_ImageIOThaw_shift_pmc + 35\n#6   libparrot.dylib                     0x0000000102a856c7 Parrot_ImageIOThaw_set_string_native_orig + 471\n#7   libparrot.dylib                     0x0000000102a8464b Parrot_ImageIOThaw_set_string_native + 43\n#8   libparrot.dylib                     0x0000000102985230 Parrot_thaw_pbc + 320\n#9   libparrot.dylib                     0x00000001029b11ae PackFile_Constant_unpack_pmc + 238\n#10  libparrot.dylib                     0x00000001029adcad PackFile_ConstTable_unpack + 797\n#11  libparrot.dylib                     0x00000001029b0778 PackFile_Segment_unpack + 312\n#12  libparrot.dylib                     0x00000001029ad1b9 directory_unpack + 1337\n#13  libparrot.dylib                     0x00000001029b0778 PackFile_Segment_unpack + 312\n#14  libparrot.dylib                     0x00000001029a582c PackFile_unpack + 780\n#15  libparrot.dylib                     0x00000001029a5b8f read_pbc_file_packfile + 351\n#16  libparrot.dylib                     0x00000001029a5e2c Parrot_pf_read_pbc_file + 524\n#17  libparrot.dylib                     0x0000000102abcd60 Parrot_PackfileView_nci_read_from_file + 128\n#18  libparrot.dylib                     0x0000000102a8f84d Parrot_NativePCCMethod_invoke + 189\n#19  libparrot.dylib                     0x00000001028d8de3 Parrot_callmethodcc_p_sc + 323\n#20  libparrot.dylib                     0x000000010298a0b1 runops_fast_core + 193\n#21  libparrot.dylib                     0x0000000102989311 runops_int + 273\n#22  libparrot.dylib                     0x0000000102952715 runops + 517\n#23  libparrot.dylib                     0x000000010294866f Parrot_pcc_invoke_from_sig_object + 495\n#24  libparrot.dylib                     0x0000000102924d3f Parrot_ext_call + 607\n#25  libparrot.dylib                     0x0000000102af9207 Parrot_Task_invoke + 423\n#26  libparrot.dylib                     0x00000001029485ff Parrot_pcc_invoke_from_sig_object + 383\n#27  libparrot.dylib                     0x0000000102924d3f Parrot_ext_call + 607\n#28  libparrot.dylib                     0x000000010299314f Parrot_cx_next_task + 367\n#29  libparrot.dylib                     0x00000001029931eb Parrot_cx_outer_runloop + 139\n#30  libparrot.dylib                     0x00000001029935aa Parrot_cx_begin_execution + 362\n#31  libparrot.dylib                     0x00000001029a6ccd Parrot_pf_execute_bytecode_program + 477\n# Attempting to get PIR backtrace.  No guarantees.  Here goes...\n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# called from Sub '__PARROT_ENTRY_MAIN__args' pc 268 (frontend/parrot2/prt0.pir:99)\n# called from Sub '__PARROT_ENTRY_MAIN__' pc 344 (frontend/parrot2/prt0.pir:127)\n# \n# Looks like you failed 4 tests of 7.\nt/native_pbc/number.t ............... Dubious, test returned 4 (wstat 1024, 0x400)\nFailed 4/7 subtests \n    (less 2 skipped subtests: 1 okay)\n===(    7004;48  18/25  35/78  12/17  1/4 )=============================\n#   Failed test '4_le=\u003e8_le i386 32 bit opcode_t, 4 byte intval'\n#   at t/native_pbc/Test.pm line 114.\n# : Size in directory 0 doesn't match size 1128419582 at offset 0x0\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n\n#   Failed test '4_be=\u003e8_le big-endian 32 bit opcode_t, 4 byte intval'\n#   at t/native_pbc/Test.pm line 114.\n# PackFile_unpack: Dir format was 16777216 not 1\n# \n# current instr.: '__default_get_packfile' pc 435 (frontend/parrot2/prt0.pir:158)\n# \n# Looks like you failed 2 tests of 4.\nt/native_pbc/string.t ............... Dubious, test returned 2 (wstat 512, 0x200)\nFailed 2/4 subtests \n    (less 1 skipped subtest: 1 okay)\nt/pmc/stringhandle.t ................ ok                                \nt/pmc/timer.t ....................... ok                                \nt/pmc/sub.t ......................... 57/78 \nnot ok 63 - :outer with identical sub names # TODO lexicals not thawed properly from PBC, GH #430\nt/pmc/sub.t ......................... 71/78 not ok 71 - Thaw PIR subclass # TODO See GH #276\nt/pmc/sub.t ......................... ok     \n\nTest Summary Report\n-------------------\nt/native_pbc/header.t             (Wstat: 1792 Tests: 9 Failed: 7)\n  Failed tests:  1-7\n  Non-zero exit status: 7\nt/native_pbc/integer.t            (Wstat: 512 Tests: 4 Failed: 2)\n  Failed tests:  1-2\n  Non-zero exit status: 2\nt/native_pbc/number.t             (Wstat: 1024 Tests: 7 Failed: 4)\n  Failed tests:  1-3, 5\n  Non-zero exit status: 4\nt/native_pbc/string.t             (Wstat: 512 Tests: 4 Failed: 2)\n  Failed tests:  1-2\n  Non-zero exit status: 2\nFiles=209, Tests=7062, 53 wallclock secs ( 1.81 usr  0.52 sys + 50.08 cusr 45.68 csys = 98.09 CPU)\nResult: FAIL\nmake: *** [testr] Error 1\n```\n\nThank you very much.\nJim Keenan","files":null}]}