{"version":1,"ops":[{"type":1,"author":{"id":"86141a663c2eb7543d1a51ec6253a1d54de912fd"},"timestamp":1413802170,"metadata":{"github-id":"MDU6SXNzdWU0NjI1NzE0Ng==","github-url":"https://github.com/parrot/parrot/issues/1109","origin":"github"},"title":"GC assertion with mips64","message":"With the new mips64 big-endian machine I got a strange new GC backtrace. This is a machine with only 128MB RAM\n\n```\n./parrot runtime/parrot/library/PGE/Perl6Grammar.pbc --output=compilers/tge/TGE/Parser.pir compilers/tge/TGE/Parser.pg\nsrc/gc/gc_gms.c:1132: failed assertion 'PObj_constant_TEST(pmc) || (int)POBJ2GEN(pmc) == i'\nBacktrace - Obtained 1 stack frames (max trace depth is 32).\n[0xffffe01670]\nAttempting to get PIR backtrace.  No guarantees.  Here goes...\ncurrent instr.: 'parrot;PGE;Match;new' pc 196 (compilers/pge/PGE/Match.pir:129)\ncalled from Sub 'parrot;PGE;Perl6Grammar;' pc 42 ((file unknown):17)\ncalled from Sub 'parrot;PGE;Perl6Grammar;ws' pc 19 ((file unknown):7)\ncalled from Sub 'parrot;PGE;Perl6Grammar;' pc 221 ((file unknown):537573083)\ncalled from Sub 'parrot;PGE;Perl6Grammar;statement' pc 19 ((file unknown):537572999)\ncalled from Sub 'parrot;PGE;Perl6Grammar;Compiler;compile' pc 211 (runtime/parrot/library/PGE/Perl6Grammar.pir:162)\ncalled from Sub 'parrot;PCT;HLLCompiler;eval' pc 1112 (compilers/pct/src/PCT/HLLCompiler.pir:586)\ncalled from Sub 'parrot;PCT;HLLCompiler;evalfiles' pc 1532 (compilers/pct/src/PCT/HLLCompiler.pir:768)\ncalled from Sub 'parrot;PCT;HLLCompiler;command_line' pc 1770 (compilers/pct/src/PCT/HLLCompiler.pir:886)\ncalled from Sub 'parrot;PGE;Perl6Grammar;Compiler;main' pc 19 (runtime/parrot/library/PGE/Perl6Grammar.pir:68)\nmake: *** [compilers/tge/TGE/Parser.pir] Aborted\n```\n\nAnd also when generating the data_json grammar in pir.\nWorks fine with `./parrot -G` (no GC), `./parrot -g ms2`, `./parrot -g inf` and segfaults with  `./parrot -g ms`\nSo the workaround is to complete the build with `make PARROT=\"./parrot -G\"`\n\nSee https://github.com/parrot/parrot/commit/5cce14d7e6caad68c9c860901131661c7bf7080b how to repro\n\nAll other tests work fine, just the PGE compiler fails.","files":null}]}