{"version":1,"ops":[{"type":1,"author":{"id":"d9b4aee65ce8c18d4a43eced1eecb0d154e1eebb"},"timestamp":1354636341,"metadata":{"github-id":"MDU6SXNzdWU4OTg4MzA2","github-url":"https://github.com/parrot/parrot/issues/872","origin":"github"},"title":"Post-threads merge build failure on Darwin/x86_64","message":"Following the merge of the threads branch into master, Parrot is no longer building for me on Darwin/x86_64.  This was surprising, because I successfully built and tested the master and threads branches yesterday once I saw that a merge was imminent.\n\nHere is an excerpt from the build log:\n\n```\n/Users/jkeenan/perl5/perlbrew/perls/perl-5.16.2/bin/perl -MExtUtils::Command -e mkpath runtime/parrot/languages/winxed\n./parrot -o runtime/parrot/languages/winxed/winxed.pbc ext/winxed/compiler.pir\n./parrot -o winxed.pbc ext/winxed/driver.pir\n./parrot -o runtime/parrot/library/Regex.pbc ext/nqp-rx/src/stage0/Regex-s0.pir\n./parrot -o runtime/parrot/library/HLL.pbc ext/nqp-rx/src/stage0/HLL-s0.pir\n./parrot -o runtime/parrot/library/P6Regex.pbc ext/nqp-rx/src/stage0/P6Regex-s0.pir\n./parrot -o runtime/parrot/library/nqp-rx.pbc ext/nqp-rx/src/stage0/NQP-s0.pir\n./parrot -o runtime/parrot/library/P6object.pbc runtime/parrot/library/P6object.pir\nranlib blib/lib/libparrot.a\n./parrot -o runtime/parrot/library/PGE/Dumper.pbc runtime/parrot/library/PGE/Dumper.pir\n...\n./parrot -o compilers/pct/src/POST/Compiler.pbc compilers/pct/src/POST/Compiler.pir\n/Users/jkeenan/perl5/perlbrew/perls/perl-5.16.2/bin/perl -MExtUtils::Command -e cp runtime/parrot/library/nqp-rx.pbc parrot-nqp.pbc\n./parrot -o runtime/parrot/library/PGE/Util.pbc runtime/parrot/library/PGE/Util.pir\n./parrot -o runtime/parrot/library/PGE/Text.pbc runtime/parrot/library/PGE/Text.pir\n...\n./parrot -o runtime/parrot/library/TclLibrary.pbc runtime/parrot/library/TclLibrary.pir\nranlib: file: blib/lib/libparrot.a(variable_size_pool.o) has no symbols\n./parrot -o runtime/parrot/library/URI.pbc runtime/parrot/library/URI.pir\n...\n./parrot -o runtime/parrot/library/postgres.pbc runtime/parrot/library/postgres.pir\nInvoking Parrot to generate install_config.fpmc\n./parrot config_lib.pir --install \u003e install_config.fpmc\nc++  -o runtime/parrot/dynext/foo_group.bundle \\\n        src/dynpmc/foo_group.o src/dynpmc/foo.o src/dynpmc/foo2.o -fstack-protector -L/usr/local/lib -L\"/Users/jkeenan/gitwork/parrot/blib/lib\"  -undefined dynamic_lookup -bundle   -lm -lutil -lreadline\n./parrot winxed.pbc -c --noan tools/dev/pbc_to_exe.winxed\n./parrot -o runtime/parrot/library/PCT/HLLCompiler.pbc compilers/pct/src/PCT/HLLCompiler.pir\n/Users/jkeenan/perl5/perlbrew/perls/perl-5.16.2/bin/perl tools/build/parrot_config_c.pl --install \u003e \\\n    src/install_config.c\nld: duplicate symbol _dynpmc_class_Foo in src/dynpmc/foo.o and src/dynpmc/foo_group.o for architecture x86_64\ncollect2: ld returned 1 exit status\nmake: *** [runtime/parrot/dynext/foo_group.bundle] Error 1\nmake: *** Waiting for unfinished jobs....\nc++  -o runtime/parrot/dynext/foo_group.bundle \\\n        src/dynpmc/foo_group.o src/dynpmc/foo.o src/dynpmc/foo2.o -fstack-protector -L/usr/local/lib -L\"/Users/jkeenan/gitwork/parrot/blib/lib\"  -undefined dynamic_lookup -bundle   -lm -lutil -lreadline\nld: duplicate symbol _dynpmc_class_Foo in src/dynpmc/foo.o and src/dynpmc/foo_group.o for architecture x86_64\ncollect2: ld returned 1 exit status\nmake: *** [runtime/parrot/dynext/foo_group.bundle] Error 1\nFinished\n```\n\nThe following line is particularly suspicious:\n\n```\nranlib: file: blib/lib/libparrot.a(variable_size_pool.o) has no symbols\n```\n\nWhen I diff the log of my last successful build of the threads branch against my current log of master, the line above is the first place where a significant difference emerges.\n\nAnd, needless to say, the following line is also suspicious:\n\n```\nld: duplicate symbol _dynpmc_class_Foo in src/dynpmc/foo.o and src/dynpmc/foo_group.o for architecture x86_64\n```\n\nI have only intermittent access to the machine on which I observed this problem.  I will respond to your diagnostic suggestions as soon as I can, but not right away.\n\nThank you very much.\nJim Keenan","files":null}]}